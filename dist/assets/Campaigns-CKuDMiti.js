import{c as x,E as h,l as e,r as k,Q as H,J as U,o as fe,a as xe,k as _,H as C,p as E,z as w,b as O,f as X,q as o,R as S,W as V,M as J,S as Z,e as ee,F as ye,y as be,x as L,X as z}from"./vendor-Cn5j0SEu.js";import{b as ke,u as we,d as te}from"./index-GcpNd-v9.js";import{r as Se}from"./PlusIcon-Hols0ICP.js";import{r as se}from"./CheckCircleIcon-9dtlsCvY.js";import{r as _e}from"./ClockIcon-A7fuk63B.js";import"./excel-C9Ruqv6W.js";function ae(D,r){return h(),x("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5m-9-6h.008v.008H12v-.008ZM12 15h.008v.008H12V15Zm0 2.25h.008v.008H12v-.008ZM9.75 15h.008v.008H9.75V15Zm0 2.25h.008v.008H9.75v-.008ZM7.5 15h.008v.008H7.5V15Zm0 2.25h.008v.008H7.5v-.008Zm6.75-4.5h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V15Zm0 2.25h.008v.008h-.008v-.008Zm2.25-4.5h.008v.008H16.5v-.008Zm0 2.25h.008v.008H16.5V15Z"})])}function Ae(D,r){return h(),x("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 12 3.269 3.125A59.769 59.769 0 0 1 21.485 12 59.768 59.768 0 0 1 3.27 20.875L5.999 12Zm0 0h7.5"})])}function Ce(D,r){return h(),x("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}class Me{constructor(){this.isActive=!1,this.queue=[],this.stats={sent:0,failed:0,total:0}}async sendMessage(r,n,d={}){if(console.log(`ğŸš€ Sending WhatsApp to ${r}`),!r||!n)return this.stats.failed++,{success:!1,method:"validation-error",error:"Phone number and message are required",timestamp:new Date().toISOString()};const p=this.cleanPhoneNumber(r),A=encodeURIComponent(n),g=`https://wa.me/${p}?text=${A}`;try{if(d.openInNewTab!==!1){const v=window.open(g,"_blank","noopener,noreferrer,width=800,height=600");if(v)return console.log("âœ… WhatsApp opened in new tab"),this.stats.sent++,setTimeout(()=>{try{v.focus()}catch{}},100),{success:!0,method:"window-open",url:g,phone:p,timestamp:new Date().toISOString()}}const i=document.createElement("a");i.href=g,i.target="_blank",i.rel="noopener noreferrer",i.style.display="none",i.style.position="absolute",i.style.left="-9999px",document.body.appendChild(i);const c=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window});return i.dispatchEvent(c),setTimeout(()=>{document.body.contains(i)&&document.body.removeChild(i)},1e3),console.log("âœ… WhatsApp link clicked"),this.stats.sent++,{success:!0,method:"link-click",url:g,phone:p,timestamp:new Date().toISOString()}}catch(i){return console.error("âŒ Error sending WhatsApp:",i),this.stats.failed++,{success:!1,method:"error",error:i.message,phone:p,timestamp:new Date().toISOString()}}}cleanPhoneNumber(r){let n=r.replace(/\D/g,"");return n.startsWith("0")?n="62"+n.substring(1):n.startsWith("62")||(n="62"+n),n}async sendBulkMessages(r,n,d=3){if(!r||r.length===0)return console.warn("No recipients provided for bulk messaging"),{success:!1,error:"No recipients provided",total:0,sent:0,failed:0,results:[]};this.isActive=!0,this.stats.total=r.length,this.stats.sent=0,this.stats.failed=0;const p=[];console.log(`ğŸš€ Starting bulk WhatsApp campaign to ${r.length} recipients`);for(let g=0;g<r.length&&this.isActive;g++){const i=r[g];try{console.log(`ğŸ“¤ Processing ${g+1}/${r.length}: ${i.name} (${i.phone})`);const c=this.personalizeMessage(n,i),v=await this.sendMessage(i.phone,c,{openInNewTab:g===0}),M={name:i.name,phone:i.phone,success:v.success,method:v.method,timestamp:v.timestamp,error:v.error||null};p.push(M);const y=v.success?"âœ…":"âŒ";console.log(`${y} ${g+1}/${r.length} - ${i.name}: ${v.success?"Success":v.error}`),window.dispatchEvent(new CustomEvent("whatsapp:progress",{detail:{current:g+1,total:r.length,sent:this.stats.sent,failed:this.stats.failed,currentRecipient:i,lastResult:v}})),g<r.length-1&&this.isActive&&(console.log(`â±ï¸ Waiting ${d} seconds before next message...`),await this.delay(d*1e3))}catch(c){console.error(`âŒ Error sending to ${i.name}:`,c),this.stats.failed++;const v={name:i.name,phone:i.phone,success:!1,error:c.message,timestamp:new Date().toISOString()};p.push(v),window.dispatchEvent(new CustomEvent("whatsapp:progress",{detail:{current:g+1,total:r.length,sent:this.stats.sent,failed:this.stats.failed,currentRecipient:i,lastResult:{success:!1,error:c.message}}}))}}this.isActive=!1;const A={total:r.length,sent:this.stats.sent,failed:this.stats.failed,successRate:r.length>0?Math.round(this.stats.sent/r.length*100):0};return console.log("ğŸ‰ Bulk campaign completed:",A),window.dispatchEvent(new CustomEvent("whatsapp:complete",{detail:{...A,results:p,completedAt:new Date().toISOString()}})),{success:!0,...A,results:p}}personalizeMessage(r,n){return r.replace(/\[\[NAME\]\]/g,n.name||"").replace(/\[\[NICKNAME\]\]/g,n.nickname||"").replace(/\[\[PHONE\]\]/g,n.phone||"").replace(/\{nama\}/g,n.name||"").replace(/\{panggilan\}/g,n.nickname||"").replace(/\{hp\}/g,n.phone||"")}delay(r){return new Promise(n=>setTimeout(n,r))}getStats(){return{...this.stats,isActive:this.isActive}}resetStats(){this.stats={sent:0,failed:0,total:0}}stop(){this.isActive=!1,console.log("ğŸ›‘ WhatsApp sender stopped")}async testConnection(r="6281234567890"){const n=`ğŸ§ª Test message from StarSender - ${new Date().toLocaleTimeString()}`;try{const d=await this.sendMessage(r,n,{openInNewTab:!0});return d.success?(console.log("âœ… WhatsApp test connection successful"),{success:!0,message:"WhatsApp connection test successful",method:d.method,timestamp:d.timestamp}):(console.error("âŒ WhatsApp test connection failed:",d.error),{success:!1,message:"WhatsApp connection test failed",error:d.error,timestamp:d.timestamp})}catch(d){return console.error("âŒ WhatsApp test connection error:",d),{success:!1,message:"WhatsApp connection test error",error:d.message,timestamp:new Date().toISOString()}}}getSystemInfo(){return{userAgent:navigator.userAgent,platform:navigator.platform,language:navigator.language,cookieEnabled:navigator.cookieEnabled,onLine:navigator.onLine,timestamp:new Date().toISOString()}}}const G=new Me;window.whatsappSender=G;console.log("ğŸš€ WhatsApp Sender initialized - CORS Bypass ready!");const Te={class:"space-y-6"},Be={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between"},Ee={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Ne={class:"card p-6"},Pe={class:"flex items-center justify-between mb-4"},$e={class:"space-y-2"},Ie={class:"flex items-center justify-between text-sm"},Re={class:"flex items-center justify-between text-sm"},De={class:"text-gray-900"},je={class:"flex items-center justify-between text-sm"},We={class:"text-green-600"},He={class:"mt-4 pt-4 border-t border-gray-200"},Oe=["disabled"],Ve={class:"card p-6"},Ke={class:"space-y-4"},Ue={value:"all"},Je={value:"unpaid"},Ze={value:"paid"},Le=["disabled"],ze={class:"grid grid-cols-1 md:grid-cols-4 gap-6"},Ge={class:"card p-6"},qe={class:"flex items-center"},Qe={class:"p-2 bg-blue-100 rounded-lg"},Fe={class:"ml-4"},Ye={class:"text-2xl font-semibold text-gray-900"},Xe={class:"card p-6"},et={class:"flex items-center"},tt={class:"p-2 bg-green-100 rounded-lg"},st={class:"ml-4"},at={class:"text-2xl font-semibold text-gray-900"},nt={class:"card p-6"},lt={class:"flex items-center"},ot={class:"p-2 bg-yellow-100 rounded-lg"},rt={class:"ml-4"},it={class:"text-2xl font-semibold text-gray-900"},dt={class:"card p-6"},ut={class:"flex items-center"},ct={class:"p-2 bg-purple-100 rounded-lg"},mt={class:"ml-4"},pt={class:"text-2xl font-semibold text-gray-900"},gt={key:0,class:"card p-6"},vt={class:"flex items-center justify-between mb-4"},ht={class:"space-y-4"},ft={class:"flex justify-between text-sm text-gray-600 mb-2"},xt={class:"w-full bg-gray-200 rounded-full h-2"},yt={class:"grid grid-cols-3 gap-4 text-center"},bt={class:"text-2xl font-bold text-green-600"},kt={class:"text-2xl font-bold text-red-600"},wt={class:"text-2xl font-bold text-blue-600"},St={key:0,class:"text-sm text-gray-600 text-center"},_t={class:"card"},At={class:"overflow-x-auto"},Ct={class:"min-w-full divide-y divide-gray-200"},Mt={class:"bg-white divide-y divide-gray-200"},Tt={class:"px-6 py-4 whitespace-nowrap"},Bt={class:"text-sm font-medium text-gray-900"},Et={class:"text-sm text-gray-500 truncate max-w-xs"},Nt={class:"px-6 py-4 whitespace-nowrap"},Pt={class:"text-sm text-gray-900"},$t={class:"text-sm text-gray-500"},It={class:"px-6 py-4 whitespace-nowrap"},Rt={class:"px-6 py-4 whitespace-nowrap"},Dt={class:"flex items-center"},jt={class:"w-full bg-gray-200 rounded-full h-2 mr-2"},Wt={class:"text-xs text-gray-500"},Ht={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},Ot={class:"flex space-x-2"},Vt=["onClick"],Kt=["onClick"],Ut=["onClick"],Jt={key:0,class:"text-center py-12"},Zt={class:"p-6"},Lt={class:"flex items-center justify-between mb-6"},zt={class:"space-y-2"},Gt={class:"flex items-center"},qt={class:"flex items-center"},Qt={class:"flex items-center"},Ft={class:"flex flex-col sm:flex-row sm:justify-end space-y-3 sm:space-y-0 sm:space-x-3 pt-6 border-t border-gray-200"},Yt=["disabled"],Xt={class:"p-6"},es={class:"flex items-center justify-between mb-6"},ts={class:"text-xl font-medium text-gray-900"},ss={key:0,class:"space-y-4"},as={class:"grid grid-cols-2 gap-4"},ns={class:"text-sm text-gray-900"},ls={class:"mt-1 p-3 bg-gray-50 rounded-lg"},os={class:"whitespace-pre-wrap text-sm text-gray-900"},rs={key:0,class:"border rounded-lg p-4"},is={class:"grid grid-cols-3 gap-4 text-center"},ds={class:"text-2xl font-bold text-green-600"},us={class:"text-2xl font-bold text-red-600"},cs={class:"text-2xl font-bold text-blue-600"},xs={__name:"Campaigns",setup(D){const r=ke(),n=we(),d=k([]),p=k([]),A=k(!1),g=k(!1),i=k(!1),c=k(!1),v=k(!1),M=k(!1),y=k(null),$=k(!0),T=H({totalSent:0,successRate:100}),l=H({active:!1,current:0,total:0,sent:0,failed:0,remaining:0,currentRecipient:null}),f=H({target:"unpaid",template:"",message:""}),u=H({title:"",message:"",target:"unpaid",template:"",delay:10}),I=U(()=>p.value),R=U(()=>[]),ne=U(()=>d.value.filter(s=>{if(!s.executedAt)return!1;const t=new Date().toDateString(),m=new Date(s.executedAt).toDateString();return t===m}).length),j={reminder:`Halo [[NAME]]! ğŸ‘‹

ğŸ’° **Reminder Pembayaran Kas Kelas**

Ini adalah pengingat pembayaran kas kelas untuk bulan ini.

Silakan segera lakukan pembayaran agar administrasi kelas tetap lancar.

Terima kasih! ğŸ™`,urgent:`ğŸš¨ **URGENT** - [[NAME]]

Pembayaran kas kelas sudah memasuki batas waktu. Mohon segera melakukan pembayaran hari ini.

Hubungi bendahara jika ada kendala.

Terima kasih atas perhatiannya! ğŸ™`,announcement:`ğŸ“¢ **Pengumuman Penting**

Halo [[NAME]]!

Ada pengumuman penting untuk kelas kita. Silakan check group WA atau hubungi ketua kelas untuk informasi lebih lanjut.

Terima kasih! ğŸ™`,payment_reminder:`Halo [[NAME]]! ğŸ‘‹

ğŸ’° Reminder pembayaran kas kelas bulan ini:

â€¢ Jumlah: Rp 50.000
â€¢ Jatuh tempo: Akhir bulan
â€¢ Status: Belum bayar

Silakan segera lakukan pembayaran. Terima kasih! ğŸ™`,payment_urgent:`ğŸš¨ URGENT - [[NAME]]

Pembayaran kas kelas sudah terlambat! Mohon segera bayar hari ini untuk menghindari denda.

Hubungi bendahara jika ada kendala: 08xxx

Terima kasih! ğŸ™`,announcement:`ğŸ“¢ **Pengumuman Kelas**

Halo [[NAME]]!

Ada informasi penting untuk kelas. Silakan baca dengan seksama dan konfirmasi jika diperlukan.

Detail akan disampaikan di group kelas.

Terima kasih! ğŸ™`,event:`ğŸ‰ **Info Kegiatan Kelas**

Halo [[NAME]]!

Ada kegiatan kelas yang akan datang. Mohon persiapkan diri dan catat tanggalnya ya!

Info lengkap di group WA kelas.

Sampai jumpa! ğŸ‘‹`,thanks:`ğŸ™ **Terima Kasih**

Halo [[NAME]]!

Terima kasih atas partisipasi aktif dalam kegiatan kelas. Dukungan kalian sangat berarti!

Keep up the good work! ğŸ’ª`},le=async()=>{try{A.value=!0,await r.fetchStudents(),p.value=r.students||[];const s=localStorage.getItem("campaigns");s&&(d.value=JSON.parse(s));const t=localStorage.getItem("broadcastStats");if(t){const m=JSON.parse(t);Object.assign(T,m)}}catch(s){console.error("Error loading data:",s),n.error("Gagal memuat data")}finally{A.value=!1}},oe=async()=>{i.value=!0;try{const s="ğŸ§ª Test broadcast dari Campaign System - "+new Date().toLocaleTimeString();if(p.value.length>0){const t=p.value[0],m=await G.sendMessage(t.phone,s);m.success?n.success("Test broadcast berhasil! WhatsApp terbuka."):n.error("Test broadcast gagal: "+m.error)}else n.warning("Tidak ada data siswa untuk test")}catch(s){console.error("Test broadcast error:",s),n.error("Error saat test broadcast")}finally{i.value=!1}},re=()=>{f.template&&j[f.template]&&(f.message=j[f.template])},ie=async()=>{if(!f.message.trim()){n.error("Pesan tidak boleh kosong");return}c.value=!0;try{let s=[];switch(f.target){case"all":s=p.value;break;case"unpaid":s=I.value;break;case"paid":s=R.value;break}if(s.length===0){n.warning("Tidak ada penerima yang dipilih");return}await q(s,f.message,5),f.message="",f.template=""}catch(s){console.error("Quick broadcast error:",s),n.error("Gagal mengirim quick broadcast")}finally{c.value=!1}},q=async(s,t,m=10)=>{l.active=!0,l.current=0,l.total=s.length,l.sent=0,l.failed=0,l.remaining=s.length;const a=[];try{for(let B=0;B<s.length&&c.value;B++){const b=s[B];l.currentRecipient=b;try{const P=t.replace(/\[\[NAME\]\]/g,b.name||"").replace(/\[\[NICKNAME\]\]/g,b.nickname||"").replace(/\[\[PHONE\]\]/g,b.phone||""),K=await G.sendMessage(b.phone,P,{openInNewTab:B===0});K.success?(l.sent++,n.success(`âœ… Terkirim ke ${b.name}`,{timeout:2e3})):(l.failed++,n.error(`âŒ Gagal ke ${b.name}`,{timeout:2e3})),a.push({name:b.name,phone:b.phone,success:K.success,timestamp:K.timestamp})}catch(P){console.error(`Error sending to ${b.name}:`,P),l.failed++,a.push({name:b.name,phone:b.phone,success:!1,error:P.message})}l.current=B+1,l.remaining=s.length-(B+1),B<s.length-1&&c.value&&await new Promise(P=>setTimeout(P,m*1e3))}T.totalSent+=l.sent,localStorage.setItem("broadcastStats",JSON.stringify(T));const N=Math.round(l.sent/s.length*100);n.success(`ğŸ‰ Broadcast selesai! ${l.sent}/${s.length} berhasil (${N}%)`)}finally{l.active=!1,l.currentRecipient=null}return a},de=()=>{c.value=!1,n.info("ğŸ›‘ Broadcast dihentikan")},ue=()=>{u.template&&j[u.template]&&(u.message=j[u.template])},ce=async()=>{if(!u.title.trim()||!u.message.trim()){n.error("Judul dan pesan harus diisi");return}g.value=!0;try{let s=[];switch(u.target){case"all":s=p.value;break;case"unpaid":s=I.value;break;case"paid":s=R.value;break}const t={id:"campaign_"+Date.now(),title:u.title,message:u.message,target:u.target,totalRecipients:s.length,delay:parseInt(u.delay),status:"draft",createdAt:new Date().toISOString(),results:null};d.value.push(t),localStorage.setItem("campaigns",JSON.stringify(d.value)),n.success("Campaign berhasil dibuat"),W()}catch(s){console.error("Error saving campaign:",s),n.error("Gagal menyimpan campaign")}finally{g.value=!1}},me=async s=>{if(confirm(`Yakin ingin menjalankan campaign "${s.title}"?`)){c.value=!0;try{let t=[];switch(s.target){case"all":t=p.value;break;case"unpaid":t=I.value;break;case"paid":t=R.value;break}if(t.length===0){n.warning("Tidak ada penerima untuk campaign ini");return}s.status="running",s.executedAt=new Date().toISOString();const m=await q(t,s.message,s.delay);s.status="completed",s.results={total:t.length,sent:l.sent,failed:l.failed,details:m},localStorage.setItem("campaigns",JSON.stringify(d.value))}catch(t){console.error("Error executing campaign:",t),s.status="failed",n.error("Gagal menjalankan campaign")}finally{c.value=!1}}},pe=s=>{y.value=s,M.value=!0},ge=s=>{if(!confirm("Yakin ingin menghapus campaign ini?"))return;const t=d.value.findIndex(m=>m.id===s);t!==-1&&(d.value.splice(t,1),localStorage.setItem("campaigns",JSON.stringify(d.value)),n.success("Campaign berhasil dihapus"))},W=()=>{v.value=!1,Object.assign(u,{title:"",message:"",target:"unpaid",template:"",delay:10})},ve=s=>({all:"Semua Siswa",paid:"Sudah Bayar",unpaid:"Belum Bayar"})[s]||s,Q=s=>({draft:"Draft",running:"Berjalan",completed:"Selesai",failed:"Gagal"})[s]||s,F=s=>({draft:"bg-gray-100 text-gray-800",running:"bg-yellow-100 text-yellow-800",completed:"bg-green-100 text-green-800",failed:"bg-red-100 text-red-800"})[s]||"bg-gray-100 text-gray-800",Y=s=>s.results?Math.round(s.results.sent/s.results.total*100):s.status==="completed"?100:0,he=()=>{window.addEventListener("whatsapp:progress",s=>{const{current:t,total:m,sent:a,failed:N}=s.detail;l.current=t,l.total=m,l.sent=a,l.failed=N,l.remaining=m-t}),window.addEventListener("whatsapp:complete",s=>{const{total:t,sent:m,failed:a}=s.detail;l.active=!1,T.totalSent+=m,localStorage.setItem("broadcastStats",JSON.stringify(T))})};return fe(()=>{le(),he()}),xe(()=>{c.value=!1}),(s,t)=>{var m;return h(),x("div",Te,[e("div",Be,[t[16]||(t[16]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900"},"Campaign WhatsApp"),e("p",{class:"mt-1 text-sm text-gray-500"}," Broadcast pesan otomatis ke multiple nomor WhatsApp ")],-1)),e("button",{onClick:t[0]||(t[0]=a=>v.value=!0),class:"btn-primary mt-4 sm:mt-0"},[C(w(Se),{class:"w-5 h-5 mr-2"}),t[15]||(t[15]=E(" Buat Campaign Baru ",-1))])]),e("div",Ee,[e("div",Ne,[e("div",Pe,[t[17]||(t[17]=e("div",null,[e("h3",{class:"text-lg font-semibold text-gray-900 flex items-center"}," ğŸŒŸ StarSender Status "),e("p",{class:"text-sm text-gray-600"},"Sistem broadcast WhatsApp")],-1)),e("div",{class:O($.value?"text-green-600":"text-red-600")},[$.value?(h(),X(w(se),{key:0,class:"w-6 h-6"})):(h(),X(w(Ce),{key:1,class:"w-6 h-6"}))],2)]),e("div",$e,[e("div",Ie,[t[18]||(t[18]=e("span",{class:"text-gray-600"},"Status:",-1)),e("span",{class:O($.value?"text-green-600":"text-red-600")},o($.value?"Ready":"Not Configured"),3)]),e("div",Re,[t[19]||(t[19]=e("span",{class:"text-gray-600"},"Total Sent:",-1)),e("span",De,o(T.totalSent),1)]),e("div",je,[t[20]||(t[20]=e("span",{class:"text-gray-600"},"Success Rate:",-1)),e("span",We,o(T.successRate)+"%",1)])]),e("div",He,[e("button",{onClick:oe,disabled:!$.value||i.value,class:"btn-sm btn-secondary w-full"},o(i.value?"Testing...":"ğŸ§ª Test Broadcast"),9,Oe)])]),e("div",Ve,[t[24]||(t[24]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"âš¡ Quick Broadcast",-1)),e("div",Ke,[e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Target",-1)),S(e("select",{"onUpdate:modelValue":t[1]||(t[1]=a=>f.target=a),class:"input-field"},[e("option",Ue,"Semua Siswa ("+o(p.value.length)+")",1),e("option",Je,"Belum Bayar ("+o(I.value.length)+")",1),e("option",Ze,"Sudah Bayar ("+o(R.value.length)+")",1)],512),[[V,f.target]])]),e("div",null,[t[23]||(t[23]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Pesan Cepat",-1)),S(e("select",{"onUpdate:modelValue":t[2]||(t[2]=a=>f.template=a),onChange:re,class:"input-field"},t[22]||(t[22]=[J('<option value="">-- Pilih Template --</option><option value="reminder">ğŸ’° Reminder Pembayaran</option><option value="urgent">ğŸš¨ Urgent - Pembayaran Segera</option><option value="announcement">ğŸ“¢ Pengumuman Penting</option><option value="custom">âœï¸ Custom Message</option>',5)]),544),[[V,f.template]])]),e("div",null,[S(e("textarea",{"onUpdate:modelValue":t[3]||(t[3]=a=>f.message=a),rows:"3",class:"input-field",placeholder:"Ketik pesan atau pilih template..."},null,512),[[Z,f.message]])]),e("button",{onClick:ie,disabled:!f.message||c.value,class:"btn-primary w-full"},o(c.value?"Mengirim...":"ğŸš€ Kirim Sekarang"),9,Le)])])]),e("div",ze,[e("div",Ge,[e("div",qe,[e("div",Qe,[C(w(ae),{class:"w-6 h-6 text-blue-600"})]),e("div",Fe,[t[25]||(t[25]=e("p",{class:"text-sm font-medium text-gray-600"},"Total Campaign",-1)),e("p",Ye,o(d.value.length),1)])])]),e("div",Xe,[e("div",et,[e("div",tt,[C(w(se),{class:"w-6 h-6 text-green-600"})]),e("div",st,[t[26]||(t[26]=e("p",{class:"text-sm font-medium text-gray-600"},"Selesai",-1)),e("p",at,o(d.value.filter(a=>a.status==="completed").length),1)])])]),e("div",nt,[e("div",lt,[e("div",ot,[C(w(_e),{class:"w-6 h-6 text-yellow-600"})]),e("div",rt,[t[27]||(t[27]=e("p",{class:"text-sm font-medium text-gray-600"},"Terjadwal",-1)),e("p",it,o(d.value.filter(a=>a.status==="scheduled").length),1)])])]),e("div",dt,[e("div",ut,[e("div",ct,[C(w(Ae),{class:"w-6 h-6 text-purple-600"})]),e("div",mt,[t[28]||(t[28]=e("p",{class:"text-sm font-medium text-gray-600"},"Broadcast Hari Ini",-1)),e("p",pt,o(ne.value),1)])])])]),c.value||l.active?(h(),x("div",gt,[e("div",vt,[t[29]||(t[29]=e("h3",{class:"text-lg font-semibold text-gray-900"},"ğŸ“¤ Broadcasting Progress",-1)),c.value?(h(),x("button",{key:0,onClick:de,class:"btn-sm btn-secondary"}," ğŸ›‘ Stop ")):_("",!0)]),e("div",ht,[e("div",null,[e("div",ft,[e("span",null,"Progress: "+o(l.current)+"/"+o(l.total),1),e("span",null,o(Math.round(l.current/l.total*100))+"%",1)]),e("div",xt,[e("div",{class:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:ee({width:l.current/l.total*100+"%"})},null,4)])]),e("div",yt,[e("div",null,[e("div",bt,o(l.sent),1),t[30]||(t[30]=e("div",{class:"text-sm text-gray-500"},"Berhasil",-1))]),e("div",null,[e("div",kt,o(l.failed),1),t[31]||(t[31]=e("div",{class:"text-sm text-gray-500"},"Gagal",-1))]),e("div",null,[e("div",wt,o(l.remaining),1),t[32]||(t[32]=e("div",{class:"text-sm text-gray-500"},"Sisa",-1))])]),l.currentRecipient?(h(),x("div",St,[t[33]||(t[33]=E(" Mengirim ke: ",-1)),e("strong",null,o(l.currentRecipient.name),1),E(" ("+o(l.currentRecipient.phone)+") ",1)])):_("",!0)])])):_("",!0),e("div",_t,[t[37]||(t[37]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("h3",{class:"text-lg font-medium text-gray-900"},"Daftar Campaign")],-1)),e("div",At,[e("table",Ct,[t[34]||(t[34]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"}," Campaign "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"}," Target "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"}," Status "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"}," Progress "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"}," Aksi ")])],-1)),e("tbody",Mt,[(h(!0),x(ye,null,be(d.value,a=>(h(),x("tr",{key:a.id},[e("td",Tt,[e("div",null,[e("div",Bt,o(a.title),1),e("div",Et,o(a.message.substring(0,50))+"...",1)])]),e("td",Nt,[e("div",Pt,o(ve(a.target)),1),e("div",$t,o(a.totalRecipients||0)+" nomor",1)]),e("td",It,[e("span",{class:O([F(a.status),"inline-flex px-2 py-1 text-xs font-semibold rounded-full"])},o(Q(a.status)),3)]),e("td",Rt,[e("div",Dt,[e("div",jt,[e("div",{class:"bg-blue-600 h-2 rounded-full",style:ee({width:Y(a)+"%"})},null,4)]),e("span",Wt,o(Y(a))+"%",1)])]),e("td",Ht,[e("div",Ot,[e("button",{onClick:N=>pe(a),class:"text-blue-600 hover:text-blue-900"}," Lihat ",8,Vt),a.status==="draft"?(h(),x("button",{key:0,onClick:N=>me(a),class:"text-green-600 hover:text-green-900"}," Jalankan ",8,Kt)):_("",!0),e("button",{onClick:N=>ge(a.id),class:"text-red-600 hover:text-red-900"}," Hapus ",8,Ut)])])]))),128))])]),d.value.length===0?(h(),x("div",Jt,[C(w(ae),{class:"mx-auto h-12 w-12 text-gray-400"}),t[35]||(t[35]=e("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"Belum ada campaign",-1)),t[36]||(t[36]=e("p",{class:"mt-1 text-sm text-gray-500"},"Mulai dengan membuat campaign pertama atau gunakan Quick Broadcast.",-1))])):_("",!0)])]),v.value?(h(),x("div",{key:1,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50 flex items-center justify-center p-4",onClick:W},[e("div",{class:"relative w-full max-w-2xl bg-white rounded-lg shadow-xl max-h-full overflow-y-auto",onClick:t[11]||(t[11]=L(()=>{},["stop"]))},[e("div",Zt,[e("div",Lt,[t[38]||(t[38]=e("h3",{class:"text-xl font-medium text-gray-900"},"Buat Campaign Baru",-1)),e("button",{onClick:W,class:"text-gray-400 hover:text-gray-600"},[C(w(te),{class:"w-6 h-6"})])]),e("form",{onSubmit:L(ce,["prevent"]),class:"space-y-6"},[e("div",null,[t[39]||(t[39]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Judul Campaign ",-1)),S(e("input",{"onUpdate:modelValue":t[4]||(t[4]=a=>u.title=a),type:"text",required:"",class:"input-field",placeholder:"Contoh: Reminder Pembayaran Kas Januari"},null,512),[[Z,u.title]])]),e("div",null,[t[41]||(t[41]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Template Pesan ",-1)),S(e("select",{"onUpdate:modelValue":t[5]||(t[5]=a=>u.template=a),onChange:ue,class:"input-field mb-3"},t[40]||(t[40]=[J('<option value="">-- Pilih Template --</option><option value="payment_reminder">ğŸ’° Reminder Pembayaran Kas</option><option value="payment_urgent">ğŸš¨ Urgent - Pembayaran Terlambat</option><option value="announcement">ğŸ“¢ Pengumuman Kelas</option><option value="event">ğŸ‰ Informasi Kegiatan</option><option value="thanks">ğŸ™ Terima Kasih</option><option value="custom">âœï¸ Custom Message</option>',7)]),544),[[V,u.template]]),S(e("textarea",{"onUpdate:modelValue":t[6]||(t[6]=a=>u.message=a),rows:"8",required:"",class:"input-field",placeholder:"Ketik pesan Anda di sini..."},null,512),[[Z,u.message]]),t[42]||(t[42]=e("div",{class:"mt-2 text-sm text-gray-500"},[e("p",null,[e("strong",null,"Variable tersedia:"),E(" [[NAME]], [[NICKNAME]], [[PHONE]]")])],-1))]),e("div",null,[t[43]||(t[43]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Target Penerima ",-1)),e("div",zt,[e("label",Gt,[S(e("input",{"onUpdate:modelValue":t[7]||(t[7]=a=>u.target=a),type:"radio",value:"all",class:"mr-2"},null,512),[[z,u.target]]),E(" Semua Siswa ("+o(p.value.length)+" siswa) ",1)]),e("label",qt,[S(e("input",{"onUpdate:modelValue":t[8]||(t[8]=a=>u.target=a),type:"radio",value:"unpaid",class:"mr-2"},null,512),[[z,u.target]]),E(" Siswa Belum Bayar ("+o(I.value.length)+" siswa) ",1)]),e("label",Qt,[S(e("input",{"onUpdate:modelValue":t[9]||(t[9]=a=>u.target=a),type:"radio",value:"paid",class:"mr-2"},null,512),[[z,u.target]]),E(" Siswa Sudah Bayar ("+o(R.value.length)+" siswa) ",1)])])]),e("div",null,[t[45]||(t[45]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Jeda Antar Pesan (detik) ",-1)),S(e("select",{"onUpdate:modelValue":t[10]||(t[10]=a=>u.delay=a),class:"input-field"},t[44]||(t[44]=[J('<option value="3">3 detik (cepat)</option><option value="5">5 detik</option><option value="10">10 detik (recommended)</option><option value="15">15 detik</option><option value="30">30 detik (aman)</option>',5)]),512),[[V,u.delay]])]),e("div",Ft,[e("button",{type:"button",onClick:W,class:"btn-secondary"}," Batal "),e("button",{type:"submit",disabled:g.value,class:"btn-primary"},o(g.value?"Menyimpan...":"Simpan Campaign"),9,Yt)])],32)])])])):_("",!0),M.value?(h(),x("div",{key:2,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50 flex items-center justify-center p-4",onClick:t[14]||(t[14]=a=>M.value=!1)},[e("div",{class:"relative w-full max-w-2xl bg-white rounded-lg shadow-xl max-h-full overflow-y-auto",onClick:t[13]||(t[13]=L(()=>{},["stop"]))},[e("div",Xt,[e("div",es,[e("h3",ts," Detail Campaign: "+o((m=y.value)==null?void 0:m.title),1),e("button",{onClick:t[12]||(t[12]=a=>M.value=!1),class:"text-gray-400 hover:text-gray-600"},[C(w(te),{class:"w-6 h-6"})])]),y.value?(h(),x("div",ss,[e("div",as,[e("div",null,[t[46]||(t[46]=e("label",{class:"text-sm font-medium text-gray-500"},"Status",-1)),e("p",{class:O([F(y.value.status),"inline-flex px-2 py-1 text-xs font-semibold rounded-full"])},o(Q(y.value.status)),3)]),e("div",null,[t[47]||(t[47]=e("label",{class:"text-sm font-medium text-gray-500"},"Total Penerima",-1)),e("p",ns,o(y.value.totalRecipients||0)+" nomor",1)])]),e("div",null,[t[48]||(t[48]=e("label",{class:"text-sm font-medium text-gray-500"},"Pesan",-1)),e("div",ls,[e("pre",os,o(y.value.message),1)])]),y.value.results?(h(),x("div",rs,[t[52]||(t[52]=e("h4",{class:"font-medium text-gray-900 mb-3"},"ğŸ“Š Hasil Broadcast",-1)),e("div",is,[e("div",null,[e("div",ds,o(y.value.results.sent||0),1),t[49]||(t[49]=e("div",{class:"text-sm text-gray-500"},"Berhasil",-1))]),e("div",null,[e("div",us,o(y.value.results.failed||0),1),t[50]||(t[50]=e("div",{class:"text-sm text-gray-500"},"Gagal",-1))]),e("div",null,[e("div",cs,o(y.value.results.total||0),1),t[51]||(t[51]=e("div",{class:"text-sm text-gray-500"},"Total",-1))])])])):_("",!0)])):_("",!0)])])])):_("",!0)])}}};export{xs as default};

import{c as k,E as S,l as t,L as U,K as E,r as A,o as P,J as F,A as q,M as D,H as c,p as f,z as u,q as r,j as H}from"./vendor-Cn5j0SEu.js";import{b as G,g as K}from"./index-DyprfSbd.js";import{_ as W,r as Y,a as Q}from"./_plugin-vue_export-helper-1253KQqJ.js";import{r as X}from"./DocumentTextIcon-BLO7htXp.js";import{r as C}from"./CheckCircleIcon-9dtlsCvY.js";import{r as ee}from"./InformationCircleIcon-BbkVrAyu.js";import{r as te}from"./PrinterIcon-F7orX_Kk.js";import"./excel-C9Ruqv6W.js";function ae(I,y){return S(),k("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"})])}function se(I,y){return S(),k("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 15.75V18m-7.5-6.75h.008v.008H8.25v-.008Zm0 2.25h.008v.008H8.25V13.5Zm0 2.25h.008v.008H8.25v-.008Zm0 2.25h.008v.008H8.25V18Zm2.498-6.75h.007v.008h-.007v-.008Zm0 2.25h.007v.008h-.007V13.5Zm0 2.25h.007v.008h-.007v-.008Zm0 2.25h.007v.008h-.007V18Zm2.504-6.75h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V13.5Zm0 2.25h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V18Zm2.498-6.75h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V13.5ZM8.25 6h7.5v2.25h-7.5V6ZM12 2.25c-1.892 0-3.758.11-5.593.322C5.307 2.7 4.5 3.65 4.5 4.757V19.5a2.25 2.25 0 0 0 2.25 2.25h10.5a2.25 2.25 0 0 0 2.25-2.25V4.757c0-1.108-.806-2.057-1.907-2.185A48.507 48.507 0 0 0 12 2.25Z"})])}function ne(I,y){return S(),k("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"})])}const ie={class:"min-h-screen bg-gray-50 py-8"},oe={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8"},le={class:"bg-white shadow-xl rounded-lg overflow-hidden",id:"invoice-content"},re={class:"px-8 py-6"},de={class:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-8"},ce={class:"text-lg font-semibold text-gray-900 mb-4 flex items-center"},me={class:"bg-gray-50 rounded-lg p-4 space-y-2"},pe={class:"flex justify-between"},ue={class:"font-medium"},fe={class:"flex justify-between"},ve={class:"font-medium"},ge={class:"flex justify-between"},be={class:"font-medium"},he={class:"text-lg font-semibold text-gray-900 mb-4 flex items-center"},xe={class:"bg-gray-50 rounded-lg p-4 space-y-2"},ye={class:"flex justify-between"},we={class:"font-medium font-mono"},_e={class:"flex justify-between"},ke={class:"font-medium"},Se={class:"flex justify-between"},Ie={class:"font-medium font-mono"},De={class:"flex justify-between"},Ne={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800"},$e={class:"mb-8"},Be={class:"text-lg font-semibold text-gray-900 mb-4 flex items-center"},Ae={class:"bg-white border border-gray-200 rounded-lg overflow-hidden"},Ke={class:"w-full"},Ce={class:"bg-white divide-y divide-gray-200"},je={class:"px-6 py-4 whitespace-nowrap"},Te={class:"text-sm font-medium text-gray-900"},Me={class:"px-6 py-4 whitespace-nowrap"},Oe={class:"text-sm text-gray-900"},Le={class:"px-6 py-4 whitespace-nowrap text-right"},Ve={class:"text-sm font-medium text-gray-900"},ze={class:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-8"},Je={class:"text-lg font-semibold text-gray-900 mb-4 flex items-center"},Ze={class:"bg-gray-50 rounded-lg p-4"},Re={class:"flex items-center justify-between mb-2"},Ue={class:"font-medium"},Ee={class:"flex items-center justify-between mb-2"},Pe={class:"font-medium"},Fe={class:"flex items-center justify-between"},qe={class:"font-medium font-mono text-sm"},He={class:"text-lg font-semibold text-gray-900 mb-4 flex items-center"},Ge={class:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-lg p-4 border border-green-200"},We={class:"space-y-2"},Ye={class:"flex justify-between text-sm"},Qe={class:"border-t border-green-200 pt-2"},Xe={class:"flex justify-between items-center"},et={class:"text-xl font-bold text-green-600"},tt={class:"bg-gradient-to-r from-green-100 to-emerald-100 border border-green-200 rounded-lg p-6 mb-8"},at={class:"flex items-center"},st={class:"bg-blue-50 border border-blue-200 rounded-lg p-6 mb-8"},nt={class:"text-lg font-semibold text-blue-800 mb-3 flex items-center"},it={class:"bg-gray-100 px-8 py-4 border-t border-gray-200"},ot={class:"flex flex-col md:flex-row justify-between items-center text-sm text-gray-600"},lt={class:"mt-2 md:mt-0"},rt={class:"mt-8 flex flex-col sm:flex-row gap-4 justify-center"},dt={__name:"Invoice",setup(I){const y=U();E();const d=G(),n=A({id:"",invoiceNumber:"",orderId:"",student:{name:"",nickname:"",phone:""},description:"Kas Kelas",amount:0,period:"",paymentMethod:"",paidAt:"",createdAt:"",reference:"",status:"completed"}),j=A(!0);P(async()=>{await T()});function x(){n.value&&n.value.id&&localStorage.setItem("lastInvoice",JSON.stringify(n.value))}async function T(){try{await d.loadStudents(),await d.loadPaymentLinks(),await d.loadTransactions();const{orderId:a,studentId:e}=y.query;a?await M(a):e?await O(e):L()}catch(a){console.error("Error loading invoice:",a),w()}finally{j.value=!1}}async function M(a){const e=localStorage.getItem("paymentLinks");if(e){const i=JSON.parse(e).find(o=>o.order_id===a);if(i){let o=null;const v=localStorage.getItem("students");if(v&&(o=JSON.parse(v).find(p=>p.id===i.student_id)),!o){const b=localStorage.getItem("demo_students");b&&(o=JSON.parse(b).find(h=>h.id===i.student_id))}if(!o&&i.student&&(o=i.student),o){n.value={id:i.id,invoiceNumber:`INV-${a.slice(-8).toUpperCase()}`,orderId:a,student:{name:o.name,nickname:o.nickname||"",phone:o.phone||o.parent_phone||""},description:i.description||`Kas Kelas Bulan ${m()}`,amount:i.amount,period:i.period||m(),paymentMethod:i.payment_method||"qris",paidAt:i.completed_at||i.paid_at||new Date().toISOString(),createdAt:i.created_at||new Date().toISOString(),reference:i.reference||a.slice(-8).toUpperCase(),status:"completed"};return}}}const l=localStorage.getItem("transactions");if(l){const i=JSON.parse(l).find(o=>o.order_id===a||o.id===a);if(i){let o=null;const v=localStorage.getItem("students");if(v&&(o=JSON.parse(v).find(p=>p.id===i.student_id)),o){n.value={id:i.id,invoiceNumber:`INV-${a.slice(-8).toUpperCase()}`,orderId:a,student:{name:o.name,nickname:o.nickname||"",phone:o.phone||o.parent_phone||""},description:i.description||`Kas Kelas Bulan ${m()}`,amount:i.amount,period:i.period||m(),paymentMethod:i.payment_method||"qris",paidAt:i.paid_at||i.created_at||new Date().toISOString(),createdAt:i.created_at||new Date().toISOString(),reference:i.reference||a.slice(-8).toUpperCase(),status:"completed"},x();return}}}w(),x()}async function O(a){let e=null;const l=localStorage.getItem("students");if(l&&(e=JSON.parse(l).find(i=>i.id===a)),!e){const s=localStorage.getItem("demo_students");s&&(e=JSON.parse(s).find(o=>o.id===a))}if(e){let s=null;const i=localStorage.getItem("paymentLinks");if(i){const b=JSON.parse(i).filter(p=>p.student_id===a);b.length>0&&(s=b.sort((p,h)=>new Date(h.created_at||h.completed_at||0)-new Date(p.created_at||p.completed_at||0))[0])}if(!s){const v=localStorage.getItem("transactions");if(v){const p=JSON.parse(v).filter(h=>h.student_id===a);p.length>0&&(s=p.sort((h,R)=>new Date(R.created_at||0)-new Date(h.created_at||0))[0])}}const o=(s==null?void 0:s.order_id)||`KAS${Date.now()}`;n.value={id:(s==null?void 0:s.id)||`inv_${Date.now()}`,invoiceNumber:`INV-${o.slice(-8).toUpperCase()}`,orderId:o,student:{name:e.name,nickname:e.nickname||"",phone:e.phone||e.parent_phone||""},description:(s==null?void 0:s.description)||`Kas Kelas Bulan ${m()}`,amount:(s==null?void 0:s.amount)||5e4,period:(s==null?void 0:s.period)||m(),paymentMethod:(s==null?void 0:s.payment_method)||"qris",paidAt:(s==null?void 0:s.completed_at)||(s==null?void 0:s.paid_at)||new Date().toISOString(),createdAt:(s==null?void 0:s.created_at)||new Date().toISOString(),reference:(s==null?void 0:s.reference)||o.slice(-8).toUpperCase(),status:"completed"},x();return}w(),x()}function L(){let a=null;if(d.paymentLinks&&d.paymentLinks.length>0){const l=d.paymentLinks.filter(s=>s.status==="completed");l.length>0&&(a=l.sort((s,i)=>new Date(i.completed_at||i.created_at)-new Date(s.completed_at||s.created_at))[0])}if(!a&&d.transactions&&d.transactions.length>0){const l=d.transactions.filter(s=>s.status==="completed");l.length>0&&(a=l.sort((s,i)=>new Date(i.created_at)-new Date(s.created_at))[0])}if(a){let l=null;if(d.students&&(l=d.students.find(s=>s.id===a.student_id)),l){const s=a.order_id||`KAS${Date.now()}`;n.value={id:a.id,invoiceNumber:`INV-${s.slice(-8).toUpperCase()}`,orderId:s,student:{name:l.name,nickname:l.nickname||"",phone:l.phone||l.parent_phone||""},description:a.description||`Kas Kelas Bulan ${m()}`,amount:a.amount,period:a.period||m(),paymentMethod:a.payment_method||"qris",paidAt:a.completed_at||a.paid_at||new Date().toISOString(),createdAt:a.created_at||new Date().toISOString(),reference:a.reference||s.slice(-8).toUpperCase(),status:"completed"},x();return}}const e=localStorage.getItem("lastInvoice");e?n.value=JSON.parse(e):w(),x()}function w(){let a=null;if(d.students&&d.students.length>0){const l=Math.floor(Math.random()*d.students.length),s=d.students[l];a={name:s.name,nickname:s.nickname||"",phone:s.phone||s.parent_phone||""}}if(!a){const l=localStorage.getItem("students");if(l){const s=JSON.parse(l);if(s.length>0){const i=Math.floor(Math.random()*s.length),o=s[i];a={name:o.name,nickname:o.nickname||"",phone:o.phone||o.parent_phone||""}}}}if(!a){const l=localStorage.getItem("demo_students");if(l){const s=JSON.parse(l);if(s.length>0){const i=Math.floor(Math.random()*s.length),o=s[i];a={name:o.name,nickname:o.nickname||"",phone:o.phone||o.parent_phone||""}}}}a||(a={name:"Contoh Siswa",nickname:"Contoh",phone:"+62 812-3456-7890"});const e=`KAS${Date.now()}`;n.value={id:`inv_${Date.now()}`,invoiceNumber:`INV-${e.slice(-8)}`,orderId:e,student:a,description:`Kas Kelas Bulan ${m()}`,amount:5e4,period:m(),paymentMethod:"qris",paidAt:new Date().toISOString(),createdAt:new Date().toISOString(),reference:e.slice(-8),status:"completed"},x()}function g(a){return new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(a)}function N(a){return new Date(a).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"})}function _(a){return new Date(a).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"})}function $(a){return{qris:"QRIS",bca:"Transfer BCA",mandiri:"Transfer Mandiri",bni:"Transfer BNI",bri:"Transfer BRI",gopay:"GoPay",ovo:"OVO",dana:"DANA",linkaja:"LinkAja"}[a==null?void 0:a.toLowerCase()]||(a==null?void 0:a.toUpperCase())||"Transfer Bank"}function m(){return new Date().toLocaleDateString("id-ID",{month:"long",year:"numeric"})}function V(){const a=document.querySelector(".mt-8.flex");a&&(a.style.display="none"),window.print(),setTimeout(()=>{a&&(a.style.display="flex")},1e3)}async function z(){try{const a=document.querySelector(".mt-8.flex");if(a&&(a.style.display="none"),!document.getElementById("invoice-content"))throw new Error("Invoice content not found");const l=window.open("","_blank");if(!l)throw new Error("Could not open print window");const s=`
      <!DOCTYPE html>
      <html>
      <head>
        <meta charset="utf-8">
        <title>Invoice ${n.value.invoiceNumber} - ${n.value.student.name}</title>
        <style>
          * { margin: 0; padding: 0; box-sizing: border-box; }
          body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.4;
            color: #333;
            background: white;
          }
          .invoice-container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            box-shadow: none;
          }
          .header {
            background: linear-gradient(135deg, #2563eb, #1d4ed8);
            color: white;
            padding: 2rem;
          }
          .header-content {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
          }
          .logo-section { flex: 1; }
          .logo-circle {
            width: 60px;
            height: 60px;
            background: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 1rem;
          }
          .logo-text { color: #2563eb; font-weight: bold; font-size: 1.2rem; }
          .school-name { font-size: 1.8rem; font-weight: bold; margin-bottom: 0.5rem; }
          .school-subtitle { color: #bfdbfe; font-size: 0.9rem; margin-bottom: 1rem; }
          .school-address { color: #dbeafe; font-size: 0.8rem; }
          .invoice-badge {
            background: rgba(255,255,255,0.2);
            padding: 1rem;
            border-radius: 8px;
            text-align: center;
          }
          .invoice-title { font-size: 1.3rem; font-weight: bold; }
          .invoice-subtitle { font-size: 0.8rem; margin-top: 0.5rem; }

          .content { padding: 2rem; }
          .section { margin-bottom: 2rem; }
          .section-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: #1f2937;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
          }
          .icon { width: 20px; height: 20px; margin-right: 8px; }

          .info-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; }
          .info-box {
            background: #f9fafb;
            border-radius: 8px;
            padding: 1.5rem;
          }
          .info-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.75rem;
          }
          .info-row:last-child { margin-bottom: 0; }
          .info-label { color: #6b7280; font-size: 0.9rem; }
          .info-value { font-weight: 500; font-size: 0.9rem; }

          .payment-table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            overflow: hidden;
          }
          .payment-table th {
            background: #f9fafb;
            padding: 1rem;
            text-align: left;
            font-size: 0.8rem;
            font-weight: 600;
            color: #6b7280;
            text-transform: uppercase;
          }
          .payment-table td {
            padding: 1rem;
            border-top: 1px solid #e5e7eb;
          }

          .summary-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; }
          .summary-box {
            background: #f0fdf4;
            border: 1px solid #bbf7d0;
            border-radius: 8px;
            padding: 1.5rem;
          }
          .summary-total {
            font-size: 1.3rem;
            font-weight: bold;
            color: #059669;
          }

          .success-banner {
            background: linear-gradient(135deg, #d1fae5, #a7f3d0);
            border: 1px solid #bbf7d0;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1.5rem 0;
          }
          .success-title { color: #065f46; font-weight: 600; font-size: 1.1rem; margin-bottom: 0.5rem; }
          .success-text { color: #047857; }

          .notes-box {
            background: #eff6ff;
            border: 1px solid #bfdbfe;
            border-radius: 8px;
            padding: 1.5rem;
          }
          .notes-title { color: #1e40af; font-weight: 600; margin-bottom: 1rem; }
          .notes-list { list-style: none; }
          .notes-list li { color: #1e40af; margin-bottom: 0.5rem; font-size: 0.9rem; }
          .notes-bullet { color: #60a5fa; margin-right: 0.5rem; }

          .contact-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            padding-top: 1.5rem;
            border-top: 1px solid #e5e7eb;
          }
          .contact-box h5 { font-weight: 600; margin-bottom: 0.5rem; }
          .contact-box p { font-size: 0.9rem; color: #6b7280; margin-bottom: 0.25rem; }

          .footer {
            background: #f9fafb;
            padding: 1.5rem;
            border-top: 1px solid #e5e7eb;
            display: flex;
            justify-content: space-between;
            align-items: center;
          }
          .footer-text { font-size: 0.9rem; color: #6b7280; }

          @media print {
            body { margin: 0; }
            .invoice-container { margin: 0; max-width: none; }
          }
        </style>
      </head>
      <body>
        <div class="invoice-container">
          <div class="header">
            <div class="header-content">
              <div class="logo-section">
                <div class="logo-circle">
                  <span class="logo-text">SD</span>
                </div>
                <h1 class="school-name">SD Islam Al Husna</h1>
                <p class="school-subtitle">Kelas 1B - Sistem Kas Digital</p>
                <div class="school-address">
                  <p>üìç Komplek Keuangan, Jl. Guntur I</p>
                  <p>üìû (021) 7654-321 | üìß admin@sdislamalhusnakelas1b.sch.id</p>
                </div>
              </div>
              <div class="invoice-badge">
                <div class="invoice-title">INVOICE</div>
                <div class="invoice-subtitle">Bukti Pembayaran</div>
              </div>
            </div>
          </div>

          <div class="content">
            <div class="info-grid">
              <div class="section">
                <h3 class="section-title">üë§ Informasi Siswa</h3>
                <div class="info-box">
                  <div class="info-row">
                    <span class="info-label">Nama Lengkap:</span>
                    <span class="info-value">${n.value.student.name}</span>
                  </div>
                  <div class="info-row">
                    <span class="info-label">Nama Panggilan:</span>
                    <span class="info-value">${n.value.student.nickname||"-"}</span>
                  </div>
                  <div class="info-row">
                    <span class="info-label">Nomor HP:</span>
                    <span class="info-value">${n.value.student.phone||"-"}</span>
                  </div>
                  <div class="info-row">
                    <span class="info-label">Kelas:</span>
                    <span class="info-value">1B</span>
                  </div>
                </div>
              </div>

              <div class="section">
                <h3 class="section-title">üìÑ Detail Invoice</h3>
                <div class="info-box">
                  <div class="info-row">
                    <span class="info-label">No. Invoice:</span>
                    <span class="info-value">${n.value.invoiceNumber}</span>
                  </div>
                  <div class="info-row">
                    <span class="info-label">Tanggal Invoice:</span>
                    <span class="info-value">${N(n.value.createdAt)}</span>
                  </div>
                  <div class="info-row">
                    <span class="info-label">Order ID:</span>
                    <span class="info-value">${n.value.orderId}</span>
                  </div>
                  <div class="info-row">
                    <span class="info-label">Status:</span>
                    <span class="info-value" style="color: #059669; font-weight: 600;">‚úÖ LUNAS</span>
                  </div>
                </div>
              </div>
            </div>

            <div class="section">
              <h3 class="section-title">üí≥ Rincian Pembayaran</h3>
              <table class="payment-table">
                <thead>
                  <tr>
                    <th>Keterangan</th>
                    <th>Periode</th>
                    <th style="text-align: right;">Jumlah</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>
                      <div style="font-weight: 500;">${n.value.description}</div>
                      <div style="color: #6b7280; font-size: 0.9rem;">Kas Kelas 1B</div>
                    </td>
                    <td>${n.value.period||m()}</td>
                    <td style="text-align: right; font-weight: 500;">${g(n.value.amount)}</td>
                  </tr>
                </tbody>
              </table>
            </div>

            <div class="summary-grid">
              <div class="section">
                <h3 class="section-title">üí≥ Metode Pembayaran</h3>
                <div class="info-box">
                  <div class="info-row">
                    <span class="info-label">Metode:</span>
                    <span class="info-value">${$(n.value.paymentMethod)}</span>
                  </div>
                  <div class="info-row">
                    <span class="info-label">Tanggal Bayar:</span>
                    <span class="info-value">${_(n.value.paidAt)}</span>
                  </div>
                  <div class="info-row">
                    <span class="info-label">Referensi:</span>
                    <span class="info-value">${n.value.reference}</span>
                  </div>
                </div>
              </div>

              <div class="section">
                <h3 class="section-title">üí∞ Ringkasan Total</h3>
                <div class="summary-box">
                  <div class="info-row">
                    <span class="info-label">Subtotal:</span>
                    <span class="info-value">${g(n.value.amount)}</span>
                  </div>
                  <div class="info-row">
                    <span class="info-label">Biaya Admin:</span>
                    <span class="info-value">Rp 0</span>
                  </div>
                  <div style="border-top: 1px solid #bbf7d0; padding-top: 0.75rem; margin-top: 0.75rem;">
                    <div class="info-row">
                      <span style="font-size: 1.1rem; font-weight: 600;">Total Dibayar:</span>
                      <span class="summary-total">${g(n.value.amount)}</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="success-banner">
              <div class="success-title">‚úÖ Pembayaran Berhasil!</div>
              <div class="success-text">
                Terima kasih atas pembayaran kas kelas. Pembayaran Anda telah berhasil diproses dan dicatat dalam sistem.
              </div>
            </div>

            <div class="notes-box">
              <h4 class="notes-title">‚ÑπÔ∏è Catatan Penting</h4>
              <ul class="notes-list">
                <li><span class="notes-bullet">‚Ä¢</span> Simpan invoice ini sebagai bukti pembayaran yang sah</li>
                <li><span class="notes-bullet">‚Ä¢</span> Pembayaran telah dikonfirmasi dan tercatat dalam sistem kas kelas</li>
                <li><span class="notes-bullet">‚Ä¢</span> Untuk pertanyaan, hubungi bendahara kelas atau wali kelas</li>
                <li><span class="notes-bullet">‚Ä¢</span> Invoice ini dibuat otomatis oleh sistem dan tidak memerlukan tanda tangan</li>
              </ul>
            </div>

            <div class="contact-grid">
              <div class="contact-box">
                <h5>Bendahara Kelas 1B</h5>
                <p>Bu Siti Nurhayati</p>
                <p>üì± 0812-3456-7890</p>
                <p>‚úâÔ∏è bendahara.1b@sdislamalhusnakelas1b.sch.id</p>
              </div>
              <div class="contact-box">
                <h5>Wali Kelas 1B</h5>
                <p>Bu Aminah Rahmawati, S.Pd</p>
                <p>üì± 0813-9876-5432</p>
                <p>‚úâÔ∏è walikelas.1b@sdislamalhusnakelas1b.sch.id</p>
              </div>
            </div>
          </div>

          <div class="footer">
            <div class="footer-text">
              ¬© ${new Date().getFullYear()} SD Islam Al Husna - Sistem Kas Digital Kelas 1B
            </div>
            <div class="footer-text">
              Dicetak pada: ${_(new Date)}
            </div>
          </div>
        </div>
      </body>
      </html>
    `;l.document.write(s),l.document.close(),l.addEventListener("load",()=>{setTimeout(()=>{l.print(),setTimeout(()=>{l.close()},1e3)},500)}),setTimeout(()=>{a&&(a.style.display="flex")},2e3)}catch(a){console.error("Error generating PDF:",a),alert("Terjadi kesalahan saat membuat PDF. Silakan coba lagi.");const e=document.querySelector(".mt-8.flex");e&&(e.style.display="flex")}}async function J(){const a={title:`Invoice ${n.value.invoiceNumber} - ${n.value.student.name}`,text:`Invoice pembayaran kas kelas untuk ${n.value.student.name} (${n.value.student.nickname}) - Total: ${g(n.value.amount)}`,url:window.location.href};if(navigator.share&&navigator.canShare&&navigator.canShare(a))try{await navigator.share(a)}catch(e){console.log("Share canceled or failed:",e),B()}else B()}async function B(){const a=`Invoice ${n.value.invoiceNumber}
Nama: ${n.value.student.name} (${n.value.student.nickname})
Total: ${g(n.value.amount)}
Status: LUNAS ‚úÖ

Link: ${window.location.href}`;try{if(navigator.clipboard&&window.isSecureContext)await navigator.clipboard.writeText(a);else{const e=document.createElement("textarea");e.value=a,e.style.position="fixed",e.style.left="-999999px",e.style.top="-999999px",document.body.appendChild(e),e.focus(),e.select(),document.execCommand("copy"),e.remove()}alert("Detail invoice telah disalin ke clipboard!")}catch(e){console.error("Failed to copy to clipboard:",e),alert("Gagal menyalin ke clipboard. Link: "+window.location.href)}}function Z(){localStorage.setItem("lastInvoice",JSON.stringify(n.value))}return F(()=>(n.value.id&&Z(),n.value)),(a,e)=>{const l=q("router-link");return S(),k("div",ie,[t("div",oe,[t("div",le,[e[26]||(e[26]=D('<div class="bg-gradient-to-r from-blue-600 to-blue-700 text-white px-8 py-6" data-v-6f86394f><div class="flex justify-between items-start" data-v-6f86394f><div data-v-6f86394f><div class="flex items-center space-x-3 mb-4" data-v-6f86394f><div class="w-12 h-12 bg-white rounded-full flex items-center justify-center" data-v-6f86394f><span class="text-blue-600 font-bold text-lg" data-v-6f86394f>SD</span></div><div data-v-6f86394f><h1 class="text-2xl font-bold" data-v-6f86394f>SD Islam Al Husna</h1><p class="text-blue-100" data-v-6f86394f>Kelas 1B - Sistem Kas Digital</p></div></div><div class="text-sm text-blue-100 space-y-1" data-v-6f86394f><p data-v-6f86394f>üìç Komplek Keuangan, Jl. Guntur I</p><p data-v-6f86394f>üìû (021) 7654-321 | üìß admin@sdislamalhusnakelas1b.sch.id</p></div></div><div class="text-right" data-v-6f86394f><div class="bg-white bg-opacity-20 rounded-lg px-4 py-3" data-v-6f86394f><h2 class="text-xl font-bold" data-v-6f86394f>INVOICE</h2><p class="text-sm" data-v-6f86394f>Bukti Pembayaran</p></div></div></div></div>',1)),t("div",re,[t("div",de,[t("div",null,[t("h3",ce,[c(u(ne),{class:"w-5 h-5 mr-2 text-blue-600"}),e[0]||(e[0]=f(" Informasi Siswa ",-1))]),t("div",me,[t("div",pe,[e[1]||(e[1]=t("span",{class:"text-gray-600"},"Nama Lengkap:",-1)),t("span",ue,r(n.value.student.name),1)]),t("div",fe,[e[2]||(e[2]=t("span",{class:"text-gray-600"},"Nama Panggilan:",-1)),t("span",ve,r(n.value.student.nickname),1)]),t("div",ge,[e[3]||(e[3]=t("span",{class:"text-gray-600"},"Nomor HP:",-1)),t("span",be,r(n.value.student.phone),1)]),e[4]||(e[4]=t("div",{class:"flex justify-between"},[t("span",{class:"text-gray-600"},"Kelas:"),t("span",{class:"font-medium"},"1B")],-1))])]),t("div",null,[t("h3",he,[c(u(X),{class:"w-5 h-5 mr-2 text-green-600"}),e[5]||(e[5]=f(" Detail Invoice ",-1))]),t("div",xe,[t("div",ye,[e[6]||(e[6]=t("span",{class:"text-gray-600"},"No. Invoice:",-1)),t("span",we,r(n.value.invoiceNumber),1)]),t("div",_e,[e[7]||(e[7]=t("span",{class:"text-gray-600"},"Tanggal Invoice:",-1)),t("span",ke,r(N(n.value.createdAt)),1)]),t("div",Se,[e[8]||(e[8]=t("span",{class:"text-gray-600"},"Order ID:",-1)),t("span",Ie,r(n.value.orderId),1)]),t("div",De,[e[10]||(e[10]=t("span",{class:"text-gray-600"},"Status:",-1)),t("span",Ne,[c(u(C),{class:"w-3 h-3 mr-1"}),e[9]||(e[9]=f(" LUNAS ",-1))])])])])]),t("div",$e,[t("h3",Be,[c(u(K),{class:"w-5 h-5 mr-2 text-purple-600"}),e[11]||(e[11]=f(" Rincian Pembayaran ",-1))]),t("div",Ae,[t("table",Ke,[e[13]||(e[13]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Keterangan "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Periode "),t("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"}," Jumlah ")])],-1)),t("tbody",Ce,[t("tr",null,[t("td",je,[t("div",Te,r(n.value.description),1),e[12]||(e[12]=t("div",{class:"text-sm text-gray-500"},"Kas Kelas 1B",-1))]),t("td",Me,[t("div",Oe,r(n.value.period||m()),1)]),t("td",Le,[t("div",Ve,r(g(n.value.amount)),1)])])])])])]),t("div",ze,[t("div",null,[t("h3",Je,[c(u(K),{class:"w-5 h-5 mr-2 text-indigo-600"}),e[14]||(e[14]=f(" Metode Pembayaran ",-1))]),t("div",Ze,[t("div",Re,[e[15]||(e[15]=t("span",{class:"text-gray-600"},"Metode:",-1)),t("span",Ue,r($(n.value.paymentMethod)),1)]),t("div",Ee,[e[16]||(e[16]=t("span",{class:"text-gray-600"},"Tanggal Bayar:",-1)),t("span",Pe,r(_(n.value.paidAt)),1)]),t("div",Fe,[e[17]||(e[17]=t("span",{class:"text-gray-600"},"Referensi:",-1)),t("span",qe,r(n.value.reference),1)])])]),t("div",null,[t("h3",He,[c(u(se),{class:"w-5 h-5 mr-2 text-emerald-600"}),e[18]||(e[18]=f(" Ringkasan Total ",-1))]),t("div",Ge,[t("div",We,[t("div",Ye,[e[19]||(e[19]=t("span",{class:"text-gray-600"},"Subtotal:",-1)),t("span",null,r(g(n.value.amount)),1)]),e[21]||(e[21]=t("div",{class:"flex justify-between text-sm"},[t("span",{class:"text-gray-600"},"Biaya Admin:"),t("span",null,"Rp 0")],-1)),t("div",Qe,[t("div",Xe,[e[20]||(e[20]=t("span",{class:"text-lg font-semibold text-gray-900"},"Total Dibayar:",-1)),t("span",et,r(g(n.value.amount)),1)])])])])])]),t("div",tt,[t("div",at,[c(u(C),{class:"w-8 h-8 text-green-600 mr-4"}),e[22]||(e[22]=t("div",null,[t("h4",{class:"text-lg font-semibold text-green-800"},"Pembayaran Berhasil!"),t("p",{class:"text-green-700 mt-1"}," Terima kasih atas pembayaran kas kelas. Pembayaran Anda telah berhasil diproses dan dicatat dalam sistem. ")],-1))])]),t("div",st,[t("h4",nt,[c(u(ee),{class:"w-5 h-5 mr-2"}),e[23]||(e[23]=f(" Catatan Penting ",-1))]),e[24]||(e[24]=D('<ul class="text-blue-700 space-y-2 text-sm" data-v-6f86394f><li class="flex items-start" data-v-6f86394f><span class="w-2 h-2 bg-blue-400 rounded-full mt-2 mr-3 flex-shrink-0" data-v-6f86394f></span> Simpan invoice ini sebagai bukti pembayaran yang sah </li><li class="flex items-start" data-v-6f86394f><span class="w-2 h-2 bg-blue-400 rounded-full mt-2 mr-3 flex-shrink-0" data-v-6f86394f></span> Pembayaran telah dikonfirmasi dan tercatat dalam sistem kas kelas </li><li class="flex items-start" data-v-6f86394f><span class="w-2 h-2 bg-blue-400 rounded-full mt-2 mr-3 flex-shrink-0" data-v-6f86394f></span> Untuk pertanyaan, hubungi bendahara kelas atau wali kelas </li><li class="flex items-start" data-v-6f86394f><span class="w-2 h-2 bg-blue-400 rounded-full mt-2 mr-3 flex-shrink-0" data-v-6f86394f></span> Invoice ini dibuat otomatis oleh sistem dan tidak memerlukan tanda tangan </li></ul>',1))]),e[25]||(e[25]=D('<div class="border-t border-gray-200 pt-6" data-v-6f86394f><div class="grid grid-cols-1 md:grid-cols-2 gap-6" data-v-6f86394f><div data-v-6f86394f><h5 class="font-semibold text-gray-900 mb-2" data-v-6f86394f>Bendahara Kelas 1B</h5><p class="text-sm text-gray-600" data-v-6f86394f>Bu Siti Nurhayati</p><p class="text-sm text-gray-600" data-v-6f86394f>üì± 0812-3456-7890</p><p class="text-sm text-gray-600" data-v-6f86394f>‚úâÔ∏è bendahara.1b@sdislamalhusnakelas1b.sch.id</p></div><div data-v-6f86394f><h5 class="font-semibold text-gray-900 mb-2" data-v-6f86394f>Wali Kelas 1B</h5><p class="text-sm text-gray-600" data-v-6f86394f>Bu Aminah Rahmawati, S.Pd</p><p class="text-sm text-gray-600" data-v-6f86394f>üì± 0813-9876-5432</p><p class="text-sm text-gray-600" data-v-6f86394f>‚úâÔ∏è walikelas.1b@sdislamalhusnakelas1b.sch.id</p></div></div></div>',1))]),t("div",it,[t("div",ot,[t("div",null,[t("p",null,"¬© "+r(new Date().getFullYear())+" SD Islam Al Husna - Sistem Kas Digital Kelas 1B",1)]),t("div",lt,[t("p",null,"Dicetak pada: "+r(_(new Date)),1)])])])]),t("div",rt,[t("button",{onClick:V,class:"btn-primary inline-flex items-center justify-center"},[c(u(te),{class:"w-5 h-5 mr-2"}),e[27]||(e[27]=f(" Cetak Invoice ",-1))]),t("button",{onClick:z,class:"btn-secondary inline-flex items-center justify-center"},[c(u(Y),{class:"w-5 h-5 mr-2"}),e[28]||(e[28]=f(" Download PDF ",-1))]),t("button",{onClick:J,class:"btn-outline inline-flex items-center justify-center"},[c(u(Q),{class:"w-5 h-5 mr-2"}),e[29]||(e[29]=f(" Bagikan ",-1))]),c(l,{to:"/payments",class:"btn-outline inline-flex items-center justify-center"},{default:H(()=>[c(u(ae),{class:"w-5 h-5 mr-2"}),e[30]||(e[30]=f(" Kembali ",-1))]),_:1,__:[30]})])])])}}},ht=W(dt,[["__scopeId","data-v-6f86394f"]]);export{ht as default};

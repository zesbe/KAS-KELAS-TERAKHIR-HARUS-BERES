import{c,E as m,l as t,K as It,r as D,Q as kt,J as Q,o as Rt,k as A,H as b,p as I,z as p,F as M,y as L,b as U,q as o,R as P,W as R,e as Pt,x as Bt,S as J,X as At,A as jt,j as Kt,V as Dt}from"./vendor-Cn5j0SEu.js";import{b as Et,u as Nt,g as Wt,e as Ot,p as Gt}from"./index-DyprfSbd.js";import{r as Tt}from"./PlusIcon-Hols0ICP.js";import{r as Ut}from"./DocumentArrowDownIcon-CfkQcPq0.js";import{r as Mt}from"./EyeIcon-B8jtdIG5.js";import{r as ot}from"./DocumentTextIcon-BLO7htXp.js";import{r as St,a as it}from"./TrashIcon-8_Rw6v_G.js";import{r as Ft}from"./ClockIcon-A7fuk63B.js";import{r as Ct}from"./CheckCircleIcon-9dtlsCvY.js";import{f as Vt,l as Jt}from"./index-BoRhMNJp.js";import"./excel-C9Ruqv6W.js";function Lt(K,v){return m(),c("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"})])}function F(K,v){return m(),c("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 12.76c0 1.6 1.123 2.994 2.707 3.227 1.087.16 2.185.283 3.293.369V21l4.076-4.076a1.526 1.526 0 0 1 1.037-.443 48.282 48.282 0 0 0 5.68-.494c1.584-.233 2.707-1.626 2.707-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0 0 12 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018Z"})])}function vt(K,v){return m(),c("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"})])}function ft(K,v){return m(),c("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13.19 8.688a4.5 4.5 0 0 1 1.242 7.244l-4.5 4.5a4.5 4.5 0 0 1-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5 0 0 0-6.364-6.364l-4.5 4.5a4.5 4.5 0 0 0 1.242 7.244"})])}const rt=()=>{const K=new Date,d=new Date(K.toLocaleString("en-US",{timeZone:"Asia/Jakarta"})).getHours();return d>=5&&d<11?"Selamat pagi":d>=11&&d<15?"Selamat siang":d>=15&&d<18?"Selamat sore":"Selamat malam"},dt=()=>new Date().toLocaleString("id-ID",{timeZone:"Asia/Jakarta",hour:"2-digit",minute:"2-digit"}),Yt={class:"space-y-6"},Ht={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0"},qt={class:"card p-6"},Qt={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},zt=["onClick"],Zt={class:"text-center"},Xt={key:0,class:"absolute -top-2 -right-2 bg-red-500 text-white text-xs px-2 py-1 rounded-full font-semibold"},te={class:"text-2xl"},ee={class:"text-xl font-bold text-gray-900 mb-2"},se={class:"text-sm text-gray-600 mb-3"},ae={class:"text-lg font-bold text-primary-600 mb-2"},ne={class:"text-xs text-gray-500 mb-3"},le={class:"text-xs text-gray-600 space-y-1"},oe={key:1,class:"mt-3"},ie={class:"bg-green-100 text-green-800 text-xs font-medium px-2 py-1 rounded-full"},re={class:"mt-6 pt-6 border-t border-gray-200"},de={class:"text-center"},ue={class:"card p-6"},ce={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},me={class:"border rounded-lg p-4 bg-green-50"},pe={class:"text-sm space-y-1"},ge={class:"flex justify-between"},be={class:"font-semibold"},xe={class:"flex justify-between"},ye={class:"font-semibold"},he={class:"flex justify-between"},ke={class:"font-semibold"},ve={class:"card p-6"},fe={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4 space-y-2 sm:space-y-0"},_e={class:"flex space-x-2"},we={class:"hidden sm:block overflow-x-auto"},$e={class:"min-w-full divide-y divide-gray-200"},Pe={class:"bg-white divide-y divide-gray-200"},Ae={class:"px-6 py-4 whitespace-nowrap"},Se={class:"flex items-center"},Ce={class:"w-10 h-10 bg-primary-100 rounded-full flex items-center justify-center mr-3"},Te={class:"text-primary-600 font-semibold text-sm"},De={class:"text-sm font-medium text-gray-900"},Me={class:"text-sm text-gray-500"},Le={class:"px-6 py-4 whitespace-nowrap"},Ie={class:"text-sm text-gray-900"},Be={class:"text-sm text-gray-500"},Ee={key:0,class:"text-xs text-blue-600 mt-1"},Ne={class:"px-6 py-4 whitespace-nowrap"},Ue={class:"text-sm font-medium text-gray-900"},Re={class:"text-sm text-gray-500"},je={class:"px-6 py-4 whitespace-nowrap"},Ke={class:"w-full bg-gray-200 rounded-full h-2 mb-1"},We={class:"text-xs text-gray-500"},Oe={class:"px-6 py-4 whitespace-nowrap"},Ge={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},Fe={class:"flex items-center space-x-2"},Ve=["onClick"],Je=["onClick"],Ye=["onClick"],He=["onClick"],qe=["onClick"],Qe=["onClick"],ze={class:"block sm:hidden space-y-4"},Ze={class:"flex items-center justify-between mb-3"},Xe={class:"flex items-center"},ts={class:"w-10 h-10 bg-primary-100 rounded-full flex items-center justify-center mr-3"},es={class:"text-primary-600 font-semibold text-sm"},ss={class:"font-medium text-sm"},as={class:"text-gray-500 text-xs"},ns={class:"space-y-2 text-sm"},ls={class:"w-full bg-gray-200 rounded-full h-2"},os={class:"flex justify-between"},is={class:"flex justify-between"},rs={class:"font-medium"},ds={class:"grid grid-cols-2 gap-2 mt-3 pt-3 border-t border-gray-200"},us=["onClick"],cs=["onClick"],ms=["onClick"],ps=["onClick"],gs={class:"flex justify-center mt-2"},bs=["onClick"],xs={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"},ys={class:"bg-white rounded-lg max-w-lg w-full mx-4 p-6 max-h-[90vh] overflow-y-auto"},hs={class:"text-lg font-semibold text-gray-900 mb-4"},ks=["value"],vs={class:"grid grid-cols-2 gap-4"},fs=["value"],_s=["value"],ws=["value"],$s={class:"border rounded-lg p-4 bg-blue-50"},Ps={class:"space-y-3"},As={class:"flex items-start space-x-3"},Ss={class:"text-sm text-gray-600"},Cs={class:"flex items-start space-x-3"},Ts={class:"text-sm text-gray-600"},Ds={class:"flex items-start space-x-3"},Ms={class:"bg-gray-50 p-4 rounded-lg"},Ls={class:"space-y-1 text-sm"},Is={class:"flex justify-between"},Bs={class:"flex justify-between"},Es={class:"flex justify-between font-bold border-t pt-1"},Ns={class:"mt-3 pt-3 border-t border-gray-300"},Us={class:"space-y-1 text-xs"},Rs={key:0,class:"text-green-600"},js={key:1,class:"text-blue-600"},Ks={key:2,class:"text-purple-600 font-medium"},Ws={class:"flex justify-end space-x-3 pt-4"},Os=["disabled"],Gs={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"},Fs={class:"bg-white rounded-lg max-w-2xl w-full mx-4 p-6 max-h-[90vh] overflow-y-auto"},Vs={class:"space-y-6"},Js={class:"flex items-center space-x-4"},Ys={class:"w-16 h-16 bg-primary-100 rounded-full flex items-center justify-center"},Hs={class:"text-primary-600 font-semibold text-xl"},qs={class:"text-lg font-medium text-gray-900"},Qs={class:"text-sm text-gray-500"},zs={class:"flex justify-between mb-2"},Zs={class:"text-sm text-gray-500"},Xs={class:"w-full bg-gray-200 rounded-full h-3"},ta={class:"flex justify-between mt-2 text-sm text-gray-600"},ea={class:"flex items-center justify-between mb-3"},sa={class:"grid grid-cols-1 md:grid-cols-2 gap-3"},aa={class:"flex items-center justify-between"},na={class:"text-sm font-medium"},la={class:"flex items-center space-x-2"},oa={key:0,class:"text-green-600 text-xs"},ia={key:1,class:"text-gray-500 text-xs"},ra=["onClick"],da={class:"text-xs text-gray-600 mt-1"},ua={key:0,class:"text-xs text-green-600 mt-1"},ca={key:0,class:"space-y-3"},ma={class:"flex items-center justify-between mb-2"},pa={class:"flex items-center space-x-2"},ga={class:"font-medium text-sm"},ba={class:"flex space-x-1"},xa=["onClick"],ya=["onClick"],ha=["onClick"],ka={class:"text-xs text-gray-600 mb-2"},va={class:"text-xs font-mono text-gray-500 bg-white px-2 py-1 rounded border"},fa={class:"mt-2 flex items-center space-x-2"},_a=["value"],wa={key:1,class:"border rounded-lg p-3 bg-gray-50"},$a={class:"flex items-center space-x-2"},Pa=["value"],Aa={class:"flex flex-col space-y-3 pt-6 border-t"},Sa={class:"flex space-x-3"},Ca={key:0,class:"flex space-x-3"},Ta={class:"flex space-x-3"},Da={__name:"MultiMonthPayment",setup(K){const v=Et(),d=Nt(),z=It(),B=D(!1),W=D(!1),y=D(null),E=D(!1),N=D(""),u=kt({studentId:"",startMonth:new Date().getMonth()+1,year:new Date().getFullYear(),months:6,monthlyAmount:5e4,linkType:"both"}),S=D([]),f=Q(()=>v.students),C=[{value:1,label:"Januari"},{value:2,label:"Februari"},{value:3,label:"Maret"},{value:4,label:"April"},{value:5,label:"Mei"},{value:6,label:"Juni"},{value:7,label:"Juli"},{value:8,label:"Agustus"},{value:9,label:"September"},{value:10,label:"Oktober"},{value:11,label:"November"},{value:12,label:"Desember"}],_=[2024,2025,2026],Y=[{months:3,label:"Paket Triwulan",amount:15e4,icon:"ðŸ“…",bgColor:"bg-blue-100",popular:!1,benefits:["Bayar 3 bulan","Lebih terjangkau","Fleksibel"],discount:null},{months:6,label:"Paket Semester",amount:3e5,icon:"ðŸŽ¯",bgColor:"bg-green-100",popular:!0,benefits:["Bayar 6 bulan","Paling populer","Hemat waktu"],discount:"REKOMENDASI"},{months:9,label:"Paket 3 Cawu",amount:45e4,icon:"â­",bgColor:"bg-purple-100",popular:!1,benefits:["Bayar 9 bulan","Hampir setahun","Praktis"],discount:null}],H=Q(()=>N.value?S.value.filter(l=>l.status===N.value):S.value),h=l=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(l),Z=l=>({pending:"Belum Bayar",partial:"Sebagian",completed:"Lunas"})[l]||l,X=l=>{const e={pending:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800",partial:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800",completed:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800"};return e[l]||e.pending},tt=()=>{if(!u.startMonth||!u.months)return"";const l=u.startMonth-1,e=(l+u.months-1)%12;return`${C[l].label} - ${C[e].label} ${u.year}`},O=()=>u.monthlyAmount*u.months,T=l=>{u.months=l.months,u.monthlyAmount=5e4,B.value=!0},et=l=>["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"][(l-1)%12],q=()=>{B.value=!1,y.value=null,Object.assign(u,{studentId:"",startMonth:new Date().getMonth()+1,year:new Date().getFullYear(),months:6,monthlyAmount:5e4,linkType:"both"})},ut=async()=>{var l;E.value=!0;try{await new Promise(r=>setTimeout(r,1e3));const e=f.value.find(r=>r.id===u.studentId),s=O();if(y.value){const r=y.value,x=S.value.findIndex(n=>n.id===r.id);if(x!==-1){const n={...r,student:e,period_label:tt(),months:u.months,monthly_amount:u.monthlyAmount,total_amount:s,progress_percentage:Math.round(r.paid_amount/s*100),payment_url:`https://pakasir.zone.id/pay/uang-kas-kelas-1-ibnu-sina/${s}?order_id=${e.nickname.toUpperCase()}${r.id}`};S.value[x]=n,d.success(`âœ… Pembayaran ${e.name} berhasil diupdate!`)}}else{const r=`${e.nickname.toUpperCase()}${Date.now()}`,x=[];if(u.linkType==="individual"||u.linkType==="both")for(let i=1;i<=u.months;i++){const k=`${r}M${i.toString().padStart(2,"0")}`;x.push({id:`individual_${i}`,type:"individual",month:i,amount:u.monthlyAmount,order_id:k,url:`https://pakasir.zone.id/pay/uang-kas-kelas-1-ibnu-sina/${u.monthlyAmount}?order_id=${k}`,description:`Kas Bulan ke-${i} (${et(u.startMonth+i-1)})`})}if(u.linkType==="single"||u.linkType==="both"){const i=`${r}TOTAL`;x.push({id:"total",type:"total",amount:s,order_id:i,url:`https://pakasir.zone.id/pay/uang-kas-kelas-1-ibnu-sina/${s}?order_id=${i}`,description:`Kas ${u.months} Bulan Sekaligus`})}const n={id:Date.now().toString(),student:e,period_label:tt(),months:u.months,monthly_amount:u.monthlyAmount,total_amount:s,paid_amount:0,progress_percentage:0,status:"pending",payment_url:((l=x[0])==null?void 0:l.url)||"",payment_links:x,link_type:u.linkType,month_details:[]};S.value.unshift(n);const a=x.length,g=u.linkType==="both"?"individual + total":u.linkType;d.success(`âœ… Multi-Month Payment berhasil dibuat!
${a} link ${g} telah digenerate`)}q()}catch(e){console.error("Error saving payment:",e),d.error("Gagal menyimpan pembayaran multi-bulan")}finally{E.value=!1}},ct=l=>{y.value=l,W.value=!0},st=async l=>{var e;try{const s=l.student,r=l.total_amount-l.paid_amount,x=l.progress_percentage,n=rt();let a=`ðŸ”” *REMINDER PEMBAYARAN MULTI-BULAN* ðŸ””

Assalamu'alaikum Wr. Wb.

${n} Bapak/Ibu orang tua dari *${s.name}* (${s.nickname}) ðŸ‘‹

Kami ingin mengingatkan mengenai status pembayaran kas kelas multi-bulan:

ðŸ“Š *STATUS PEMBAYARAN SAAT INI:*
ðŸ·ï¸ Periode: *${l.period_label}*
ðŸ’° Total Pembayaran: *${h(l.total_amount)}*
âœ… Sudah Dibayar: *${h(l.paid_amount)}*
â³ Sisa Pembayaran: *${h(r)}*
ðŸ“ˆ Progress: *${x}%*

`;l.status==="pending"?a+=`âš ï¸ *STATUS: BELUM ADA PEMBAYARAN*

Mohon segera lakukan pembayaran untuk periode *${l.period_label}*.

ðŸŽ¯ *PILIHAN PEMBAYARAN:*
${l.payment_links&&l.payment_links.length>1?`âœ… Bayar Sekaligus (lebih praktis)
âœ… Bayar Bertahap (lebih fleksibel)`:"âœ… Gunakan link pembayaran di bawah"}

`:l.status==="partial"&&(a+=`â³ *STATUS: PEMBAYARAN SEBAGIAN*

Terima kasih sudah melakukan pembayaran sebagian! ðŸ™
Mohon lanjutkan pembayaran untuk bulan-bulan berikutnya.

ðŸ’¡ *SISA PEMBAYARAN:*
Tinggal *${h(r)}* lagi untuk melengkapi pembayaran periode ini.

`),l.payment_links&&l.payment_links.length>0?(a+=`ðŸ”— *LINK PEMBAYARAN TERSEDIA:*

`,l.payment_links.forEach((i,k)=>{const w=i.type==="total"?"ðŸ’°":"ðŸ“…";a+=`${w} *${i.description}*
ðŸ’µ ${h(i.amount)}
ðŸ”— ${i.url}

`})):a+=`ðŸ”— *LINK PEMBAYARAN:*
${l.payment_url}

`,a+=`ðŸ’³ *METODE PEMBAYARAN:*
âœ… Scan QR Code QRIS
âœ… GoPay, OVO, DANA, ShopeePay
âœ… Transfer Bank (via QRIS)
âœ… Kartu Kredit/Debit

ðŸ“ž *BANTUAN & SUPPORT:*
Jika ada pertanyaan atau kesulitan dalam pembayaran, silakan hubungi bendahara kelas.

Terima kasih atas perhatian dan kerjasamanya! ðŸ™

Wassalamu'alaikum Wr. Wb.

---
*ðŸ“± Dikirim: ${n} (${dt()})*
*ðŸ¤– Sistem Kas Kelas Otomatis*
*ðŸ”” Pesan Reminder Otomatis*`;const g=`https://wa.me/${(e=s.phone)==null?void 0:e.replace(/\D/g,"").replace(/^0/,"62")}?text=${encodeURIComponent(a)}`;window.open(g,"_blank","noopener,noreferrer"),d.success(`ðŸ“¤ Reminder Premium dikirim ke ${s.name}!
ðŸ“Š Progress: ${x}%`,{timeout:5e3})}catch(s){console.error("Error sending reminder:",s),d.error("Gagal mengirim reminder")}},at=async l=>{try{await navigator.clipboard.writeText(l.payment_url),d.success("Link berhasil disalin")}catch{d.error("Gagal menyalin link")}},nt=async l=>{try{await navigator.clipboard.writeText(l),d.success("Berhasil disalin")}catch{d.error("Gagal menyalin")}},mt=async l=>{await st(l),W.value=!1},pt=async(l,e)=>{try{const s=(e==null?void 0:e.name)||"Siswa",r=(e==null?void 0:e.phone)||"",x=rt();let n=`ðŸŽ¯ *LINK PEMBAYARAN KAS KELAS* ðŸŽ¯

Assalamu'alaikum Wr. Wb.

${x} Bapak/Ibu orang tua dari *${s}* ðŸ‘‹

Dengan hormat, kami mengirimkan link pembayaran kas kelas untuk kemudahan Bapak/Ibu.

`;l.type==="total"?n+=`ðŸ’° *PEMBAYARAN SEKALIGUS*
ðŸ·ï¸ ${l.description.toUpperCase()}
ðŸ’µ Jumlah: *${h(l.amount)}*

âœ¨ *KEUNTUNGAN BAYAR SEKALIGUS:*
âœ… Lebih praktis dan efisien
âœ… Tidak perlu ingat jadwal bulanan
âœ… Sekali bayar, langsung lunas untuk beberapa bulan
âœ… Hemat waktu dan tenaga`:n+=`ðŸ“… *PEMBAYARAN BERTAHAP*
ðŸ·ï¸ ${l.description.toUpperCase()}
ðŸ’µ Jumlah: *${h(l.amount)}*

âœ¨ *KEUNTUNGAN BAYAR BERTAHAP:*
âœ… Lebih fleksibel sesuai budget
âœ… Bayar per bulan sesuai kemampuan
âœ… Bisa mulai kapan saja
âœ… Tidak memberatkan keuangan`,n+=`

ðŸ”— *LINK PEMBAYARAN:*
${l.url}

ðŸ’³ *METODE PEMBAYARAN TERSEDIA:*
âœ… Scan QR Code QRIS
âœ… GoPay, OVO, DANA, ShopeePay
âœ… Transfer Bank (via QRIS)
âœ… Kartu Kredit/Debit

ðŸ“± *CARA PEMBAYARAN:*
1. Klik link di atas
2. Pilih metode pembayaran
3. Scan QR Code atau ikuti instruksi
4. Selesai! Pembayaran otomatis tercatat

ðŸ“ž *BANTUAN:*
Jika ada kesulitan, silakan hubungi bendahara kelas.

Terima kasih atas kepercayaan dan kerjasamanya! ðŸ™

Wassalamu'alaikum Wr. Wb.

---
*ðŸ“ Order ID: \`${l.order_id}\`*
*ðŸ“± Dikirim: ${x} (${dt()})*
*ðŸ¤– Sistem Kas Kelas Otomatis*`;const g=`https://wa.me/${r.replace(/\D/g,"").replace(/^0/,"62")}?text=${encodeURIComponent(n)}`;window.open(g,"_blank","noopener,noreferrer"),d.success(`ðŸ“± Template Premium dikirim ke ${s}!
ðŸŽ¯ ${l.description}`,{timeout:4e3})}catch(s){console.error("Error opening WhatsApp:",s),d.error("Gagal membuka WhatsApp")}},gt=l=>new Date(l).toLocaleDateString("id-ID",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}),bt=async(l,e)=>{var s;if(confirm(`Tandai ${e.label} untuk ${(s=l.student)==null?void 0:s.name} sebagai LUNAS?

Jumlah: ${h(e.amount)}`))try{e.paid=!0,e.paid_at=new Date().toISOString();const r=l.month_details.filter(g=>g.paid).length,x=l.month_details.length,n=r*l.monthly_amount,a=Math.round(r/x*100);l.paid_amount=n,l.progress_percentage=a,a===100?l.status="completed":a>0&&(l.status="partial"),localStorage.setItem("multiMonthPayments",JSON.stringify(S.value)),d.success(`âœ… ${e.label} berhasil ditandai LUNAS!
Progress: ${a}%`,{timeout:4e3})}catch(r){console.error("Error marking month as paid:",r),d.error("Gagal menandai bulan sebagai lunas")}},xt=async l=>{var r,x;const e=l.month_details.filter(n=>!n.paid),s=e.length*l.monthly_amount;if(confirm(`Tandai SEMUA bulan yang belum lunas untuk ${(r=l.student)==null?void 0:r.name}?

${e.length} bulan Ã— ${h(l.monthly_amount)} = ${h(s)}`))try{const n=new Date().toISOString();e.forEach(a=>{a.paid=!0,a.paid_at=n}),l.paid_amount=l.total_amount,l.progress_percentage=100,l.status="completed",localStorage.setItem("multiMonthPayments",JSON.stringify(S.value)),d.success(`ðŸŽ‰ SEMUA bulan berhasil ditandai LUNAS!
${(x=l.student)==null?void 0:x.name} - ${h(s)}`,{timeout:5e3})}catch(n){console.error("Error marking all months as paid:",n),d.error("Gagal menandai semua bulan sebagai lunas")}},yt=async()=>{try{const l=_t(),e=window.open("","_blank");e&&(e.document.write(`
        <!DOCTYPE html>
        <html>
        <head>
          <title>Laporan Multi-Month Payment - ${new Date().toLocaleDateString("id-ID")}</title>
          <style>
            body { font-family: Arial, sans-serif; margin: 20px; }
            h1 { color: #1f2937; border-bottom: 2px solid #3b82f6; padding-bottom: 10px; }
            h2 { color: #374151; margin-top: 20px; }
            table { width: 100%; border-collapse: collapse; margin: 20px 0; }
            th, td { border: 1px solid #d1d5db; padding: 8px; text-align: left; }
            th { background-color: #f3f4f6; font-weight: bold; }
            .status-pending { color: #d97706; }
            .status-partial { color: #2563eb; }
            .status-completed { color: #059669; }
            .summary { background-color: #f9fafb; padding: 15px; border-radius: 8px; margin: 20px 0; }
            .footer { margin-top: 30px; text-align: center; color: #6b7280; font-size: 12px; }
            .progress-bar { width: 100%; height: 20px; background-color: #e5e7eb; border-radius: 10px; }
            .progress-fill { height: 100%; background-color: #3b82f6; border-radius: 10px; }
          </style>
        </head>
        <body>
          ${l}
          <div class="footer">
            Generated on ${new Date().toLocaleString("id-ID")} | Sistem Kas Kelas Multi-Month
          </div>
        </body>
        </html>
      `),e.document.close(),setTimeout(()=>{e.print()},500)),d.success("PDF Report Multi-Month siap untuk di-print/save")}catch(l){console.error("Error generating Multi-Month PDF:",l),d.error("Gagal membuat PDF report")}},_t=()=>{const l=H.value,e=l.length,s=l.filter(i=>i.status==="completed").length,r=l.filter(i=>i.status==="partial").length,x=l.filter(i=>i.status==="pending").length,n=l.reduce((i,k)=>i+k.total_amount,0),a=l.reduce((i,k)=>i+k.paid_amount,0);let g="";return l.forEach(i=>{var w;const k=`status-${i.status}`;g+=`
      <tr>
        <td>${((w=i.student)==null?void 0:w.name)||"-"}</td>
        <td>${i.period_label}</td>
        <td>${i.months} bulan</td>
        <td>${h(i.total_amount)}</td>
        <td>${h(i.paid_amount)}</td>
        <td>
          <div class="progress-bar">
            <div class="progress-fill" style="width: ${i.progress_percentage}%"></div>
          </div>
          ${i.progress_percentage}%
        </td>
        <td class="${k}">${Z(i.status)}</td>
      </tr>
    `}),`
    <h1>ðŸ“Š Laporan Pembayaran Multi-Bulan</h1>

    <div class="summary">
      <h2>ðŸ“ˆ Ringkasan</h2>
      <p><strong>Total Siswa:</strong> ${e}</p>
      <p><strong>Lunas:</strong> ${s} | <strong>Sebagian:</strong> ${r} | <strong>Pending:</strong> ${x}</p>
      <p><strong>Total Amount:</strong> ${h(n)}</p>
      <p><strong>Total Terbayar:</strong> ${h(a)}</p>
      <p><strong>Progress Keseluruhan:</strong> ${Math.round(a/n*100)||0}%</p>
      <p><strong>Filter Status:</strong> ${N.value||"Semua Status"}</p>
    </div>

    <h2>ðŸ“‹ Detail Pembayaran Multi-Bulan</h2>
    <table>
      <thead>
        <tr>
          <th>Nama Siswa</th>
          <th>Periode</th>
          <th>Durasi</th>
          <th>Total Amount</th>
          <th>Terbayar</th>
          <th>Progress</th>
          <th>Status</th>
        </tr>
      </thead>
      <tbody>
        ${g||'<tr><td colspan="7" style="text-align: center; color: #6b7280;">Tidak ada data pembayaran multi-bulan</td></tr>'}
      </tbody>
    </table>
  `},wt=async l=>{if(!l.payment_links||l.payment_links.length===0){d.warning("Tidak ada link pembayaran untuk dikirim");return}try{const e=l.student,s=(e==null?void 0:e.name)||"Siswa",r=(e==null?void 0:e.phone)||"",x=rt();let n=`ðŸŒŸ *PEMBAYARAN KAS KELAS MULTI-BULAN* ðŸŒŸ

Assalamu'alaikum Wr. Wb.

${x} Bapak/Ibu orang tua dari *${s}* ðŸ‘‹

Kami menyediakan *BEBERAPA OPSI PEMBAYARAN* yang dapat dipilih sesuai kemudahan Bapak/Ibu:

ðŸ“‹ *PILIHAN PEMBAYARAN TERSEDIA:*

`;l.payment_links.forEach((i,k)=>{const w=i.type==="total"?"ðŸ’°":"ðŸ“…",$=i.type==="total"?"SEKALIGUS":"BERTAHAP";n+=`${k+1}. ${w} *${i.description.toUpperCase()}*
   ðŸ’µ Jumlah: *${h(i.amount)}*
   ðŸ·ï¸ Tipe: ${$}
   ðŸ”— Link: ${i.url}
   ðŸ“ Order ID: \`${i.order_id}\`

`}),n+=`ðŸŽ¯ *KEUNTUNGAN SETIAP OPSI:*

${l.payment_links.find(i=>i.type==="total")?`ðŸ’° *Bayar Sekaligus:*
   âœ… Lebih praktis dan cepat
   âœ… Tidak perlu ingat jadwal bulanan
   âœ… Sekali bayar, langsung lunas

`:""}${l.payment_links.find(i=>i.type==="individual")?`ðŸ“… *Bayar Bertahap:*
   âœ… Lebih fleksibel sesuai budget
   âœ… Bayar per bulan sesuai kebutuhan
   âœ… Bisa mulai kapan saja

`:""}ðŸ’³ *METODE PEMBAYARAN TERSEDIA:*

âœ… Scan QR Code QRIS
âœ… GoPay, OVO, DANA, ShopeePay
âœ… Transfer Bank (via QRIS)
âœ… Kartu Kredit/Debit

ðŸ“ž *BANTUAN & SUPPORT:*
Jika ada pertanyaan atau kesulitan dalam pembayaran, silakan hubungi bendahara kelas.

Terima kasih atas kepercayaan dan kerjasamanya! ðŸ™

Wassalamu'alaikum Wr. Wb.

---
*ðŸ“± Dikirim: ${x} (${dt()})*
*ðŸ¤– Sistem Kas Kelas Otomatis*
*âš¡ Powered by Multi-Month Payment*`;const g=`https://wa.me/${r.replace(/\D/g,"").replace(/^0/,"62")}?text=${encodeURIComponent(n)}`;window.open(g,"_blank","noopener,noreferrer"),d.success(`ðŸ“± Template Premium dikirim ke ${s}!
ðŸŽ¯ ${l.payment_links.length} opsi pembayaran tersedia`,{timeout:5e3})}catch(e){console.error("Error opening WhatsApp:",e),d.error("Gagal membuka WhatsApp")}},V=l=>{const e=l.student;u.studentId=e.id,u.months=l.months,u.monthlyAmount=l.monthly_amount;const s=new Date;u.startMonth=s.getMonth()+1,u.year=s.getFullYear(),y.value=l,B.value=!0,d.info(`Editing pembayaran untuk ${e.name}`)},lt=l=>{if(confirm(`Yakin ingin menghapus pembayaran multi-bulan untuk ${l.student.name}?

Periode: ${l.period_label}
Total: ${h(l.total_amount)}`))try{const e=S.value.findIndex(s=>s.id===l.id);e!==-1?(S.value.splice(e,1),d.success(`âœ… Pembayaran ${l.student.name} berhasil dihapus`)):d.warning("Pembayaran tidak ditemukan")}catch(e){console.error("Error deleting payment:",e),d.error("Gagal menghapus pembayaran")}},ht=l=>{l.order_id?z.push({path:"/invoice",query:{orderId:l.order_id}}):d.warning("Order ID tidak tersedia untuk link ini")},$t=l=>{var e;if(l.payment_links&&l.payment_links.length>0){const s=l.payment_links[0];ht(s)}else(e=l.student)!=null&&e.id?z.push({path:"/invoice",query:{studentId:l.student.id}}):d.warning("Data tidak lengkap untuk membuat invoice")};return Rt(()=>{}),(l,e)=>{var s,r,x,n;return m(),c("div",Yt,[t("div",Ht,[e[19]||(e[19]=t("div",null,[t("h3",{class:"text-lg font-semibold text-gray-900"},"Pembayaran Multi-Bulan"),t("p",{class:"text-sm text-gray-500 mt-1"},"Buat link pembayaran untuk beberapa bulan sekaligus")],-1)),t("button",{onClick:e[0]||(e[0]=a=>B.value=!0),class:"btn-primary w-full sm:w-auto"},[b(p(Tt),{class:"w-4 h-4 mr-2"}),e[18]||(e[18]=I(" Buat Multi-Month ",-1))])]),t("div",qt,[e[23]||(e[23]=t("h4",{class:"text-lg font-medium text-gray-900 mb-4"},"ðŸŽ¯ Template Pembayaran Populer",-1)),t("div",Qt,[(m(),c(M,null,L(Y,a=>t("button",{key:a.months,onClick:g=>T(a),class:"relative p-6 border-2 border-dashed border-gray-300 rounded-xl hover:border-primary-500 hover:bg-primary-50 transition-all duration-300 hover:shadow-lg group"},[t("div",Zt,[a.popular?(m(),c("div",Xt," POPULER ")):A("",!0),t("div",{class:U(["w-16 h-16 mx-auto mb-3 rounded-full flex items-center justify-center",a.bgColor])},[t("span",te,o(a.icon),1)],2),t("div",ee,o(a.label),1),t("div",se,o(a.months)+" Bulan Berturut-turut",1),t("div",ae,o(h(a.amount)),1),t("div",ne,o(a.months)+" Ã— "+o(h(5e4)),1),t("div",le,[(m(!0),c(M,null,L(a.benefits,g=>(m(),c("div",{key:g,class:"flex items-center justify-center"},[e[20]||(e[20]=t("span",{class:"text-green-500 mr-1"},"âœ“",-1)),I(" "+o(g),1)]))),128))]),a.discount?(m(),c("div",oe,[t("span",ie,o(a.discount),1)])):A("",!0)])],8,zt)),64))]),t("div",re,[t("div",de,[t("button",{onClick:e[1]||(e[1]=a=>B.value=!0),class:"inline-flex items-center px-6 py-3 border border-primary-300 rounded-lg text-primary-700 bg-primary-50 hover:bg-primary-100 transition-colors"},[b(p(Tt),{class:"w-5 h-5 mr-2"}),e[21]||(e[21]=I(" Buat Template Kustom ",-1))]),e[22]||(e[22]=t("p",{class:"text-sm text-gray-500 mt-2"},"Atau buat pembayaran dengan periode dan jumlah sesuai kebutuhan",-1))])])]),t("div",ue,[e[29]||(e[29]=t("h4",{class:"text-lg font-medium text-gray-900 mb-4"},"âš¡ Aksi Cepat",-1)),t("div",ce,[e[28]||(e[28]=t("div",{class:"border rounded-lg p-4 bg-blue-50"},[t("h5",{class:"font-medium text-blue-900 mb-2"},"ðŸ’¡ Tips Marking Manual"),t("ul",{class:"text-sm text-blue-800 space-y-1"},[t("li",null,'â€¢ Klik tombol "âœ“ Tandai Lunas" untuk mark individual payment'),t("li",null,'â€¢ Gunakan "âœ“ Tandai Semua Lunas" untuk mark bulk dalam detail'),t("li",null,"â€¢ Progress akan otomatis terupdate"),t("li",null,"â€¢ Data tersimpan otomatis")])],-1)),t("div",me,[e[27]||(e[27]=t("h5",{class:"font-medium text-green-900 mb-2"},"ðŸ“Š Status Overview",-1)),t("div",pe,[t("div",ge,[e[24]||(e[24]=t("span",{class:"text-green-700"},"Lunas:",-1)),t("span",be,o(S.value.filter(a=>a.status==="completed").length),1)]),t("div",xe,[e[25]||(e[25]=t("span",{class:"text-blue-700"},"Sebagian:",-1)),t("span",ye,o(S.value.filter(a=>a.status==="partial").length),1)]),t("div",he,[e[26]||(e[26]=t("span",{class:"text-yellow-700"},"Pending:",-1)),t("span",ke,o(S.value.filter(a=>a.status==="pending").length),1)])])])])]),t("div",ve,[t("div",fe,[e[33]||(e[33]=t("h4",{class:"text-lg font-medium text-gray-900"},"Pembayaran Multi-Bulan",-1)),t("div",_e,[P(t("select",{"onUpdate:modelValue":e[2]||(e[2]=a=>N.value=a),class:"input-field w-auto"},e[30]||(e[30]=[t("option",{value:""},"Semua Status",-1),t("option",{value:"pending"},"Pending",-1),t("option",{value:"partial"},"Sebagian",-1),t("option",{value:"completed"},"Lunas",-1)]),512),[[R,N.value]]),t("button",{onClick:yt,class:"btn-secondary flex items-center",title:"Download PDF Report"},[b(p(Ut),{class:"w-4 h-4 mr-2"}),e[31]||(e[31]=t("span",{class:"hidden sm:inline"},"Download PDF",-1)),e[32]||(e[32]=t("span",{class:"sm:hidden"},"PDF",-1))])])]),t("div",we,[t("table",$e,[e[34]||(e[34]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Siswa "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Periode "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Total "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Progress "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Aksi ")])],-1)),t("tbody",Pe,[(m(!0),c(M,null,L(H.value,a=>{var g,i,k,w,$;return m(),c("tr",{key:a.id},[t("td",Ae,[t("div",Se,[t("div",Ce,[t("span",Te,o((k=(i=(g=a.student)==null?void 0:g.name)==null?void 0:i.charAt(0))==null?void 0:k.toUpperCase()),1)]),t("div",null,[t("div",De,o((w=a.student)==null?void 0:w.name),1),t("div",Me,o(($=a.student)==null?void 0:$.nickname),1)])])]),t("td",Le,[t("div",Ie,o(a.period_label),1),t("div",Be,o(a.months)+" bulan",1),a.payment_links?(m(),c("div",Ee,o(a.payment_links.length)+" link tersedia ",1)):A("",!0)]),t("td",Ne,[t("div",Ue,o(h(a.total_amount)),1),t("div",Re,o(h(a.monthly_amount))+"/bulan",1)]),t("td",je,[t("div",Ke,[t("div",{class:"bg-primary-600 h-2 rounded-full",style:Pt({width:a.progress_percentage+"%"})},null,4)]),t("div",We,o(a.paid_amount)+"/"+o(a.total_amount)+" ("+o(a.progress_percentage)+"%) ",1)]),t("td",Oe,[t("span",{class:U(X(a.status))},o(Z(a.status)),3)]),t("td",Ge,[t("div",Fe,[t("button",{onClick:G=>ct(a),class:"text-primary-600 hover:text-primary-900",title:"Lihat Detail"},[b(p(Mt),{class:"w-4 h-4"})],8,Ve),t("button",{onClick:G=>st(a),class:"text-success-600 hover:text-success-900",title:"Kirim Reminder"},[b(p(F),{class:"w-4 h-4"})],8,Je),t("button",{onClick:G=>at(a),class:"text-warning-600 hover:text-warning-900",title:"Copy Link"},[b(p(ft),{class:"w-4 h-4"})],8,Ye),t("button",{onClick:G=>$t(a),class:"text-purple-600 hover:text-purple-900",title:"Lihat Invoice"},[b(p(ot),{class:"w-4 h-4"})],8,He),t("button",{onClick:G=>V(a),class:"text-blue-600 hover:text-blue-900",title:"Edit Pembayaran"},[b(p(St),{class:"w-4 h-4"})],8,qe),t("button",{onClick:G=>lt(a),class:"text-red-600 hover:text-red-900",title:"Hapus Pembayaran"},[b(p(it),{class:"w-4 h-4"})],8,Qe)])])])}),128))])])]),t("div",ze,[(m(!0),c(M,null,L(H.value,a=>{var g,i,k,w;return m(),c("div",{key:a.id,class:"bg-gray-50 rounded-lg p-4"},[t("div",Ze,[t("div",Xe,[t("div",ts,[t("span",es,o((k=(i=(g=a.student)==null?void 0:g.name)==null?void 0:i.charAt(0))==null?void 0:k.toUpperCase()),1)]),t("div",null,[t("div",ss,o((w=a.student)==null?void 0:w.name),1),t("div",as,o(a.period_label),1)])]),t("span",{class:U(X(a.status))},o(Z(a.status)),3)]),t("div",ns,[t("div",ls,[t("div",{class:"bg-primary-600 h-2 rounded-full",style:Pt({width:a.progress_percentage+"%"})},null,4)]),t("div",os,[e[35]||(e[35]=t("span",{class:"text-gray-600"},"Progress:",-1)),t("span",null,o(a.progress_percentage)+"%",1)]),t("div",is,[e[36]||(e[36]=t("span",{class:"text-gray-600"},"Total:",-1)),t("span",rs,o(h(a.total_amount)),1)])]),t("div",ds,[t("button",{onClick:$=>ct(a),class:"flex items-center justify-center text-primary-600 py-2"},[b(p(Mt),{class:"w-4 h-4 mr-1"}),e[37]||(e[37]=t("span",{class:"text-xs"},"Detail",-1))],8,us),t("button",{onClick:$=>st(a),class:"flex items-center justify-center text-success-600 py-2"},[b(p(F),{class:"w-4 h-4 mr-1"}),e[38]||(e[38]=t("span",{class:"text-xs"},"Kirim",-1))],8,cs),t("button",{onClick:$=>at(a),class:"flex items-center justify-center text-warning-600 py-2"},[b(p(ft),{class:"w-4 h-4 mr-1"}),e[39]||(e[39]=t("span",{class:"text-xs"},"Copy",-1))],8,ms),t("button",{onClick:$=>V(a),class:"flex items-center justify-center text-blue-600 py-2"},[b(p(St),{class:"w-4 h-4 mr-1"}),e[40]||(e[40]=t("span",{class:"text-xs"},"Edit",-1))],8,ps)]),t("div",gs,[t("button",{onClick:$=>lt(a),class:"flex items-center justify-center text-red-600 py-2 w-full"},[b(p(it),{class:"w-4 h-4 mr-1"}),e[41]||(e[41]=t("span",{class:"text-xs"},"Hapus",-1))],8,bs)])])}),128))])]),B.value?(m(),c("div",xs,[t("div",ys,[t("h3",hs,o(y.value?"Edit Pembayaran Multi-Bulan":"Buat Pembayaran Multi-Bulan"),1),t("form",{onSubmit:Bt(ut,["prevent"]),class:"space-y-4"},[t("div",null,[e[43]||(e[43]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Siswa",-1)),P(t("select",{"onUpdate:modelValue":e[3]||(e[3]=a=>u.studentId=a),required:"",class:"input-field"},[e[42]||(e[42]=t("option",{value:""},"Pilih Siswa",-1)),(m(!0),c(M,null,L(f.value,a=>(m(),c("option",{key:a.id,value:a.id},o(a.name)+" ("+o(a.nickname)+") ",9,ks))),128))],512),[[R,u.studentId]])]),t("div",vs,[t("div",null,[e[44]||(e[44]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Bulan Mulai",-1)),P(t("select",{"onUpdate:modelValue":e[4]||(e[4]=a=>u.startMonth=a),required:"",class:"input-field"},[(m(),c(M,null,L(C,a=>t("option",{key:a.value,value:a.value},o(a.label),9,fs)),64))],512),[[R,u.startMonth]])]),t("div",null,[e[45]||(e[45]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Tahun",-1)),P(t("select",{"onUpdate:modelValue":e[5]||(e[5]=a=>u.year=a),required:"",class:"input-field"},[(m(),c(M,null,L(_,a=>t("option",{key:a,value:a},o(a),9,_s)),64))],512),[[R,u.year]])])]),t("div",null,[e[46]||(e[46]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Jumlah Bulan",-1)),P(t("select",{"onUpdate:modelValue":e[6]||(e[6]=a=>u.months=a),required:"",class:"input-field",onChange:O},[(m(),c(M,null,L(12,a=>t("option",{key:a,value:a},o(a)+" bulan ",9,ws)),64))],544),[[R,u.months,void 0,{number:!0}]])]),t("div",null,[e[47]||(e[47]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Jumlah per Bulan",-1)),P(t("input",{"onUpdate:modelValue":e[7]||(e[7]=a=>u.monthlyAmount=a),type:"number",min:"1",required:"",class:"input-field",onInput:O,placeholder:"50000"},null,544),[[J,u.monthlyAmount,void 0,{number:!0}]])]),t("div",$s,[e[53]||(e[53]=t("h4",{class:"font-medium text-blue-900 mb-3"},"ðŸ’³ Opsi Generate Link Pembayaran",-1)),t("div",Ps,[t("label",As,[P(t("input",{"onUpdate:modelValue":e[8]||(e[8]=a=>u.linkType=a),type:"radio",value:"individual",class:"mt-1"},null,512),[[At,u.linkType]]),t("div",null,[e[48]||(e[48]=t("div",{class:"font-medium text-gray-900"},"Link Individual per Bulan",-1)),t("div",Ss," Generate "+o(u.months)+" link terpisah ("+o(h(u.monthlyAmount))+" per link) ",1),e[49]||(e[49]=t("div",{class:"text-xs text-green-600 mt-1"}," âœ… Orang tua bisa bayar bertahap â€¢ âœ… Tracking per bulan lebih detail ",-1))])]),t("label",Cs,[P(t("input",{"onUpdate:modelValue":e[9]||(e[9]=a=>u.linkType=a),type:"radio",value:"single",class:"mt-1"},null,512),[[At,u.linkType]]),t("div",null,[e[50]||(e[50]=t("div",{class:"font-medium text-gray-900"},"Link Total Sekaligus",-1)),t("div",Ts," Generate 1 link untuk total "+o(h(u.monthlyAmount*u.months)),1),e[51]||(e[51]=t("div",{class:"text-xs text-blue-600 mt-1"}," âœ… Pembayaran sekaligus â€¢ âœ… Lebih praktis untuk orang tua ",-1))])]),t("label",Ds,[P(t("input",{"onUpdate:modelValue":e[10]||(e[10]=a=>u.linkType=a),type:"radio",value:"both",class:"mt-1"},null,512),[[At,u.linkType]]),e[52]||(e[52]=t("div",null,[t("div",{class:"font-medium text-gray-900"},"Kedua Opsi (Recommended)"),t("div",{class:"text-sm text-gray-600"}," Generate link individual + link total (orang tua pilih sendiri) "),t("div",{class:"text-xs text-purple-600 mt-1"}," âœ… Fleksibilitas maksimal â€¢ âœ… Cocok untuk semua preferensi ")],-1))])])]),t("div",Ms,[e[58]||(e[58]=t("h4",{class:"font-medium text-gray-900 mb-2"},"ðŸ“‹ Ringkasan Pembayaran",-1)),t("div",Ls,[t("div",Is,[e[54]||(e[54]=t("span",null,"Periode:",-1)),t("span",null,o(u.months)+" bulan ("+o(tt())+")",1)]),t("div",Bs,[e[55]||(e[55]=t("span",null,"Jumlah per Bulan:",-1)),t("span",null,o(h(u.monthlyAmount)),1)]),t("div",Es,[e[56]||(e[56]=t("span",null,"Total Pembayaran:",-1)),t("span",null,o(h(u.monthlyAmount*u.months)),1)])]),t("div",Ns,[e[57]||(e[57]=t("h5",{class:"font-medium text-gray-900 mb-2"},"ðŸ”— Link yang akan dibuat:",-1)),t("div",Us,[u.linkType==="individual"||u.linkType==="both"?(m(),c("div",Rs," âœ… "+o(u.months)+" link individual ("+o(h(u.monthlyAmount))+" per link) ",1)):A("",!0),u.linkType==="single"||u.linkType==="both"?(m(),c("div",js," âœ… 1 link total sekaligus ("+o(h(u.monthlyAmount*u.months))+") ",1)):A("",!0),u.linkType==="both"?(m(),c("div",Ks," ðŸ’¡ Orang tua bisa pilih bayar bertahap atau sekaligus ")):A("",!0)])])]),t("div",Ws,[t("button",{type:"button",onClick:q,class:"btn-secondary"}," Batal "),t("button",{type:"submit",disabled:E.value,class:"btn-primary"},o(E.value?"Menyimpan...":y.value?"Update Pembayaran":"Buat Pembayaran"),9,Os)])],32)])])):A("",!0),W.value&&y.value?(m(),c("div",Gs,[t("div",Fs,[e[65]||(e[65]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Detail Pembayaran Multi-Bulan",-1)),t("div",Vs,[t("div",Js,[t("div",Ys,[t("span",Hs,o((x=(r=(s=y.value.student)==null?void 0:s.name)==null?void 0:r.charAt(0))==null?void 0:x.toUpperCase()),1)]),t("div",null,[t("h4",qs,o((n=y.value.student)==null?void 0:n.name),1),t("p",Qs,o(y.value.period_label),1)])]),t("div",null,[t("div",zs,[e[59]||(e[59]=t("span",{class:"text-sm font-medium text-gray-700"},"Progress Pembayaran",-1)),t("span",Zs,o(y.value.progress_percentage)+"%",1)]),t("div",Xs,[t("div",{class:"bg-primary-600 h-3 rounded-full",style:Pt({width:y.value.progress_percentage+"%"})},null,4)]),t("div",ta,[t("span",null,o(h(y.value.paid_amount)),1),t("span",null,o(h(y.value.total_amount)),1)])]),t("div",null,[t("div",ea,[e[60]||(e[60]=t("h5",{class:"font-medium text-gray-900"},"Detail per Bulan",-1)),y.value.month_details&&y.value.month_details.some(a=>!a.paid)?(m(),c("button",{key:0,onClick:e[11]||(e[11]=a=>xt(y.value)),class:"text-green-600 hover:text-green-800 text-xs px-3 py-1 border border-green-300 rounded-full hover:bg-green-50"}," âœ“ Tandai Semua Lunas ")):A("",!0)]),t("div",sa,[(m(!0),c(M,null,L(y.value.month_details,a=>(m(),c("div",{key:a.month,class:U(["p-3 border rounded-lg",a.paid?"bg-green-50 border-green-200":"bg-gray-50 border-gray-200"])},[t("div",aa,[t("span",na,o(a.label),1),t("div",la,[a.paid?(m(),c("span",oa,"âœ“ Lunas")):(m(),c("span",ia,"Belum bayar")),a.paid?A("",!0):(m(),c("button",{key:2,onClick:g=>bt(y.value,a),class:"text-green-600 hover:text-green-800 text-xs px-2 py-1 border border-green-300 rounded hover:bg-green-50",title:"Tandai Lunas"}," âœ“ Tandai Lunas ",8,ra))])]),t("div",da,o(h(a.amount)),1),a.paid&&a.paid_at?(m(),c("div",ua," Dibayar: "+o(gt(a.paid_at)),1)):A("",!0)],2))),128))])]),t("div",null,[e[61]||(e[61]=t("label",{class:"block text-sm font-medium text-gray-700 mb-3"},"ðŸ”— Link Pembayaran yang Dibuat",-1)),y.value.payment_links&&y.value.payment_links.length>0?(m(),c("div",ca,[(m(!0),c(M,null,L(y.value.payment_links,a=>(m(),c("div",{key:a.id,class:U(["border rounded-lg p-3",a.type==="total"?"bg-blue-50 border-blue-200":"bg-green-50 border-green-200"])},[t("div",ma,[t("div",pa,[t("span",{class:U([a.type==="total"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800","px-2 py-1 rounded-full text-xs font-medium"])},o(a.type==="total"?"ðŸ’° Total Sekaligus":`ðŸ“… Bulan ${a.month}`),3),t("span",ga,o(h(a.amount)),1)]),t("div",ba,[t("button",{onClick:g=>nt(a.url),class:"p-1 text-gray-500 hover:text-gray-700",title:"Copy Link"},[b(p(vt),{class:"w-4 h-4"})],8,xa),t("button",{onClick:g=>pt(a,y.value.student),class:"p-1 text-green-500 hover:text-green-700",title:"Kirim via WhatsApp"},[b(p(F),{class:"w-4 h-4"})],8,ya),t("button",{onClick:g=>ht(a),class:"p-1 text-purple-500 hover:text-purple-700",title:"Lihat Invoice"},[b(p(ot),{class:"w-4 h-4"})],8,ha)])]),t("div",ka,o(a.description),1),t("div",va," Order ID: "+o(a.order_id),1),t("div",fa,[t("input",{value:a.url,readonly:"",class:"input-field text-xs flex-1"},null,8,_a)])],2))),128))])):(m(),c("div",wa,[t("div",$a,[t("input",{value:y.value.payment_url,readonly:"",class:"input-field text-xs flex-1"},null,8,Pa),t("button",{onClick:e[12]||(e[12]=a=>nt(y.value.payment_url)),class:"btn-secondary p-2"},[b(p(vt),{class:"w-4 h-4"})])])]))])]),t("div",Aa,[t("div",Sa,[t("button",{onClick:e[13]||(e[13]=a=>V(y.value)),class:"btn-secondary text-blue-600 border-blue-300 hover:bg-blue-50 flex-1"},[b(p(St),{class:"w-4 h-4 mr-2"}),e[62]||(e[62]=I(" Edit ",-1))]),t("button",{onClick:e[14]||(e[14]=a=>lt(y.value)),class:"btn-secondary text-red-600 border-red-300 hover:bg-red-50 flex-1"},[b(p(it),{class:"w-4 h-4 mr-2"}),e[63]||(e[63]=I(" Hapus ",-1))])]),y.value.payment_links&&y.value.payment_links.length>1?(m(),c("div",Ca,[t("button",{onClick:e[15]||(e[15]=a=>wt(y.value)),class:"btn-success flex-1"},[b(p(F),{class:"w-4 h-4 mr-2"}),I(" Kirim Semua Link ("+o(y.value.payment_links.length)+") ",1)])])):A("",!0),t("div",Ta,[t("button",{onClick:e[16]||(e[16]=a=>W.value=!1),class:"btn-secondary flex-1"}," Tutup "),t("button",{onClick:e[17]||(e[17]=a=>mt(y.value)),class:"btn-success flex-1"},[b(p(F),{class:"w-4 h-4 mr-2"}),e[64]||(e[64]=I(" Kirim Reminder ",-1))])])])])])):A("",!0)])}}},Ma={class:"space-y-6"},La={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0"},Ia={class:"flex flex-col sm:flex-row gap-3"},Ba={class:"border-b border-gray-200"},Ea={class:"-mb-px flex space-x-8"},Na={key:0},Ua={class:"grid grid-cols-1 md:grid-cols-4 gap-6"},Ra={class:"card p-6"},ja={class:"flex items-center"},Ka={class:"p-2 bg-primary-100 rounded-lg"},Wa={class:"ml-4"},Oa={class:"text-2xl font-semibold text-gray-900"},Ga={class:"card p-6"},Fa={class:"flex items-center"},Va={class:"p-2 bg-warning-100 rounded-lg"},Ja={class:"ml-4"},Ya={class:"text-2xl font-semibold text-gray-900"},Ha={class:"card p-6"},qa={class:"flex items-center"},Qa={class:"p-2 bg-success-100 rounded-lg"},za={class:"ml-4"},Za={class:"text-2xl font-semibold text-gray-900"},Xa={class:"card p-6"},tn={class:"flex items-center"},en={class:"p-2 bg-success-100 rounded-lg"},sn={class:"ml-4"},an={class:"text-2xl font-semibold text-gray-900"},nn={class:"card p-4 sm:p-6"},ln={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4"},on={class:"flex items-end"},rn=["disabled"],dn={key:0,class:"mt-4"},un={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-2 max-h-48 overflow-y-auto"},cn=["value"],mn={class:"text-sm"},pn={class:"card p-4 sm:p-6"},gn={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4"},bn={class:"sm:col-span-2"},xn={key:0,class:"mt-4"},yn={key:1,class:"mt-4"},hn={class:"grid grid-cols-1 gap-2 max-h-48 overflow-y-auto"},kn=["value"],vn={class:"text-sm"},fn={class:"flex items-center justify-between mt-4 pt-4 border-t border-gray-200"},_n={class:"text-sm text-gray-600"},wn={class:"font-medium"},$n=["disabled"],Pn={class:"card p-4 sm:p-6"},An={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4 space-y-2 sm:space-y-0"},Sn={class:"flex space-x-2"},Cn={class:"block sm:hidden space-y-4"},Tn={class:"flex items-center justify-between mb-2"},Dn={class:"flex items-center"},Mn={class:"w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center mr-3"},Ln={class:"text-primary-600 font-semibold text-xs"},In={class:"font-medium text-sm"},Bn={class:"text-gray-500 text-xs"},En={class:"space-y-1 text-sm"},Nn={class:"flex justify-between"},Un={class:"font-medium"},Rn={class:"flex justify-between"},jn={class:"text-right"},Kn={class:"flex justify-between"},Wn={class:"font-mono text-xs"},On={class:"flex justify-between"},Gn={class:"text-xs"},Fn={class:"grid grid-cols-3 gap-2 mt-3 pt-3 border-t border-gray-200"},Vn=["onClick"],Jn=["onClick"],Yn=["onClick"],Hn=["onClick"],qn=["onClick"],Qn={class:"flex justify-center mt-2"},zn=["onClick"],Zn={class:"hidden sm:block overflow-x-auto"},Xn={class:"min-w-full divide-y divide-gray-200"},tl={class:"bg-white divide-y divide-gray-200"},el={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},sl={class:"flex items-center"},al={class:"w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center mr-3"},nl={class:"text-primary-600 font-semibold text-xs"},ll={class:"font-medium"},ol={class:"text-gray-500 text-xs"},il={class:"px-6 py-4 whitespace-nowrap text-sm font-mono text-gray-500"},rl={class:"px-6 py-4 text-sm text-gray-500"},dl={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},ul={class:"px-6 py-4 whitespace-nowrap"},cl={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},ml={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},pl={class:"flex items-center space-x-2"},gl=["onClick"],bl=["onClick"],xl=["onClick"],yl=["onClick"],hl=["onClick"],kl=["onClick"],vl={key:0,class:"text-center py-8"},fl={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"},_l={class:"bg-white rounded-lg max-w-md w-full mx-4 p-4 sm:p-6"},wl=["value"],$l={class:"flex justify-end space-x-3 pt-4"},Pl=["disabled"],Al={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"},Sl={class:"bg-white rounded-lg max-w-md w-full mx-4 p-4 sm:p-6"},Cl={class:"space-y-4"},Tl={class:"text-sm text-gray-900"},Dl={class:"text-sm text-gray-900"},Ml={class:"text-sm font-mono text-gray-900"},Ll={class:"flex items-center space-x-2"},Il=["value"],Bl={class:"flex justify-end space-x-3 pt-4"},El={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"},Nl={class:"bg-white rounded-lg max-w-md w-full mx-4 p-4 sm:p-6"},Ul={class:"space-y-4"},Rl={class:"block text-sm font-medium text-gray-700 mb-1"},jl=["value"],Kl={class:"flex items-center space-x-2"},Wl=["value"],Ol={class:"flex justify-between space-x-3 pt-4"},Gl={key:1},eo={__name:"Payments",setup(K){const v=Et(),d=Nt(),z=It(),B=D(!1),W=D(!1),y=D(null),E=D(""),N=D(!1),u=D(!1),S=D("single"),f=kt({amount:5e4,description:"Kas Bulanan",target:"all",selectedStudents:[]}),C=kt({studentId:"",amount:0,description:""}),_=kt({target:"pending",delayMinutes:1,template:"reminder",customMessage:"",selectedPayments:[]}),Y=D(!1),H=D(!1),h=D({phone:"",message:"",studentName:""}),Z=Q(()=>v.paymentLinks.filter(e=>e.status==="pending")),X=Q(()=>v.paymentLinks.filter(e=>e.status==="completed")),tt=Q(()=>X.value.reduce((e,s)=>e+s.amount,0)),O=Q(()=>{let e=[...v.paymentLinks];return E.value&&(e=e.filter(s=>s.status===E.value)),e.sort((s,r)=>new Date(r.created_at)-new Date(s.created_at))}),T=e=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(e),et=e=>Vt(new Date(e),"dd MMM yyyy HH:mm",{locale:Jt}),q=e=>({pending:"Pending",completed:"Selesai",expired:"Expired"})[e]||e,ut=e=>{const s={pending:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-warning-100 text-warning-800",completed:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-success-100 text-success-800",expired:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800"};return s[e]||s.pending},ct=async()=>{try{N.value=!0;let e=[];const s=new Date().toLocaleDateString("id-ID",{month:"long",year:"numeric"});if(f.target==="all")e=v.students;else if(f.target==="unpaid"){if(e=v.unpaidStudentsThisMonth,e.length===0){d.info(`Semua siswa sudah membayar untuk bulan ${s}! ðŸŽ‰`);return}}else f.target==="selected"&&(e=v.students.filter(r=>f.selectedStudents.includes(r.id)));if(e.length>5&&!confirm(`Generate link pembayaran untuk ${e.length} siswa?

Bulan: ${s}
Jumlah: ${T(f.amount)}
Keterangan: ${f.description}`))return;try{const r=await v.generateBulkPaymentLinks(f.amount,f.description,f.target==="unpaid"),x=r.filter(a=>a.success).length,n=r.filter(a=>!a.success).length;x>0&&d.success(`âœ… Berhasil generate ${x} link pembayaran untuk bulan ${s}`),n>0&&d.warning(`âš ï¸ ${n} link gagal dibuat (mungkin siswa sudah bayar)`)}catch(r){if(r.message.includes("sudah membayar"))d.info(r.message);else throw r}f.selectedStudents=[]}catch(e){d.error("Gagal generate link pembayaran: "+e.message),console.error("Error generating bulk links:",e)}finally{N.value=!1}},st=async()=>{try{u.value=!0;const e=v.students.find(r=>r.id===C.studentId),s=new Date().toLocaleDateString("id-ID",{month:"long",year:"numeric"});await v.generatePaymentLink(C.studentId,C.amount,C.description),d.success(`âœ… Link pembayaran berhasil dibuat untuk ${e==null?void 0:e.name} - ${s}`),B.value=!1,C.studentId="",C.amount=0,C.description=""}catch(e){e.message.includes("sudah membayar")?d.warning(e.message):d.error("Gagal membuat link pembayaran: "+e.message),console.error("Error creating payment link:",e)}finally{u.value=!1}},at=async e=>{try{if(navigator.clipboard&&window.isSecureContext)await navigator.clipboard.writeText(e.payment_url),d.success("Link berhasil disalin ke clipboard");else{const s=document.createElement("textarea");s.value=e.payment_url,s.style.position="fixed",s.style.left="-999999px",s.style.top="-999999px",document.body.appendChild(s),s.focus(),s.select();try{document.execCommand("copy"),d.success("Link berhasil disalin")}catch(r){d.error("Gagal menyalin link - silakan copy manual"),console.error("Copy fallback failed:",r)}finally{document.body.removeChild(s)}}}catch(s){console.error("Error copying payment link:",s),d.error("Gagal menyalin link - silakan copy manual")}},nt=e=>{mt(e)},mt=async e=>{try{const s=e.student,r=(s==null?void 0:s.name)||"Siswa",x=(s==null?void 0:s.nickname)||r,n=(s==null?void 0:s.phone)||"",a=rt(),g=`Assalamu'alaikum Wr. Wb.

${a} orang tua dari ${r}

Dengan hormat, kami ingin mengingatkan mengenai pembayaran uang kas kelas untuk bulan ini sebesar ${T(e.amount)}

Untuk kemudahan pembayaran, Bapak/Ibu dapat menggunakan link pembayaran berikut:

${e.payment_url}

Pembayaran dapat dilakukan melalui QRIS dengan berbagai metode:

âœ… Scan QR Code
âœ… E-Wallet (GoPay, OVO, DANA, ShopeePay)

Terima kasih atas perhatian dan kerjasamanya.

Wassalamu'alaikum Wr. Wb.

---
*Order ID: ${e.order_id}*
*Dikirim: ${a} (${dt()})*
*Sistem Kas Kelas Otomatis*`,k=`https://wa.me/${n.replace(/\D/g,"").replace(/^0/,"62")}?text=${encodeURIComponent(g)}`;window.open(k,"_blank","noopener,noreferrer"),d.success(`ðŸ“± WhatsApp terbuka untuk ${r}`,{timeout:3e3}),W.value=!1}catch(s){console.error("Error opening WhatsApp:",s),d.error("Gagal membuka WhatsApp")}},pt=async e=>{try{const s=await Gt.checkTransactionStatus(e.amount,e.order_id);s.status==="completed"&&e.status==="pending"?(await v.db.updatePaymentLink(e.id,{status:"completed",payment_method:s.payment_method||"qris",completed_at:s.completed_at||new Date().toISOString()}),await v.addTransaction({type:"income",amount:e.amount,description:e.description,student_id:e.student_id,payment_method:s.payment_method||"qris",order_id:e.order_id,status:"completed",created_at:s.completed_at||new Date().toISOString()}),d.success("Status pembayaran berhasil diupdate")):d.info(`Status: ${s.status||"pending"}`)}catch(s){d.error("Gagal mengecek status pembayaran"),console.error("Error checking payment status:",s)}},gt=async e=>{var r,x,n;const s=new Date().toLocaleDateString("id-ID",{month:"long",year:"numeric"});if(confirm(`Tandai pembayaran ${(r=e.student)==null?void 0:r.name} sebagai LUNAS untuk bulan ${s}?

Jumlah: ${T(e.amount)}
Keterangan: ${e.description}

âš ï¸ Ini akan menambah saldo kas kelas dan menandai siswa sebagai sudah bayar bulan ini.`))try{const a=new Date().toISOString(),g=a.slice(0,7);await v.updatePaymentLink(e.id,{status:"completed",payment_method:"manual",completed_at:a,month:g,notes:`Ditandai lunas secara manual oleh admin pada ${new Date().toLocaleString("id-ID")}`}),await v.addTransaction({type:"income",amount:e.amount,description:`${e.description} - ${s} (Manual)`,student_id:e.student_id,payment_method:"manual",order_id:e.order_id,status:"completed",month:g,created_at:a,notes:`Pembayaran manual - ${(x=e.student)==null?void 0:x.name} untuk ${s}`}),await v.fetchPaymentLinks(),await v.fetchTransactions();const i=v.currentBalance;d.success(`âœ… ${(n=e.student)==null?void 0:n.name} berhasil ditandai LUNAS!
ðŸ’° Saldo kas bertambah: ${T(e.amount)}
ðŸ“Š Saldo saat ini: ${T(i)}`,{timeout:6e3})}catch(a){console.error("Error marking payment as paid:",a),d.error("Gagal menandai pembayaran sebagai lunas: "+a.message)}},bt=async e=>{if(confirm("Apakah Anda yakin ingin menghapus link pembayaran ini?"))try{await v.deletePaymentLink(e.id),d.success("Link pembayaran berhasil dihapus")}catch(s){d.error("Gagal menghapus link pembayaran"),console.error("Error deleting payment link:",s)}},xt=e=>{e.order_id?z.push({path:"/invoice",query:{orderId:e.order_id}}):e.student_id?z.push({path:"/invoice",query:{studentId:e.student_id}}):d.warning("Data pembayaran tidak lengkap untuk membuat invoice")},yt=async e=>{try{if(navigator.clipboard&&window.isSecureContext)await navigator.clipboard.writeText(e),d.success("Berhasil disalin ke clipboard");else{const s=document.createElement("textarea");s.value=e,s.style.position="fixed",s.style.left="-999999px",s.style.top="-999999px",document.body.appendChild(s),s.focus(),s.select();try{document.execCommand("copy"),d.success("Berhasil disalin")}catch(r){d.warning("Silakan copy manual dari text yang ditampilkan"),console.error("Copy fallback failed:",r)}finally{document.body.removeChild(s)}}}catch(s){console.error("Error copying to clipboard:",s),d.error("Gagal menyalin - silakan copy manual")}},_t=async()=>{const e=`Nomor: ${h.value.phone}

Pesan:
${h.value.message}`;try{await navigator.clipboard.writeText(e),d.success("Pesan dan nomor berhasil disalin!")}catch{d.error("Gagal menyalin")}},wt=()=>{const e=h.value.phone.replace(/[^\d]/g,""),s=encodeURIComponent(h.value.message),r=`https://web.whatsapp.com/send?phone=${e}&text=${s}`;window.open(r,"_blank"),d.info("WhatsApp Web dibuka di tab baru")},V=()=>_.target==="pending"?v.paymentLinks.filter(e=>e.status==="pending"):_.target==="all"?v.paymentLinks:_.target==="selected"?v.paymentLinks.filter(e=>_.selectedPayments.includes(e.id)):[],lt=e=>{var n;if(_.template==="custom")return _.customMessage.replace("{nama}",((n=e.student)==null?void 0:n.name)||"").replace("{jumlah}",T(e.amount)).replace("{keterangan}",e.description).replace("{link}",e.payment_url);const s=e.student,r=(s==null?void 0:s.name)||"Siswa",x=rt();return`Assalamu'alaikum Wr. Wb.

${x} orang tua dari ${r}

Dengan hormat, kami ingin mengingatkan mengenai pembayaran uang kas kelas untuk bulan ini sebesar ${T(e.amount)}

Untuk kemudahan pembayaran, Bapak/Ibu dapat menggunakan link pembayaran berikut:

${e.payment_url}

Pembayaran dapat dilakukan melalui QRIS dengan berbagai metode:

âœ… Scan QR Code
âœ… E-Wallet (GoPay, OVO, DANA, ShopeePay)

Terima kasih atas perhatian dan kerjasamanya.

Wassalamu'alaikum Wr. Wb.

---
*Order ID: ${e.order_id}*
*Dikirim: ${x} (${dt()})*
*Sistem Kas Kelas Otomatis*`},ht=async()=>{try{const e=$t(),s=document.createElement("div");s.innerHTML=e,s.style.position="absolute",s.style.left="-9999px",s.style.top="-9999px",document.body.appendChild(s);const r=window.open("","_blank");r&&(r.document.write(`
        <!DOCTYPE html>
        <html>
        <head>
          <title>Laporan Pembayaran - ${new Date().toLocaleDateString("id-ID")}</title>
          <style>
            body { font-family: Arial, sans-serif; margin: 20px; }
            h1 { color: #1f2937; border-bottom: 2px solid #3b82f6; padding-bottom: 10px; }
            h2 { color: #374151; margin-top: 20px; }
            table { width: 100%; border-collapse: collapse; margin: 20px 0; }
            th, td { border: 1px solid #d1d5db; padding: 8px; text-align: left; }
            th { background-color: #f3f4f6; font-weight: bold; }
            .status-pending { color: #d97706; }
            .status-completed { color: #059669; }
            .status-expired { color: #dc2626; }
            .summary { background-color: #f9fafb; padding: 15px; border-radius: 8px; margin: 20px 0; }
            .footer { margin-top: 30px; text-align: center; color: #6b7280; font-size: 12px; }
          </style>
        </head>
        <body>
          ${e}
          <div class="footer">
            Generated on ${new Date().toLocaleString("id-ID")} | Sistem Kas Kelas
          </div>
        </body>
        </html>
      `),r.document.close(),setTimeout(()=>{r.print()},500)),document.body.removeChild(s),d.success("PDF Report siap untuk di-print/save")}catch(e){console.error("Error generating PDF:",e),d.error("Gagal membuat PDF report")}},$t=()=>{const e=O.value,s=e.reduce((a,g)=>a+g.amount,0),r=e.filter(a=>a.status==="pending").length,x=e.filter(a=>a.status==="completed").length;let n="";return e.forEach(a=>{var i,k;const g=`status-${a.status}`;n+=`
      <tr>
        <td>${((i=a.student)==null?void 0:i.name)||"-"}</td>
        <td>${((k=a.student)==null?void 0:k.nickname)||"-"}</td>
        <td>${T(a.amount)}</td>
        <td>${a.description}</td>
        <td class="${g}">${q(a.status)}</td>
        <td>${et(a.created_at)}</td>
        <td style="font-family: monospace; font-size: 11px;">${a.order_id}</td>
      </tr>
    `}),`
    <h1>ðŸ“Š Laporan Pembayaran Kas Kelas</h1>

    <div class="summary">
      <h2>ðŸ“ˆ Ringkasan</h2>
      <p><strong>Total Link Pembayaran:</strong> ${e.length}</p>
      <p><strong>Pending:</strong> ${r} | <strong>Selesai:</strong> ${x}</p>
      <p><strong>Total Amount:</strong> ${T(s)}</p>
      <p><strong>Filter Status:</strong> ${E.value||"Semua Status"}</p>
    </div>

    <h2>ðŸ“‹ Detail Pembayaran</h2>
    <table>
      <thead>
        <tr>
          <th>Nama Siswa</th>
          <th>Nickname</th>
          <th>Jumlah</th>
          <th>Keterangan</th>
          <th>Status</th>
          <th>Tanggal Dibuat</th>
          <th>Order ID</th>
        </tr>
      </thead>
      <tbody>
        ${n||'<tr><td colspan="7" style="text-align: center; color: #6b7280;">Tidak ada data pembayaran</td></tr>'}
      </tbody>
    </table>
  `},l=async()=>{try{Y.value=!0;const e=V();if(e.length===0){d.error("Tidak ada pembayaran yang dipilih");return}const s=[],r=_.delayMinutes*60;for(let a=0;a<e.length;a++){const g=e[a],i=g.student,k=(i==null?void 0:i.phone)||"";try{a>0&&await new Promise(j=>setTimeout(j,r*1e3));const w=lt(g),G=`https://wa.me/${k.replace(/\D/g,"").replace(/^0/,"62")}?text=${encodeURIComponent(w)}`;if(a===0)window.open(G,"_blank","noopener,noreferrer");else{const j=document.createElement("a");j.href=G,j.target="_blank",j.rel="noopener noreferrer",j.style.display="none",document.body.appendChild(j),j.click(),document.body.removeChild(j)}s.push({recipient:i==null?void 0:i.name,phone:k,success:!0}),d.success(`ðŸ“± ${a+1}/${e.length} - WhatsApp dibuka untuk ${i==null?void 0:i.name}`,{timeout:2e3})}catch(w){s.push({recipient:i==null?void 0:i.name,phone:k,success:!1,error:w.message}),d.error(`âŒ Gagal membuka WhatsApp untuk ${i==null?void 0:i.name}`)}}const x=s.filter(a=>a.success).length,n=s.filter(a=>!a.success).length;d.success(`ðŸŽ‰ Selesai! ${x} WhatsApp terbuka${n>0?`, ${n} gagal`:""}`),_.selectedPayments=[]}catch(e){d.error("Gagal mengirim pesan massal"),console.error("Error sending bulk messages:",e)}finally{Y.value=!1}};return(e,s)=>{var x;const r=jt("router-link");return m(),c("div",Ma,[t("div",La,[s[26]||(s[26]=t("div",null,[t("h1",{class:"text-xl sm:text-2xl font-semibold text-gray-900"},"Link Pembayaran"),t("p",{class:"text-sm text-gray-500 mt-1"},"Kelola link pembayaran untuk kas kelas")],-1)),t("div",Ia,[b(r,{to:"/invoice",class:"btn-outline w-full sm:w-auto inline-flex items-center justify-center"},{default:Kt(()=>[b(p(ot),{class:"w-4 h-4 mr-2"}),s[22]||(s[22]=t("span",{class:"hidden sm:inline"},"Lihat Invoice",-1)),s[23]||(s[23]=t("span",{class:"sm:hidden"},"Invoice",-1))]),_:1,__:[22,23]}),t("button",{onClick:s[0]||(s[0]=n=>B.value=!0),class:"btn-primary w-full sm:w-auto"},[b(p(Tt),{class:"w-4 h-4 mr-2"}),s[24]||(s[24]=t("span",{class:"hidden sm:inline"},"Buat Link Bayar",-1)),s[25]||(s[25]=t("span",{class:"sm:hidden"},"Buat Link",-1))])])]),t("div",Ba,[t("nav",Ea,[t("button",{onClick:s[1]||(s[1]=n=>S.value="single"),class:U(["whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm",S.value==="single"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])}," Pembayaran Bulanan ",2),t("button",{onClick:s[2]||(s[2]=n=>S.value="multi"),class:U(["whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm",S.value==="multi"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])},s[27]||(s[27]=[I(" Multi-Bulan ",-1),t("span",{class:"ml-2 bg-green-100 text-green-800 text-xs font-medium px-2 py-0.5 rounded-full"}," NEW ",-1)]),2)])]),S.value==="single"?(m(),c("div",Na,[t("div",Ua,[t("div",Ra,[t("div",ja,[t("div",Ka,[b(p(Wt),{class:"w-6 h-6 text-primary-600"})]),t("div",Wa,[s[28]||(s[28]=t("p",{class:"text-sm font-medium text-gray-600"},"Total Link",-1)),t("p",Oa,o(p(v).paymentLinks.length),1)])])]),t("div",Ga,[t("div",Fa,[t("div",Va,[b(p(Ft),{class:"w-6 h-6 text-warning-600"})]),t("div",Ja,[s[29]||(s[29]=t("p",{class:"text-sm font-medium text-gray-600"},"Pending",-1)),t("p",Ya,o(Z.value.length),1)])])]),t("div",Ha,[t("div",qa,[t("div",Qa,[b(p(Ct),{class:"w-6 h-6 text-success-600"})]),t("div",za,[s[30]||(s[30]=t("p",{class:"text-sm font-medium text-gray-600"},"Selesai",-1)),t("p",Za,o(X.value.length),1)])])]),t("div",Xa,[t("div",tn,[t("div",en,[b(p(Ot),{class:"w-6 h-6 text-success-600"})]),t("div",sn,[s[31]||(s[31]=t("p",{class:"text-sm font-medium text-gray-600"},"Total Terkumpul",-1)),t("p",an,o(T(tt.value)),1)])])])]),t("div",nn,[s[37]||(s[37]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Generate Link Cepat",-1)),t("div",ln,[t("div",null,[s[32]||(s[32]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Jumlah",-1)),P(t("input",{"onUpdate:modelValue":s[3]||(s[3]=n=>f.amount=n),type:"number",min:"1",class:"input-field",placeholder:"Contoh: 50000"},null,512),[[J,f.amount,void 0,{number:!0}]])]),t("div",null,[s[33]||(s[33]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Keterangan",-1)),P(t("input",{"onUpdate:modelValue":s[4]||(s[4]=n=>f.description=n),type:"text",class:"input-field",placeholder:"Contoh: Kas Bulanan Februari"},null,512),[[J,f.description]])]),t("div",null,[s[35]||(s[35]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Target Siswa",-1)),P(t("select",{"onUpdate:modelValue":s[5]||(s[5]=n=>f.target=n),class:"input-field"},s[34]||(s[34]=[t("option",{value:"all"},"Semua Siswa",-1),t("option",{value:"unpaid"},"Siswa Belum Bayar",-1),t("option",{value:"selected"},"Pilih Manual",-1)]),512),[[R,f.target]])]),t("div",on,[t("button",{onClick:ct,disabled:!f.amount||!f.description||N.value,class:"btn-primary w-full"},o(N.value?"Generating...":"Generate Links"),9,rn)])]),f.target==="selected"?(m(),c("div",dn,[s[36]||(s[36]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Pilih Siswa",-1)),t("div",un,[(m(!0),c(M,null,L(p(v).students,n=>(m(),c("label",{key:n.id,class:"flex items-center space-x-2 p-2 border rounded-lg hover:bg-gray-50"},[P(t("input",{type:"checkbox",value:n.id,"onUpdate:modelValue":s[6]||(s[6]=a=>f.selectedStudents=a),class:"rounded"},null,8,cn),[[Dt,f.selectedStudents]]),t("span",mn,o(n.name),1)]))),128))])])):A("",!0)]),t("div",pn,[s[47]||(s[47]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Kirim Pesan WhatsApp Massal",-1)),s[48]||(s[48]=t("div",{class:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 mb-4"},[t("p",{class:"text-sm text-yellow-800"},[t("strong",null,"Catatan:"),I(" Pengiriman pesan langsung dari browser mungkin diblokir oleh CORS policy. Untuk production yang stabil, implementasikan API calls melalui backend server. ")])],-1)),t("div",gn,[t("div",null,[s[39]||(s[39]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Target Pesan",-1)),P(t("select",{"onUpdate:modelValue":s[7]||(s[7]=n=>_.target=n),class:"input-field"},s[38]||(s[38]=[t("option",{value:"pending"},"Link Pembayaran Pending",-1),t("option",{value:"all"},"Semua Link Pembayaran",-1),t("option",{value:"selected"},"Pilih Manual",-1)]),512),[[R,_.target]])]),t("div",null,[s[40]||(s[40]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Jeda Antar Pesan (menit)",-1)),P(t("input",{"onUpdate:modelValue":s[8]||(s[8]=n=>_.delayMinutes=n),type:"number",min:"1",max:"60",class:"input-field",placeholder:"1"},null,512),[[J,_.delayMinutes,void 0,{number:!0}]])]),t("div",bn,[s[42]||(s[42]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Template Pesan",-1)),P(t("select",{"onUpdate:modelValue":s[9]||(s[9]=n=>_.template=n),class:"input-field"},s[41]||(s[41]=[t("option",{value:"reminder"},"Pengingat Pembayaran",-1),t("option",{value:"custom"},"Pesan Kustom",-1)]),512),[[R,_.template]])])]),_.template==="custom"?(m(),c("div",xn,[s[43]||(s[43]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Pesan Kustom",-1)),P(t("textarea",{"onUpdate:modelValue":s[10]||(s[10]=n=>_.customMessage=n),rows:"4",class:"input-field",placeholder:"Tulis pesan kustom di sini..."},null,512),[[J,_.customMessage]]),s[44]||(s[44]=t("p",{class:"text-sm text-gray-500 mt-1"}," Gunakan {nama}, {jumlah}, {keterangan}, {link} untuk data dinamis ",-1))])):A("",!0),_.target==="selected"?(m(),c("div",yn,[s[45]||(s[45]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Pilih Link Pembayaran",-1)),t("div",hn,[(m(!0),c(M,null,L(p(v).paymentLinks,n=>{var a;return m(),c("label",{key:n.id,class:"flex items-center space-x-2 p-2 border rounded-lg hover:bg-gray-50"},[P(t("input",{type:"checkbox",value:n.id,"onUpdate:modelValue":s[11]||(s[11]=g=>_.selectedPayments=g),class:"rounded"},null,8,kn),[[Dt,_.selectedPayments]]),t("span",vn,o((a=n.student)==null?void 0:a.name)+" - "+o(T(n.amount))+" - "+o(n.description),1)])}),128))])])):A("",!0),t("div",fn,[t("div",_n,[t("span",wn,o(V().length),1),s[46]||(s[46]=I(" pesan akan dikirim ",-1))]),t("button",{onClick:l,disabled:Y.value||V().length===0,class:"btn-primary"},o(Y.value?"Mengirim...":"Kirim Pesan WhatsApp"),9,$n)])]),t("div",Pn,[t("div",An,[s[52]||(s[52]=t("h3",{class:"text-lg font-semibold text-gray-900"},"Daftar Link Pembayaran",-1)),t("div",Sn,[P(t("select",{"onUpdate:modelValue":s[12]||(s[12]=n=>E.value=n),class:"input-field w-full sm:w-auto"},s[49]||(s[49]=[t("option",{value:""},"Semua Status",-1),t("option",{value:"pending"},"Pending",-1),t("option",{value:"completed"},"Selesai",-1),t("option",{value:"expired"},"Expired",-1)]),512),[[R,E.value]]),t("button",{onClick:ht,class:"btn-secondary flex items-center",title:"Download PDF Report"},[b(p(Ut),{class:"w-4 h-4 mr-2"}),s[50]||(s[50]=t("span",{class:"hidden sm:inline"},"Download PDF",-1)),s[51]||(s[51]=t("span",{class:"sm:hidden"},"PDF",-1))])])]),t("div",Cn,[(m(!0),c(M,null,L(O.value,n=>{var a,g,i,k,w;return m(),c("div",{key:n.id,class:"bg-gray-50 rounded-lg p-4"},[t("div",Tn,[t("div",Dn,[t("div",Mn,[t("span",Ln,o((i=(g=(a=n.student)==null?void 0:a.nickname)==null?void 0:g.charAt(0))==null?void 0:i.toUpperCase()),1)]),t("div",null,[t("div",In,o((k=n.student)==null?void 0:k.name),1),t("div",Bn,o((w=n.student)==null?void 0:w.nickname),1)])]),t("span",{class:U(ut(n.status))},o(q(n.status)),3)]),t("div",En,[t("div",Nn,[s[53]||(s[53]=t("span",{class:"text-gray-600"},"Jumlah:",-1)),t("span",Un,o(T(n.amount)),1)]),t("div",Rn,[s[54]||(s[54]=t("span",{class:"text-gray-600"},"Keterangan:",-1)),t("span",jn,o(n.description),1)]),t("div",Kn,[s[55]||(s[55]=t("span",{class:"text-gray-600"},"Order ID:",-1)),t("span",Wn,o(n.order_id),1)]),t("div",On,[s[56]||(s[56]=t("span",{class:"text-gray-600"},"Dibuat:",-1)),t("span",Gn,o(et(n.created_at)),1)])]),t("div",Fn,[t("button",{onClick:$=>at(n),class:"flex items-center justify-center text-primary-600 hover:text-primary-900 py-2",title:"Copy Link"},[b(p(ft),{class:"w-4 h-4 mr-1"}),s[57]||(s[57]=t("span",{class:"text-xs"},"Copy",-1))],8,Vn),t("button",{onClick:$=>nt(n),class:"flex items-center justify-center text-success-600 hover:text-success-900 py-2",title:"Kirim via WhatsApp"},[b(p(F),{class:"w-4 h-4 mr-1"}),s[58]||(s[58]=t("span",{class:"text-xs"},"Kirim",-1))],8,Jn),t("button",{onClick:$=>xt(n),class:"flex items-center justify-center text-purple-600 hover:text-purple-900 py-2",title:"Lihat Invoice"},[b(p(ot),{class:"w-4 h-4 mr-1"}),s[59]||(s[59]=t("span",{class:"text-xs"},"Invoice",-1))],8,Yn),n.status==="pending"?(m(),c("button",{key:0,onClick:$=>gt(n),class:"flex items-center justify-center text-green-600 hover:text-green-900 py-2",title:"Tandai Lunas"},[b(p(Ct),{class:"w-4 h-4 mr-1"}),s[60]||(s[60]=t("span",{class:"text-xs"},"Lunas",-1))],8,Hn)):A("",!0),t("button",{onClick:$=>pt(n),class:"flex items-center justify-center text-warning-600 hover:text-warning-900 py-2",title:"Cek Status"},[b(p(Lt),{class:"w-4 h-4 mr-1"}),s[61]||(s[61]=t("span",{class:"text-xs"},"Cek",-1))],8,qn)]),t("div",Qn,[t("button",{onClick:$=>bt(n),class:"flex items-center justify-center text-red-600 hover:text-red-900 py-2 w-full"},[b(p(it),{class:"w-4 h-4 mr-1"}),s[62]||(s[62]=t("span",{class:"text-xs"},"Hapus",-1))],8,zn)])])}),128))]),t("div",Zn,[t("table",Xn,[s[63]||(s[63]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Siswa "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Order ID "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Keterangan "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Jumlah "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Dibuat "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Aksi ")])],-1)),t("tbody",tl,[(m(!0),c(M,null,L(O.value,n=>{var a,g,i,k,w;return m(),c("tr",{key:n.id},[t("td",el,[t("div",sl,[t("div",al,[t("span",nl,o((i=(g=(a=n.student)==null?void 0:a.nickname)==null?void 0:g.charAt(0))==null?void 0:i.toUpperCase()),1)]),t("div",null,[t("div",ll,o((k=n.student)==null?void 0:k.name),1),t("div",ol,o((w=n.student)==null?void 0:w.nickname),1)])])]),t("td",il,o(n.order_id),1),t("td",rl,o(n.description),1),t("td",dl,o(T(n.amount)),1),t("td",ul,[t("span",{class:U(ut(n.status))},o(q(n.status)),3)]),t("td",cl,o(et(n.created_at)),1),t("td",ml,[t("div",pl,[t("button",{onClick:$=>at(n),class:"text-primary-600 hover:text-primary-900",title:"Copy Link"},[b(p(ft),{class:"w-4 h-4"})],8,gl),t("button",{onClick:$=>nt(n),class:"text-success-600 hover:text-success-900",title:"Kirim via WhatsApp"},[b(p(F),{class:"w-4 h-4"})],8,bl),n.status==="pending"?(m(),c("button",{key:0,onClick:$=>gt(n),class:"text-green-600 hover:text-green-900",title:"Tandai Lunas"},[b(p(Ct),{class:"w-4 h-4"})],8,xl)):A("",!0),t("button",{onClick:$=>xt(n),class:"text-purple-600 hover:text-purple-900",title:"Lihat Invoice"},[b(p(ot),{class:"w-4 h-4"})],8,yl),t("button",{onClick:$=>pt(n),class:"text-warning-600 hover:text-warning-900",title:"Cek Status"},[b(p(Lt),{class:"w-4 h-4"})],8,hl),t("button",{onClick:$=>bt(n),class:"text-red-600 hover:text-red-900",title:"Hapus"},[b(p(it),{class:"w-4 h-4"})],8,kl)])])])}),128))])])]),O.value.length===0?(m(),c("div",vl,s[64]||(s[64]=[t("p",{class:"text-sm text-gray-500"},"Tidak ada link pembayaran yang ditemukan",-1)]))):A("",!0)]),B.value?(m(),c("div",fl,[t("div",_l,[s[69]||(s[69]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Buat Link Pembayaran",-1)),t("form",{onSubmit:Bt(st,["prevent"]),class:"space-y-4"},[t("div",null,[s[66]||(s[66]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Siswa",-1)),P(t("select",{"onUpdate:modelValue":s[13]||(s[13]=n=>C.studentId=n),required:"",class:"input-field"},[s[65]||(s[65]=t("option",{value:""},"Pilih Siswa",-1)),(m(!0),c(M,null,L(p(v).students,n=>(m(),c("option",{key:n.id,value:n.id},o(n.name)+" ("+o(n.nickname)+") ",9,wl))),128))],512),[[R,C.studentId]])]),t("div",null,[s[67]||(s[67]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Jumlah",-1)),P(t("input",{"onUpdate:modelValue":s[14]||(s[14]=n=>C.amount=n),type:"number",min:"1",required:"",class:"input-field",placeholder:"Masukkan jumlah"},null,512),[[J,C.amount,void 0,{number:!0}]])]),t("div",null,[s[68]||(s[68]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Keterangan",-1)),P(t("input",{"onUpdate:modelValue":s[15]||(s[15]=n=>C.description=n),type:"text",required:"",class:"input-field",placeholder:"Contoh: Kas bulanan Februari"},null,512),[[J,C.description]])]),t("div",$l,[t("button",{type:"button",onClick:s[16]||(s[16]=n=>B.value=!1),class:"btn-secondary"}," Batal "),t("button",{type:"submit",disabled:u.value,class:"btn-primary"},o(u.value?"Membuat...":"Buat Link"),9,Pl)])],32)])])):A("",!0),W.value&&y.value?(m(),c("div",Al,[t("div",Sl,[s[75]||(s[75]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Link Pembayaran",-1)),t("div",Cl,[t("div",null,[s[70]||(s[70]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Siswa",-1)),t("p",Tl,o((x=y.value.student)==null?void 0:x.name),1)]),t("div",null,[s[71]||(s[71]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Jumlah",-1)),t("p",Dl,o(T(y.value.amount)),1)]),t("div",null,[s[72]||(s[72]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Order ID",-1)),t("p",Ml,o(y.value.order_id),1)]),t("div",null,[s[73]||(s[73]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Link Pembayaran",-1)),t("div",Ll,[t("input",{value:y.value.payment_url,readonly:"",class:"input-field text-xs"},null,8,Il),t("button",{onClick:s[17]||(s[17]=n=>yt(y.value.payment_url)),class:"btn-secondary p-2"},[b(p(vt),{class:"w-4 h-4"})])])])]),t("div",Bl,[t("button",{onClick:s[18]||(s[18]=n=>W.value=!1),class:"btn-secondary"}," Tutup "),t("button",{onClick:s[19]||(s[19]=n=>mt(y.value)),class:"btn-success"},[b(p(F),{class:"w-4 h-4 mr-2"}),s[74]||(s[74]=I(" Kirim via WhatsApp ",-1))])])])])):A("",!0),H.value?(m(),c("div",El,[t("div",Nl,[s[79]||(s[79]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Tidak Dapat Mengirim Pesan",-1)),t("div",Ul,[s[77]||(s[77]=t("div",{class:"bg-yellow-50 border border-yellow-200 rounded-lg p-3"},[t("p",{class:"text-sm text-yellow-800"},[t("strong",null,"CORS Error:"),I(" Browser memblokir API call langsung ke StarSender. Untuk production, implementasikan API calls melalui backend server. ")])],-1)),t("div",null,[t("label",Rl,"Pesan untuk "+o(h.value.studentName)+":",1),t("textarea",{value:h.value.message,readonly:"",rows:"6",class:"input-field text-xs"},null,8,jl)]),t("div",null,[s[76]||(s[76]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Nomor WhatsApp:",-1)),t("div",Kl,[t("input",{value:h.value.phone,readonly:"",class:"input-field text-sm"},null,8,Wl),t("button",{onClick:s[20]||(s[20]=n=>yt(h.value.phone)),class:"btn-secondary p-2",title:"Copy nomor"},[b(p(vt),{class:"w-4 h-4"})])])]),s[78]||(s[78]=t("div",{class:"bg-blue-50 border border-blue-200 rounded-lg p-3"},[t("p",{class:"text-sm text-blue-800"},[t("strong",null,"Alternatif:"),I(" Copy pesan dan nomor di atas, lalu kirim manual melalui WhatsApp Web atau aplikasi WhatsApp. ")])],-1))]),t("div",Ol,[t("button",{onClick:_t,class:"btn-primary flex-1"}," Copy Pesan & Nomor "),t("button",{onClick:wt,class:"btn-success flex-1"}," Buka WhatsApp Web "),t("button",{onClick:s[21]||(s[21]=n=>H.value=!1),class:"btn-secondary"}," Tutup ")])])])):A("",!0)])):S.value==="multi"?(m(),c("div",Gl,[b(Da)])):A("",!0)])}}};export{eo as default};

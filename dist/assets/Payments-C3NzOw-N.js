import{c as m,E as c,l as t,r as D,Q as kt,J as tt,o as Ut,k as A,H as g,p as I,z as p,F as L,y as B,b as j,q as i,R as P,W as K,e as wt,x as Bt,S as Q,X as $t,K as Rt,A as jt,j as Kt,V as Dt}from"./vendor-Cn5j0SEu.js";import{b as It,u as Et,g as Wt,e as Ot,p as Gt}from"./index-Dl3Gqoma.js";import{r as Ct}from"./PlusIcon-Hols0ICP.js";import{r as Nt}from"./DocumentArrowDownIcon-CfkQcPq0.js";import{r as Mt}from"./EyeIcon-B8jtdIG5.js";import{r as Pt,a as it}from"./TrashIcon-8_Rw6v_G.js";import{r as At}from"./DocumentTextIcon-BLO7htXp.js";import{r as Ft}from"./ClockIcon-A7fuk63B.js";import{r as St}from"./CheckCircleIcon-9dtlsCvY.js";import{f as Vt,l as Jt}from"./index-BoRhMNJp.js";import"./excel-C9Ruqv6W.js";function Lt(J,_){return c(),m("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"})])}function H(J,_){return c(),m("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 12.76c0 1.6 1.123 2.994 2.707 3.227 1.087.16 2.185.283 3.293.369V21l4.076-4.076a1.526 1.526 0 0 1 1.037-.443 48.282 48.282 0 0 0 5.68-.494c1.584-.233 2.707-1.626 2.707-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0 0 12 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018Z"})])}function ft(J,_){return c(),m("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"})])}function vt(J,_){return c(),m("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13.19 8.688a4.5 4.5 0 0 1 1.242 7.244l-4.5 4.5a4.5 4.5 0 0 1-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5 0 0 0-6.364-6.364l-4.5 4.5a4.5 4.5 0 0 0 1.242 7.244"})])}const rt=()=>{const J=new Date,d=new Date(J.toLocaleString("en-US",{timeZone:"Asia/Jakarta"})).getHours();return d>=5&&d<11?"Selamat pagi":d>=11&&d<15?"Selamat siang":d>=15&&d<18?"Selamat sore":"Selamat malam"},dt=()=>new Date().toLocaleString("id-ID",{timeZone:"Asia/Jakarta",hour:"2-digit",minute:"2-digit"}),Yt={class:"space-y-6"},Ht={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0"},qt={class:"card p-6"},Qt={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},zt=["onClick"],Zt={class:"text-center"},Xt={key:0,class:"absolute -top-2 -right-2 bg-red-500 text-white text-xs px-2 py-1 rounded-full font-semibold"},te={class:"text-2xl"},ee={class:"text-xl font-bold text-gray-900 mb-2"},se={class:"text-sm text-gray-600 mb-3"},ae={class:"text-lg font-bold text-primary-600 mb-2"},ne={class:"text-xs text-gray-500 mb-3"},le={class:"text-xs text-gray-600 space-y-1"},oe={key:1,class:"mt-3"},ie={class:"bg-green-100 text-green-800 text-xs font-medium px-2 py-1 rounded-full"},re={class:"mt-6 pt-6 border-t border-gray-200"},de={class:"text-center"},ue={class:"card p-6"},me={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ce={class:"border rounded-lg p-4 bg-green-50"},pe={class:"text-sm space-y-1"},ge={class:"flex justify-between"},be={class:"font-semibold"},xe={class:"flex justify-between"},ye={class:"font-semibold"},he={class:"flex justify-between"},ke={class:"font-semibold"},fe={class:"card p-6"},ve={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4 space-y-2 sm:space-y-0"},_e={class:"flex space-x-2"},we={class:"hidden sm:block overflow-x-auto"},$e={class:"min-w-full divide-y divide-gray-200"},Pe={class:"bg-white divide-y divide-gray-200"},Ae={class:"px-6 py-4 whitespace-nowrap"},Se={class:"flex items-center"},Ce={class:"w-10 h-10 bg-primary-100 rounded-full flex items-center justify-center mr-3"},Te={class:"text-primary-600 font-semibold text-sm"},De={class:"text-sm font-medium text-gray-900"},Me={class:"text-sm text-gray-500"},Le={class:"px-6 py-4 whitespace-nowrap"},Be={class:"text-sm text-gray-900"},Ie={class:"text-sm text-gray-500"},Ee={key:0,class:"text-xs text-blue-600 mt-1"},Ne={class:"px-6 py-4 whitespace-nowrap"},Ue={class:"text-sm font-medium text-gray-900"},Re={class:"text-sm text-gray-500"},je={class:"px-6 py-4 whitespace-nowrap"},Ke={class:"w-full bg-gray-200 rounded-full h-2 mb-1"},We={class:"text-xs text-gray-500"},Oe={class:"px-6 py-4 whitespace-nowrap"},Ge={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},Fe={class:"flex items-center space-x-2"},Ve=["onClick"],Je=["onClick"],Ye=["onClick"],He=["onClick"],qe=["onClick"],Qe={class:"block sm:hidden space-y-4"},ze={class:"flex items-center justify-between mb-3"},Ze={class:"flex items-center"},Xe={class:"w-10 h-10 bg-primary-100 rounded-full flex items-center justify-center mr-3"},ts={class:"text-primary-600 font-semibold text-sm"},es={class:"font-medium text-sm"},ss={class:"text-gray-500 text-xs"},as={class:"space-y-2 text-sm"},ns={class:"w-full bg-gray-200 rounded-full h-2"},ls={class:"flex justify-between"},os={class:"flex justify-between"},is={class:"font-medium"},rs={class:"grid grid-cols-2 gap-2 mt-3 pt-3 border-t border-gray-200"},ds=["onClick"],us=["onClick"],ms=["onClick"],cs=["onClick"],ps={class:"flex justify-center mt-2"},gs=["onClick"],bs={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"},xs={class:"bg-white rounded-lg max-w-lg w-full mx-4 p-6 max-h-[90vh] overflow-y-auto"},ys={class:"text-lg font-semibold text-gray-900 mb-4"},hs=["value"],ks={class:"grid grid-cols-2 gap-4"},fs=["value"],vs=["value"],_s=["value"],ws={class:"border rounded-lg p-4 bg-blue-50"},$s={class:"space-y-3"},Ps={class:"flex items-start space-x-3"},As={class:"text-sm text-gray-600"},Ss={class:"flex items-start space-x-3"},Cs={class:"text-sm text-gray-600"},Ts={class:"flex items-start space-x-3"},Ds={class:"bg-gray-50 p-4 rounded-lg"},Ms={class:"space-y-1 text-sm"},Ls={class:"flex justify-between"},Bs={class:"flex justify-between"},Is={class:"flex justify-between font-bold border-t pt-1"},Es={class:"mt-3 pt-3 border-t border-gray-300"},Ns={class:"space-y-1 text-xs"},Us={key:0,class:"text-green-600"},Rs={key:1,class:"text-blue-600"},js={key:2,class:"text-purple-600 font-medium"},Ks={class:"flex justify-end space-x-3 pt-4"},Ws=["disabled"],Os={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"},Gs={class:"bg-white rounded-lg max-w-2xl w-full mx-4 p-6 max-h-[90vh] overflow-y-auto"},Fs={class:"space-y-6"},Vs={class:"flex items-center space-x-4"},Js={class:"w-16 h-16 bg-primary-100 rounded-full flex items-center justify-center"},Ys={class:"text-primary-600 font-semibold text-xl"},Hs={class:"text-lg font-medium text-gray-900"},qs={class:"text-sm text-gray-500"},Qs={class:"flex justify-between mb-2"},zs={class:"text-sm text-gray-500"},Zs={class:"w-full bg-gray-200 rounded-full h-3"},Xs={class:"flex justify-between mt-2 text-sm text-gray-600"},ta={class:"flex items-center justify-between mb-3"},ea={class:"grid grid-cols-1 md:grid-cols-2 gap-3"},sa={class:"flex items-center justify-between"},aa={class:"text-sm font-medium"},na={class:"flex items-center space-x-2"},la={key:0,class:"text-green-600 text-xs"},oa={key:1,class:"text-gray-500 text-xs"},ia=["onClick"],ra={class:"text-xs text-gray-600 mt-1"},da={key:0,class:"text-xs text-green-600 mt-1"},ua={key:0,class:"space-y-3"},ma={class:"flex items-center justify-between mb-2"},ca={class:"flex items-center space-x-2"},pa={class:"font-medium text-sm"},ga={class:"flex space-x-1"},ba=["onClick"],xa=["onClick"],ya={class:"text-xs text-gray-600 mb-2"},ha={class:"text-xs font-mono text-gray-500 bg-white px-2 py-1 rounded border"},ka={class:"mt-2 flex items-center space-x-2"},fa=["value"],va={key:1,class:"border rounded-lg p-3 bg-gray-50"},_a={class:"flex items-center space-x-2"},wa=["value"],$a={class:"flex flex-col space-y-3 pt-6 border-t"},Pa={class:"flex space-x-3"},Aa={key:0,class:"flex space-x-3"},Sa={class:"flex space-x-3"},Ca={__name:"MultiMonthPayment",setup(J){const _=It(),d=Et(),W=D(!1),O=D(!1),y=D(null),E=D(!1),R=D(""),r=kt({studentId:"",startMonth:new Date().getMonth()+1,year:new Date().getFullYear(),months:6,monthlyAmount:5e4,linkType:"both"}),C=D([]),G=tt(()=>_.students),w=[{value:1,label:"Januari"},{value:2,label:"Februari"},{value:3,label:"Maret"},{value:4,label:"April"},{value:5,label:"Mei"},{value:6,label:"Juni"},{value:7,label:"Juli"},{value:8,label:"Agustus"},{value:9,label:"September"},{value:10,label:"Oktober"},{value:11,label:"November"},{value:12,label:"Desember"}],M=[2024,2025,2026],$=[{months:3,label:"Paket Triwulan",amount:15e4,icon:"ðŸ“…",bgColor:"bg-blue-100",popular:!1,benefits:["Bayar 3 bulan","Lebih terjangkau","Fleksibel"],discount:null},{months:6,label:"Paket Semester",amount:3e5,icon:"ðŸŽ¯",bgColor:"bg-green-100",popular:!0,benefits:["Bayar 6 bulan","Paling populer","Hemat waktu"],discount:"REKOMENDASI"},{months:9,label:"Paket 3 Cawu",amount:45e4,icon:"â­",bgColor:"bg-purple-100",popular:!1,benefits:["Bayar 9 bulan","Hampir setahun","Praktis"],discount:null}],Y=tt(()=>R.value?C.value.filter(o=>o.status===R.value):C.value),k=o=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(o),N=o=>({pending:"Belum Bayar",partial:"Sebagian",completed:"Lunas"})[o]||o,ut=o=>{const s={pending:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800",partial:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800",completed:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800"};return s[o]||s.pending},z=()=>{if(!r.startMonth||!r.months)return"";const o=r.startMonth-1,s=(o+r.months-1)%12;return`${w[o].label} - ${w[s].label} ${r.year}`},et=()=>r.monthlyAmount*r.months,Z=o=>{r.months=o.months,r.monthlyAmount=5e4,W.value=!0},T=o=>["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"][(o-1)%12],X=()=>{W.value=!1,y.value=null,Object.assign(r,{studentId:"",startMonth:new Date().getMonth()+1,year:new Date().getFullYear(),months:6,monthlyAmount:5e4,linkType:"both"})},st=async()=>{var o;E.value=!0;try{await new Promise(f=>setTimeout(f,1e3));const s=G.value.find(f=>f.id===r.studentId),x=et();if(y.value){const f=y.value,l=C.value.findIndex(e=>e.id===f.id);if(l!==-1){const e={...f,student:s,period_label:z(),months:r.months,monthly_amount:r.monthlyAmount,total_amount:x,progress_percentage:Math.round(f.paid_amount/x*100),payment_url:`https://pakasir.zone.id/pay/uang-kas-kelas-1-ibnu-sina/${x}?order_id=${s.nickname.toUpperCase()}${f.id}`};C.value[l]=e,d.success(`âœ… Pembayaran ${s.name} berhasil diupdate!`)}}else{const f=`${s.nickname.toUpperCase()}${Date.now()}`,l=[];if(r.linkType==="individual"||r.linkType==="both")for(let n=1;n<=r.months;n++){const u=`${f}M${n.toString().padStart(2,"0")}`;l.push({id:`individual_${n}`,type:"individual",month:n,amount:r.monthlyAmount,order_id:u,url:`https://pakasir.zone.id/pay/uang-kas-kelas-1-ibnu-sina/${r.monthlyAmount}?order_id=${u}`,description:`Kas Bulan ke-${n} (${T(r.startMonth+n-1)})`})}if(r.linkType==="single"||r.linkType==="both"){const n=`${f}TOTAL`;l.push({id:"total",type:"total",amount:x,order_id:n,url:`https://pakasir.zone.id/pay/uang-kas-kelas-1-ibnu-sina/${x}?order_id=${n}`,description:`Kas ${r.months} Bulan Sekaligus`})}const e={id:Date.now().toString(),student:s,period_label:z(),months:r.months,monthly_amount:r.monthlyAmount,total_amount:x,paid_amount:0,progress_percentage:0,status:"pending",payment_url:((o=l[0])==null?void 0:o.url)||"",payment_links:l,link_type:r.linkType,month_details:[]};C.value.unshift(e);const a=l.length,b=r.linkType==="both"?"individual + total":r.linkType;d.success(`âœ… Multi-Month Payment berhasil dibuat!
${a} link ${b} telah digenerate`)}X()}catch(s){console.error("Error saving payment:",s),d.error("Gagal menyimpan pembayaran multi-bulan")}finally{E.value=!1}},at=o=>{y.value=o,O.value=!0},nt=async o=>{var s;try{const x=o.student,f=o.total_amount-o.paid_amount,l=o.progress_percentage,e=rt();let a=`ðŸ”” *REMINDER PEMBAYARAN MULTI-BULAN* ðŸ””

Assalamu'alaikum Wr. Wb.

${e} Bapak/Ibu orang tua dari *${x.name}* (${x.nickname}) ðŸ‘‹

Kami ingin mengingatkan mengenai status pembayaran kas kelas multi-bulan:

ðŸ“Š *STATUS PEMBAYARAN SAAT INI:*
ðŸ·ï¸ Periode: *${o.period_label}*
ðŸ’° Total Pembayaran: *${k(o.total_amount)}*
âœ… Sudah Dibayar: *${k(o.paid_amount)}*
â³ Sisa Pembayaran: *${k(f)}*
ðŸ“ˆ Progress: *${l}%*

`;o.status==="pending"?a+=`âš ï¸ *STATUS: BELUM ADA PEMBAYARAN*

Mohon segera lakukan pembayaran untuk periode *${o.period_label}*.

ðŸŽ¯ *PILIHAN PEMBAYARAN:*
${o.payment_links&&o.payment_links.length>1?`âœ… Bayar Sekaligus (lebih praktis)
âœ… Bayar Bertahap (lebih fleksibel)`:"âœ… Gunakan link pembayaran di bawah"}

`:o.status==="partial"&&(a+=`â³ *STATUS: PEMBAYARAN SEBAGIAN*

Terima kasih sudah melakukan pembayaran sebagian! ðŸ™
Mohon lanjutkan pembayaran untuk bulan-bulan berikutnya.

ðŸ’¡ *SISA PEMBAYARAN:*
Tinggal *${k(f)}* lagi untuk melengkapi pembayaran periode ini.

`),o.payment_links&&o.payment_links.length>0?(a+=`ðŸ”— *LINK PEMBAYARAN TERSEDIA:*

`,o.payment_links.forEach((n,u)=>{const v=n.type==="total"?"ðŸ’°":"ðŸ“…";a+=`${v} *${n.description}*
ðŸ’µ ${k(n.amount)}
ðŸ”— ${n.url}

`})):a+=`ðŸ”— *LINK PEMBAYARAN:*
${o.payment_url}

`,a+=`ðŸ’³ *METODE PEMBAYARAN:*
âœ… Scan QR Code QRIS
âœ… GoPay, OVO, DANA, ShopeePay
âœ… Transfer Bank (via QRIS)
âœ… Kartu Kredit/Debit

ðŸ“ž *BANTUAN & SUPPORT:*
Jika ada pertanyaan atau kesulitan dalam pembayaran, silakan hubungi bendahara kelas.

Terima kasih atas perhatian dan kerjasamanya! ðŸ™

Wassalamu'alaikum Wr. Wb.

---
*ðŸ“± Dikirim: ${e} (${dt()})*
*ðŸ¤– Sistem Kas Kelas Otomatis*
*ðŸ”” Pesan Reminder Otomatis*`;const b=`https://wa.me/${(s=x.phone)==null?void 0:s.replace(/\D/g,"").replace(/^0/,"62")}?text=${encodeURIComponent(a)}`;window.open(b,"_blank","noopener,noreferrer"),d.success(`ðŸ“¤ Reminder Premium dikirim ke ${x.name}!
ðŸ“Š Progress: ${l}%`,{timeout:5e3})}catch(x){console.error("Error sending reminder:",x),d.error("Gagal mengirim reminder")}},mt=async o=>{try{await navigator.clipboard.writeText(o.payment_url),d.success("Link berhasil disalin")}catch{d.error("Gagal menyalin link")}},lt=async o=>{try{await navigator.clipboard.writeText(o),d.success("Berhasil disalin")}catch{d.error("Gagal menyalin")}},ct=async o=>{await nt(o),O.value=!1},pt=async(o,s)=>{try{const x=(s==null?void 0:s.name)||"Siswa",f=(s==null?void 0:s.phone)||"",l=rt();let e=`ðŸŽ¯ *LINK PEMBAYARAN KAS KELAS* ðŸŽ¯

Assalamu'alaikum Wr. Wb.

${l} Bapak/Ibu orang tua dari *${x}* ðŸ‘‹

Dengan hormat, kami mengirimkan link pembayaran kas kelas untuk kemudahan Bapak/Ibu.

`;o.type==="total"?e+=`ðŸ’° *PEMBAYARAN SEKALIGUS*
ðŸ·ï¸ ${o.description.toUpperCase()}
ðŸ’µ Jumlah: *${k(o.amount)}*

âœ¨ *KEUNTUNGAN BAYAR SEKALIGUS:*
âœ… Lebih praktis dan efisien
âœ… Tidak perlu ingat jadwal bulanan
âœ… Sekali bayar, langsung lunas untuk beberapa bulan
âœ… Hemat waktu dan tenaga`:e+=`ðŸ“… *PEMBAYARAN BERTAHAP*
ðŸ·ï¸ ${o.description.toUpperCase()}
ðŸ’µ Jumlah: *${k(o.amount)}*

âœ¨ *KEUNTUNGAN BAYAR BERTAHAP:*
âœ… Lebih fleksibel sesuai budget
âœ… Bayar per bulan sesuai kemampuan
âœ… Bisa mulai kapan saja
âœ… Tidak memberatkan keuangan`,e+=`

ðŸ”— *LINK PEMBAYARAN:*
${o.url}

ðŸ’³ *METODE PEMBAYARAN TERSEDIA:*
âœ… Scan QR Code QRIS
âœ… GoPay, OVO, DANA, ShopeePay
âœ… Transfer Bank (via QRIS)
âœ… Kartu Kredit/Debit

ðŸ“± *CARA PEMBAYARAN:*
1. Klik link di atas
2. Pilih metode pembayaran
3. Scan QR Code atau ikuti instruksi
4. Selesai! Pembayaran otomatis tercatat

ðŸ“ž *BANTUAN:*
Jika ada kesulitan, silakan hubungi bendahara kelas.

Terima kasih atas kepercayaan dan kerjasamanya! ðŸ™

Wassalamu'alaikum Wr. Wb.

---
*ðŸ“ Order ID: \`${o.order_id}\`*
*ðŸ“± Dikirim: ${l} (${dt()})*
*ðŸ¤– Sistem Kas Kelas Otomatis*`;const b=`https://wa.me/${f.replace(/\D/g,"").replace(/^0/,"62")}?text=${encodeURIComponent(e)}`;window.open(b,"_blank","noopener,noreferrer"),d.success(`ðŸ“± Template Premium dikirim ke ${x}!
ðŸŽ¯ ${o.description}`,{timeout:4e3})}catch(x){console.error("Error opening WhatsApp:",x),d.error("Gagal membuka WhatsApp")}},gt=o=>new Date(o).toLocaleDateString("id-ID",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}),bt=async(o,s)=>{var x;if(confirm(`Tandai ${s.label} untuk ${(x=o.student)==null?void 0:x.name} sebagai LUNAS?

Jumlah: ${k(s.amount)}`))try{s.paid=!0,s.paid_at=new Date().toISOString();const f=o.month_details.filter(b=>b.paid).length,l=o.month_details.length,e=f*o.monthly_amount,a=Math.round(f/l*100);o.paid_amount=e,o.progress_percentage=a,a===100?o.status="completed":a>0&&(o.status="partial"),localStorage.setItem("multiMonthPayments",JSON.stringify(C.value)),d.success(`âœ… ${s.label} berhasil ditandai LUNAS!
Progress: ${a}%`,{timeout:4e3})}catch(f){console.error("Error marking month as paid:",f),d.error("Gagal menandai bulan sebagai lunas")}},xt=async o=>{var f,l;const s=o.month_details.filter(e=>!e.paid),x=s.length*o.monthly_amount;if(confirm(`Tandai SEMUA bulan yang belum lunas untuk ${(f=o.student)==null?void 0:f.name}?

${s.length} bulan Ã— ${k(o.monthly_amount)} = ${k(x)}`))try{const e=new Date().toISOString();s.forEach(a=>{a.paid=!0,a.paid_at=e}),o.paid_amount=o.total_amount,o.progress_percentage=100,o.status="completed",localStorage.setItem("multiMonthPayments",JSON.stringify(C.value)),d.success(`ðŸŽ‰ SEMUA bulan berhasil ditandai LUNAS!
${(l=o.student)==null?void 0:l.name} - ${k(x)}`,{timeout:5e3})}catch(e){console.error("Error marking all months as paid:",e),d.error("Gagal menandai semua bulan sebagai lunas")}},yt=async()=>{try{const o=ht(),s=window.open("","_blank");s&&(s.document.write(`
        <!DOCTYPE html>
        <html>
        <head>
          <title>Laporan Multi-Month Payment - ${new Date().toLocaleDateString("id-ID")}</title>
          <style>
            body { font-family: Arial, sans-serif; margin: 20px; }
            h1 { color: #1f2937; border-bottom: 2px solid #3b82f6; padding-bottom: 10px; }
            h2 { color: #374151; margin-top: 20px; }
            table { width: 100%; border-collapse: collapse; margin: 20px 0; }
            th, td { border: 1px solid #d1d5db; padding: 8px; text-align: left; }
            th { background-color: #f3f4f6; font-weight: bold; }
            .status-pending { color: #d97706; }
            .status-partial { color: #2563eb; }
            .status-completed { color: #059669; }
            .summary { background-color: #f9fafb; padding: 15px; border-radius: 8px; margin: 20px 0; }
            .footer { margin-top: 30px; text-align: center; color: #6b7280; font-size: 12px; }
            .progress-bar { width: 100%; height: 20px; background-color: #e5e7eb; border-radius: 10px; }
            .progress-fill { height: 100%; background-color: #3b82f6; border-radius: 10px; }
          </style>
        </head>
        <body>
          ${o}
          <div class="footer">
            Generated on ${new Date().toLocaleString("id-ID")} | Sistem Kas Kelas Multi-Month
          </div>
        </body>
        </html>
      `),s.document.close(),setTimeout(()=>{s.print()},500)),d.success("PDF Report Multi-Month siap untuk di-print/save")}catch(o){console.error("Error generating Multi-Month PDF:",o),d.error("Gagal membuat PDF report")}},ht=()=>{const o=Y.value,s=o.length,x=o.filter(n=>n.status==="completed").length,f=o.filter(n=>n.status==="partial").length,l=o.filter(n=>n.status==="pending").length,e=o.reduce((n,u)=>n+u.total_amount,0),a=o.reduce((n,u)=>n+u.paid_amount,0);let b="";return o.forEach(n=>{var v;const u=`status-${n.status}`;b+=`
      <tr>
        <td>${((v=n.student)==null?void 0:v.name)||"-"}</td>
        <td>${n.period_label}</td>
        <td>${n.months} bulan</td>
        <td>${k(n.total_amount)}</td>
        <td>${k(n.paid_amount)}</td>
        <td>
          <div class="progress-bar">
            <div class="progress-fill" style="width: ${n.progress_percentage}%"></div>
          </div>
          ${n.progress_percentage}%
        </td>
        <td class="${u}">${N(n.status)}</td>
      </tr>
    `}),`
    <h1>ðŸ“Š Laporan Pembayaran Multi-Bulan</h1>

    <div class="summary">
      <h2>ðŸ“ˆ Ringkasan</h2>
      <p><strong>Total Siswa:</strong> ${s}</p>
      <p><strong>Lunas:</strong> ${x} | <strong>Sebagian:</strong> ${f} | <strong>Pending:</strong> ${l}</p>
      <p><strong>Total Amount:</strong> ${k(e)}</p>
      <p><strong>Total Terbayar:</strong> ${k(a)}</p>
      <p><strong>Progress Keseluruhan:</strong> ${Math.round(a/e*100)||0}%</p>
      <p><strong>Filter Status:</strong> ${R.value||"Semua Status"}</p>
    </div>

    <h2>ðŸ“‹ Detail Pembayaran Multi-Bulan</h2>
    <table>
      <thead>
        <tr>
          <th>Nama Siswa</th>
          <th>Periode</th>
          <th>Durasi</th>
          <th>Total Amount</th>
          <th>Terbayar</th>
          <th>Progress</th>
          <th>Status</th>
        </tr>
      </thead>
      <tbody>
        ${b||'<tr><td colspan="7" style="text-align: center; color: #6b7280;">Tidak ada data pembayaran multi-bulan</td></tr>'}
      </tbody>
    </table>
  `},_t=async o=>{if(!o.payment_links||o.payment_links.length===0){d.warning("Tidak ada link pembayaran untuk dikirim");return}try{const s=o.student,x=(s==null?void 0:s.name)||"Siswa",f=(s==null?void 0:s.phone)||"",l=rt();let e=`ðŸŒŸ *PEMBAYARAN KAS KELAS MULTI-BULAN* ðŸŒŸ

Assalamu'alaikum Wr. Wb.

${l} Bapak/Ibu orang tua dari *${x}* ðŸ‘‹

Kami menyediakan *BEBERAPA OPSI PEMBAYARAN* yang dapat dipilih sesuai kemudahan Bapak/Ibu:

ðŸ“‹ *PILIHAN PEMBAYARAN TERSEDIA:*

`;o.payment_links.forEach((n,u)=>{const v=n.type==="total"?"ðŸ’°":"ðŸ“…",h=n.type==="total"?"SEKALIGUS":"BERTAHAP";e+=`${u+1}. ${v} *${n.description.toUpperCase()}*
   ðŸ’µ Jumlah: *${k(n.amount)}*
   ðŸ·ï¸ Tipe: ${h}
   ðŸ”— Link: ${n.url}
   ðŸ“ Order ID: \`${n.order_id}\`

`}),e+=`ðŸŽ¯ *KEUNTUNGAN SETIAP OPSI:*

${o.payment_links.find(n=>n.type==="total")?`ðŸ’° *Bayar Sekaligus:*
   âœ… Lebih praktis dan cepat
   âœ… Tidak perlu ingat jadwal bulanan
   âœ… Sekali bayar, langsung lunas

`:""}${o.payment_links.find(n=>n.type==="individual")?`ðŸ“… *Bayar Bertahap:*
   âœ… Lebih fleksibel sesuai budget
   âœ… Bayar per bulan sesuai kebutuhan
   âœ… Bisa mulai kapan saja

`:""}ðŸ’³ *METODE PEMBAYARAN TERSEDIA:*

âœ… Scan QR Code QRIS
âœ… GoPay, OVO, DANA, ShopeePay
âœ… Transfer Bank (via QRIS)
âœ… Kartu Kredit/Debit

ðŸ“ž *BANTUAN & SUPPORT:*
Jika ada pertanyaan atau kesulitan dalam pembayaran, silakan hubungi bendahara kelas.

Terima kasih atas kepercayaan dan kerjasamanya! ðŸ™

Wassalamu'alaikum Wr. Wb.

---
*ðŸ“± Dikirim: ${l} (${dt()})*
*ðŸ¤– Sistem Kas Kelas Otomatis*
*âš¡ Powered by Multi-Month Payment*`;const b=`https://wa.me/${f.replace(/\D/g,"").replace(/^0/,"62")}?text=${encodeURIComponent(e)}`;window.open(b,"_blank","noopener,noreferrer"),d.success(`ðŸ“± Template Premium dikirim ke ${x}!
ðŸŽ¯ ${o.payment_links.length} opsi pembayaran tersedia`,{timeout:5e3})}catch(s){console.error("Error opening WhatsApp:",s),d.error("Gagal membuka WhatsApp")}},ot=o=>{const s=o.student;r.studentId=s.id,r.months=o.months,r.monthlyAmount=o.monthly_amount;const x=new Date;r.startMonth=x.getMonth()+1,r.year=x.getFullYear(),y.value=o,W.value=!0,d.info(`Editing pembayaran untuk ${s.name}`)},q=o=>{if(confirm(`Yakin ingin menghapus pembayaran multi-bulan untuk ${o.student.name}?

Periode: ${o.period_label}
Total: ${k(o.total_amount)}`))try{const s=C.value.findIndex(x=>x.id===o.id);s!==-1?(C.value.splice(s,1),d.success(`âœ… Pembayaran ${o.student.name} berhasil dihapus`)):d.warning("Pembayaran tidak ditemukan")}catch(s){console.error("Error deleting payment:",s),d.error("Gagal menghapus pembayaran")}};return Ut(()=>{}),(o,s)=>{var x,f,l,e;return c(),m("div",Yt,[t("div",Ht,[s[19]||(s[19]=t("div",null,[t("h3",{class:"text-lg font-semibold text-gray-900"},"Pembayaran Multi-Bulan"),t("p",{class:"text-sm text-gray-500 mt-1"},"Buat link pembayaran untuk beberapa bulan sekaligus")],-1)),t("button",{onClick:s[0]||(s[0]=a=>W.value=!0),class:"btn-primary w-full sm:w-auto"},[g(p(Ct),{class:"w-4 h-4 mr-2"}),s[18]||(s[18]=I(" Buat Multi-Month ",-1))])]),t("div",qt,[s[23]||(s[23]=t("h4",{class:"text-lg font-medium text-gray-900 mb-4"},"ðŸŽ¯ Template Pembayaran Populer",-1)),t("div",Qt,[(c(),m(L,null,B($,a=>t("button",{key:a.months,onClick:b=>Z(a),class:"relative p-6 border-2 border-dashed border-gray-300 rounded-xl hover:border-primary-500 hover:bg-primary-50 transition-all duration-300 hover:shadow-lg group"},[t("div",Zt,[a.popular?(c(),m("div",Xt," POPULER ")):A("",!0),t("div",{class:j(["w-16 h-16 mx-auto mb-3 rounded-full flex items-center justify-center",a.bgColor])},[t("span",te,i(a.icon),1)],2),t("div",ee,i(a.label),1),t("div",se,i(a.months)+" Bulan Berturut-turut",1),t("div",ae,i(k(a.amount)),1),t("div",ne,i(a.months)+" Ã— "+i(k(5e4)),1),t("div",le,[(c(!0),m(L,null,B(a.benefits,b=>(c(),m("div",{key:b,class:"flex items-center justify-center"},[s[20]||(s[20]=t("span",{class:"text-green-500 mr-1"},"âœ“",-1)),I(" "+i(b),1)]))),128))]),a.discount?(c(),m("div",oe,[t("span",ie,i(a.discount),1)])):A("",!0)])],8,zt)),64))]),t("div",re,[t("div",de,[t("button",{onClick:s[1]||(s[1]=a=>W.value=!0),class:"inline-flex items-center px-6 py-3 border border-primary-300 rounded-lg text-primary-700 bg-primary-50 hover:bg-primary-100 transition-colors"},[g(p(Ct),{class:"w-5 h-5 mr-2"}),s[21]||(s[21]=I(" Buat Template Kustom ",-1))]),s[22]||(s[22]=t("p",{class:"text-sm text-gray-500 mt-2"},"Atau buat pembayaran dengan periode dan jumlah sesuai kebutuhan",-1))])])]),t("div",ue,[s[29]||(s[29]=t("h4",{class:"text-lg font-medium text-gray-900 mb-4"},"âš¡ Aksi Cepat",-1)),t("div",me,[s[28]||(s[28]=t("div",{class:"border rounded-lg p-4 bg-blue-50"},[t("h5",{class:"font-medium text-blue-900 mb-2"},"ðŸ’¡ Tips Marking Manual"),t("ul",{class:"text-sm text-blue-800 space-y-1"},[t("li",null,'â€¢ Klik tombol "âœ“ Tandai Lunas" untuk mark individual payment'),t("li",null,'â€¢ Gunakan "âœ“ Tandai Semua Lunas" untuk mark bulk dalam detail'),t("li",null,"â€¢ Progress akan otomatis terupdate"),t("li",null,"â€¢ Data tersimpan otomatis")])],-1)),t("div",ce,[s[27]||(s[27]=t("h5",{class:"font-medium text-green-900 mb-2"},"ðŸ“Š Status Overview",-1)),t("div",pe,[t("div",ge,[s[24]||(s[24]=t("span",{class:"text-green-700"},"Lunas:",-1)),t("span",be,i(C.value.filter(a=>a.status==="completed").length),1)]),t("div",xe,[s[25]||(s[25]=t("span",{class:"text-blue-700"},"Sebagian:",-1)),t("span",ye,i(C.value.filter(a=>a.status==="partial").length),1)]),t("div",he,[s[26]||(s[26]=t("span",{class:"text-yellow-700"},"Pending:",-1)),t("span",ke,i(C.value.filter(a=>a.status==="pending").length),1)])])])])]),t("div",fe,[t("div",ve,[s[33]||(s[33]=t("h4",{class:"text-lg font-medium text-gray-900"},"Pembayaran Multi-Bulan",-1)),t("div",_e,[P(t("select",{"onUpdate:modelValue":s[2]||(s[2]=a=>R.value=a),class:"input-field w-auto"},s[30]||(s[30]=[t("option",{value:""},"Semua Status",-1),t("option",{value:"pending"},"Pending",-1),t("option",{value:"partial"},"Sebagian",-1),t("option",{value:"completed"},"Lunas",-1)]),512),[[K,R.value]]),t("button",{onClick:yt,class:"btn-secondary flex items-center",title:"Download PDF Report"},[g(p(Nt),{class:"w-4 h-4 mr-2"}),s[31]||(s[31]=t("span",{class:"hidden sm:inline"},"Download PDF",-1)),s[32]||(s[32]=t("span",{class:"sm:hidden"},"PDF",-1))])])]),t("div",we,[t("table",$e,[s[34]||(s[34]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Siswa "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Periode "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Total "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Progress "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Aksi ")])],-1)),t("tbody",Pe,[(c(!0),m(L,null,B(Y.value,a=>{var b,n,u,v,h;return c(),m("tr",{key:a.id},[t("td",Ae,[t("div",Se,[t("div",Ce,[t("span",Te,i((u=(n=(b=a.student)==null?void 0:b.name)==null?void 0:n.charAt(0))==null?void 0:u.toUpperCase()),1)]),t("div",null,[t("div",De,i((v=a.student)==null?void 0:v.name),1),t("div",Me,i((h=a.student)==null?void 0:h.nickname),1)])])]),t("td",Le,[t("div",Be,i(a.period_label),1),t("div",Ie,i(a.months)+" bulan",1),a.payment_links?(c(),m("div",Ee,i(a.payment_links.length)+" link tersedia ",1)):A("",!0)]),t("td",Ne,[t("div",Ue,i(k(a.total_amount)),1),t("div",Re,i(k(a.monthly_amount))+"/bulan",1)]),t("td",je,[t("div",Ke,[t("div",{class:"bg-primary-600 h-2 rounded-full",style:wt({width:a.progress_percentage+"%"})},null,4)]),t("div",We,i(a.paid_amount)+"/"+i(a.total_amount)+" ("+i(a.progress_percentage)+"%) ",1)]),t("td",Oe,[t("span",{class:j(ut(a.status))},i(N(a.status)),3)]),t("td",Ge,[t("div",Fe,[t("button",{onClick:S=>at(a),class:"text-primary-600 hover:text-primary-900",title:"Lihat Detail"},[g(p(Mt),{class:"w-4 h-4"})],8,Ve),t("button",{onClick:S=>nt(a),class:"text-success-600 hover:text-success-900",title:"Kirim Reminder"},[g(p(H),{class:"w-4 h-4"})],8,Je),t("button",{onClick:S=>mt(a),class:"text-warning-600 hover:text-warning-900",title:"Copy Link"},[g(p(vt),{class:"w-4 h-4"})],8,Ye),t("button",{onClick:S=>ot(a),class:"text-blue-600 hover:text-blue-900",title:"Edit Pembayaran"},[g(p(Pt),{class:"w-4 h-4"})],8,He),t("button",{onClick:S=>q(a),class:"text-red-600 hover:text-red-900",title:"Hapus Pembayaran"},[g(p(it),{class:"w-4 h-4"})],8,qe)])])])}),128))])])]),t("div",Qe,[(c(!0),m(L,null,B(Y.value,a=>{var b,n,u,v;return c(),m("div",{key:a.id,class:"bg-gray-50 rounded-lg p-4"},[t("div",ze,[t("div",Ze,[t("div",Xe,[t("span",ts,i((u=(n=(b=a.student)==null?void 0:b.name)==null?void 0:n.charAt(0))==null?void 0:u.toUpperCase()),1)]),t("div",null,[t("div",es,i((v=a.student)==null?void 0:v.name),1),t("div",ss,i(a.period_label),1)])]),t("span",{class:j(ut(a.status))},i(N(a.status)),3)]),t("div",as,[t("div",ns,[t("div",{class:"bg-primary-600 h-2 rounded-full",style:wt({width:a.progress_percentage+"%"})},null,4)]),t("div",ls,[s[35]||(s[35]=t("span",{class:"text-gray-600"},"Progress:",-1)),t("span",null,i(a.progress_percentage)+"%",1)]),t("div",os,[s[36]||(s[36]=t("span",{class:"text-gray-600"},"Total:",-1)),t("span",is,i(k(a.total_amount)),1)])]),t("div",rs,[t("button",{onClick:h=>at(a),class:"flex items-center justify-center text-primary-600 py-2"},[g(p(Mt),{class:"w-4 h-4 mr-1"}),s[37]||(s[37]=t("span",{class:"text-xs"},"Detail",-1))],8,ds),t("button",{onClick:h=>nt(a),class:"flex items-center justify-center text-success-600 py-2"},[g(p(H),{class:"w-4 h-4 mr-1"}),s[38]||(s[38]=t("span",{class:"text-xs"},"Kirim",-1))],8,us),t("button",{onClick:h=>mt(a),class:"flex items-center justify-center text-warning-600 py-2"},[g(p(vt),{class:"w-4 h-4 mr-1"}),s[39]||(s[39]=t("span",{class:"text-xs"},"Copy",-1))],8,ms),t("button",{onClick:h=>ot(a),class:"flex items-center justify-center text-blue-600 py-2"},[g(p(Pt),{class:"w-4 h-4 mr-1"}),s[40]||(s[40]=t("span",{class:"text-xs"},"Edit",-1))],8,cs)]),t("div",ps,[t("button",{onClick:h=>q(a),class:"flex items-center justify-center text-red-600 py-2 w-full"},[g(p(it),{class:"w-4 h-4 mr-1"}),s[41]||(s[41]=t("span",{class:"text-xs"},"Hapus",-1))],8,gs)])])}),128))])]),W.value?(c(),m("div",bs,[t("div",xs,[t("h3",ys,i(y.value?"Edit Pembayaran Multi-Bulan":"Buat Pembayaran Multi-Bulan"),1),t("form",{onSubmit:Bt(st,["prevent"]),class:"space-y-4"},[t("div",null,[s[43]||(s[43]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Siswa",-1)),P(t("select",{"onUpdate:modelValue":s[3]||(s[3]=a=>r.studentId=a),required:"",class:"input-field"},[s[42]||(s[42]=t("option",{value:""},"Pilih Siswa",-1)),(c(!0),m(L,null,B(G.value,a=>(c(),m("option",{key:a.id,value:a.id},i(a.name)+" ("+i(a.nickname)+") ",9,hs))),128))],512),[[K,r.studentId]])]),t("div",ks,[t("div",null,[s[44]||(s[44]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Bulan Mulai",-1)),P(t("select",{"onUpdate:modelValue":s[4]||(s[4]=a=>r.startMonth=a),required:"",class:"input-field"},[(c(),m(L,null,B(w,a=>t("option",{key:a.value,value:a.value},i(a.label),9,fs)),64))],512),[[K,r.startMonth]])]),t("div",null,[s[45]||(s[45]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Tahun",-1)),P(t("select",{"onUpdate:modelValue":s[5]||(s[5]=a=>r.year=a),required:"",class:"input-field"},[(c(),m(L,null,B(M,a=>t("option",{key:a,value:a},i(a),9,vs)),64))],512),[[K,r.year]])])]),t("div",null,[s[46]||(s[46]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Jumlah Bulan",-1)),P(t("select",{"onUpdate:modelValue":s[6]||(s[6]=a=>r.months=a),required:"",class:"input-field",onChange:et},[(c(),m(L,null,B(12,a=>t("option",{key:a,value:a},i(a)+" bulan ",9,_s)),64))],544),[[K,r.months,void 0,{number:!0}]])]),t("div",null,[s[47]||(s[47]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Jumlah per Bulan",-1)),P(t("input",{"onUpdate:modelValue":s[7]||(s[7]=a=>r.monthlyAmount=a),type:"number",min:"1",required:"",class:"input-field",onInput:et,placeholder:"50000"},null,544),[[Q,r.monthlyAmount,void 0,{number:!0}]])]),t("div",ws,[s[53]||(s[53]=t("h4",{class:"font-medium text-blue-900 mb-3"},"ðŸ’³ Opsi Generate Link Pembayaran",-1)),t("div",$s,[t("label",Ps,[P(t("input",{"onUpdate:modelValue":s[8]||(s[8]=a=>r.linkType=a),type:"radio",value:"individual",class:"mt-1"},null,512),[[$t,r.linkType]]),t("div",null,[s[48]||(s[48]=t("div",{class:"font-medium text-gray-900"},"Link Individual per Bulan",-1)),t("div",As," Generate "+i(r.months)+" link terpisah ("+i(k(r.monthlyAmount))+" per link) ",1),s[49]||(s[49]=t("div",{class:"text-xs text-green-600 mt-1"}," âœ… Orang tua bisa bayar bertahap â€¢ âœ… Tracking per bulan lebih detail ",-1))])]),t("label",Ss,[P(t("input",{"onUpdate:modelValue":s[9]||(s[9]=a=>r.linkType=a),type:"radio",value:"single",class:"mt-1"},null,512),[[$t,r.linkType]]),t("div",null,[s[50]||(s[50]=t("div",{class:"font-medium text-gray-900"},"Link Total Sekaligus",-1)),t("div",Cs," Generate 1 link untuk total "+i(k(r.monthlyAmount*r.months)),1),s[51]||(s[51]=t("div",{class:"text-xs text-blue-600 mt-1"}," âœ… Pembayaran sekaligus â€¢ âœ… Lebih praktis untuk orang tua ",-1))])]),t("label",Ts,[P(t("input",{"onUpdate:modelValue":s[10]||(s[10]=a=>r.linkType=a),type:"radio",value:"both",class:"mt-1"},null,512),[[$t,r.linkType]]),s[52]||(s[52]=t("div",null,[t("div",{class:"font-medium text-gray-900"},"Kedua Opsi (Recommended)"),t("div",{class:"text-sm text-gray-600"}," Generate link individual + link total (orang tua pilih sendiri) "),t("div",{class:"text-xs text-purple-600 mt-1"}," âœ… Fleksibilitas maksimal â€¢ âœ… Cocok untuk semua preferensi ")],-1))])])]),t("div",Ds,[s[58]||(s[58]=t("h4",{class:"font-medium text-gray-900 mb-2"},"ðŸ“‹ Ringkasan Pembayaran",-1)),t("div",Ms,[t("div",Ls,[s[54]||(s[54]=t("span",null,"Periode:",-1)),t("span",null,i(r.months)+" bulan ("+i(z())+")",1)]),t("div",Bs,[s[55]||(s[55]=t("span",null,"Jumlah per Bulan:",-1)),t("span",null,i(k(r.monthlyAmount)),1)]),t("div",Is,[s[56]||(s[56]=t("span",null,"Total Pembayaran:",-1)),t("span",null,i(k(r.monthlyAmount*r.months)),1)])]),t("div",Es,[s[57]||(s[57]=t("h5",{class:"font-medium text-gray-900 mb-2"},"ðŸ”— Link yang akan dibuat:",-1)),t("div",Ns,[r.linkType==="individual"||r.linkType==="both"?(c(),m("div",Us," âœ… "+i(r.months)+" link individual ("+i(k(r.monthlyAmount))+" per link) ",1)):A("",!0),r.linkType==="single"||r.linkType==="both"?(c(),m("div",Rs," âœ… 1 link total sekaligus ("+i(k(r.monthlyAmount*r.months))+") ",1)):A("",!0),r.linkType==="both"?(c(),m("div",js," ðŸ’¡ Orang tua bisa pilih bayar bertahap atau sekaligus ")):A("",!0)])])]),t("div",Ks,[t("button",{type:"button",onClick:X,class:"btn-secondary"}," Batal "),t("button",{type:"submit",disabled:E.value,class:"btn-primary"},i(E.value?"Menyimpan...":y.value?"Update Pembayaran":"Buat Pembayaran"),9,Ws)])],32)])])):A("",!0),O.value&&y.value?(c(),m("div",Os,[t("div",Gs,[s[65]||(s[65]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Detail Pembayaran Multi-Bulan",-1)),t("div",Fs,[t("div",Vs,[t("div",Js,[t("span",Ys,i((l=(f=(x=y.value.student)==null?void 0:x.name)==null?void 0:f.charAt(0))==null?void 0:l.toUpperCase()),1)]),t("div",null,[t("h4",Hs,i((e=y.value.student)==null?void 0:e.name),1),t("p",qs,i(y.value.period_label),1)])]),t("div",null,[t("div",Qs,[s[59]||(s[59]=t("span",{class:"text-sm font-medium text-gray-700"},"Progress Pembayaran",-1)),t("span",zs,i(y.value.progress_percentage)+"%",1)]),t("div",Zs,[t("div",{class:"bg-primary-600 h-3 rounded-full",style:wt({width:y.value.progress_percentage+"%"})},null,4)]),t("div",Xs,[t("span",null,i(k(y.value.paid_amount)),1),t("span",null,i(k(y.value.total_amount)),1)])]),t("div",null,[t("div",ta,[s[60]||(s[60]=t("h5",{class:"font-medium text-gray-900"},"Detail per Bulan",-1)),y.value.month_details&&y.value.month_details.some(a=>!a.paid)?(c(),m("button",{key:0,onClick:s[11]||(s[11]=a=>xt(y.value)),class:"text-green-600 hover:text-green-800 text-xs px-3 py-1 border border-green-300 rounded-full hover:bg-green-50"}," âœ“ Tandai Semua Lunas ")):A("",!0)]),t("div",ea,[(c(!0),m(L,null,B(y.value.month_details,a=>(c(),m("div",{key:a.month,class:j(["p-3 border rounded-lg",a.paid?"bg-green-50 border-green-200":"bg-gray-50 border-gray-200"])},[t("div",sa,[t("span",aa,i(a.label),1),t("div",na,[a.paid?(c(),m("span",la,"âœ“ Lunas")):(c(),m("span",oa,"Belum bayar")),a.paid?A("",!0):(c(),m("button",{key:2,onClick:b=>bt(y.value,a),class:"text-green-600 hover:text-green-800 text-xs px-2 py-1 border border-green-300 rounded hover:bg-green-50",title:"Tandai Lunas"}," âœ“ Tandai Lunas ",8,ia))])]),t("div",ra,i(k(a.amount)),1),a.paid&&a.paid_at?(c(),m("div",da," Dibayar: "+i(gt(a.paid_at)),1)):A("",!0)],2))),128))])]),t("div",null,[s[61]||(s[61]=t("label",{class:"block text-sm font-medium text-gray-700 mb-3"},"ðŸ”— Link Pembayaran yang Dibuat",-1)),y.value.payment_links&&y.value.payment_links.length>0?(c(),m("div",ua,[(c(!0),m(L,null,B(y.value.payment_links,a=>(c(),m("div",{key:a.id,class:j(["border rounded-lg p-3",a.type==="total"?"bg-blue-50 border-blue-200":"bg-green-50 border-green-200"])},[t("div",ma,[t("div",ca,[t("span",{class:j([a.type==="total"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800","px-2 py-1 rounded-full text-xs font-medium"])},i(a.type==="total"?"ðŸ’° Total Sekaligus":`ðŸ“… Bulan ${a.month}`),3),t("span",pa,i(k(a.amount)),1)]),t("div",ga,[t("button",{onClick:b=>lt(a.url),class:"p-1 text-gray-500 hover:text-gray-700",title:"Copy Link"},[g(p(ft),{class:"w-4 h-4"})],8,ba),t("button",{onClick:b=>pt(a,y.value.student),class:"p-1 text-green-500 hover:text-green-700",title:"Kirim via WhatsApp"},[g(p(H),{class:"w-4 h-4"})],8,xa)])]),t("div",ya,i(a.description),1),t("div",ha," Order ID: "+i(a.order_id),1),t("div",ka,[t("input",{value:a.url,readonly:"",class:"input-field text-xs flex-1"},null,8,fa)])],2))),128))])):(c(),m("div",va,[t("div",_a,[t("input",{value:y.value.payment_url,readonly:"",class:"input-field text-xs flex-1"},null,8,wa),t("button",{onClick:s[12]||(s[12]=a=>lt(y.value.payment_url)),class:"btn-secondary p-2"},[g(p(ft),{class:"w-4 h-4"})])])]))])]),t("div",$a,[t("div",Pa,[t("button",{onClick:s[13]||(s[13]=a=>ot(y.value)),class:"btn-secondary text-blue-600 border-blue-300 hover:bg-blue-50 flex-1"},[g(p(Pt),{class:"w-4 h-4 mr-2"}),s[62]||(s[62]=I(" Edit ",-1))]),t("button",{onClick:s[14]||(s[14]=a=>q(y.value)),class:"btn-secondary text-red-600 border-red-300 hover:bg-red-50 flex-1"},[g(p(it),{class:"w-4 h-4 mr-2"}),s[63]||(s[63]=I(" Hapus ",-1))])]),y.value.payment_links&&y.value.payment_links.length>1?(c(),m("div",Aa,[t("button",{onClick:s[15]||(s[15]=a=>_t(y.value)),class:"btn-success flex-1"},[g(p(H),{class:"w-4 h-4 mr-2"}),I(" Kirim Semua Link ("+i(y.value.payment_links.length)+") ",1)])])):A("",!0),t("div",Sa,[t("button",{onClick:s[16]||(s[16]=a=>O.value=!1),class:"btn-secondary flex-1"}," Tutup "),t("button",{onClick:s[17]||(s[17]=a=>ct(y.value)),class:"btn-success flex-1"},[g(p(H),{class:"w-4 h-4 mr-2"}),s[64]||(s[64]=I(" Kirim Reminder ",-1))])])])])])):A("",!0)])}}},Ta={class:"space-y-6"},Da={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0"},Ma={class:"flex flex-col sm:flex-row gap-3"},La={class:"border-b border-gray-200"},Ba={class:"-mb-px flex space-x-8"},Ia={key:0},Ea={class:"grid grid-cols-1 md:grid-cols-4 gap-6"},Na={class:"card p-6"},Ua={class:"flex items-center"},Ra={class:"p-2 bg-primary-100 rounded-lg"},ja={class:"ml-4"},Ka={class:"text-2xl font-semibold text-gray-900"},Wa={class:"card p-6"},Oa={class:"flex items-center"},Ga={class:"p-2 bg-warning-100 rounded-lg"},Fa={class:"ml-4"},Va={class:"text-2xl font-semibold text-gray-900"},Ja={class:"card p-6"},Ya={class:"flex items-center"},Ha={class:"p-2 bg-success-100 rounded-lg"},qa={class:"ml-4"},Qa={class:"text-2xl font-semibold text-gray-900"},za={class:"card p-6"},Za={class:"flex items-center"},Xa={class:"p-2 bg-success-100 rounded-lg"},tn={class:"ml-4"},en={class:"text-2xl font-semibold text-gray-900"},sn={class:"card p-4 sm:p-6"},an={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4"},nn={class:"flex items-end"},ln=["disabled"],on={key:0,class:"mt-4"},rn={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-2 max-h-48 overflow-y-auto"},dn=["value"],un={class:"text-sm"},mn={class:"card p-4 sm:p-6"},cn={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4"},pn={class:"sm:col-span-2"},gn={key:0,class:"mt-4"},bn={key:1,class:"mt-4"},xn={class:"grid grid-cols-1 gap-2 max-h-48 overflow-y-auto"},yn=["value"],hn={class:"text-sm"},kn={class:"flex items-center justify-between mt-4 pt-4 border-t border-gray-200"},fn={class:"text-sm text-gray-600"},vn={class:"font-medium"},_n=["disabled"],wn={class:"card p-4 sm:p-6"},$n={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4 space-y-2 sm:space-y-0"},Pn={class:"flex space-x-2"},An={class:"block sm:hidden space-y-4"},Sn={class:"flex items-center justify-between mb-2"},Cn={class:"flex items-center"},Tn={class:"w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center mr-3"},Dn={class:"text-primary-600 font-semibold text-xs"},Mn={class:"font-medium text-sm"},Ln={class:"text-gray-500 text-xs"},Bn={class:"space-y-1 text-sm"},In={class:"flex justify-between"},En={class:"font-medium"},Nn={class:"flex justify-between"},Un={class:"text-right"},Rn={class:"flex justify-between"},jn={class:"font-mono text-xs"},Kn={class:"flex justify-between"},Wn={class:"text-xs"},On={class:"grid grid-cols-3 gap-2 mt-3 pt-3 border-t border-gray-200"},Gn=["onClick"],Fn=["onClick"],Vn=["onClick"],Jn=["onClick"],Yn=["onClick"],Hn={class:"flex justify-center mt-2"},qn=["onClick"],Qn={class:"hidden sm:block overflow-x-auto"},zn={class:"min-w-full divide-y divide-gray-200"},Zn={class:"bg-white divide-y divide-gray-200"},Xn={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},tl={class:"flex items-center"},el={class:"w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center mr-3"},sl={class:"text-primary-600 font-semibold text-xs"},al={class:"font-medium"},nl={class:"text-gray-500 text-xs"},ll={class:"px-6 py-4 whitespace-nowrap text-sm font-mono text-gray-500"},ol={class:"px-6 py-4 text-sm text-gray-500"},il={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},rl={class:"px-6 py-4 whitespace-nowrap"},dl={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},ul={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},ml={class:"flex items-center space-x-2"},cl=["onClick"],pl=["onClick"],gl=["onClick"],bl=["onClick"],xl=["onClick"],yl=["onClick"],hl={key:0,class:"text-center py-8"},kl={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"},fl={class:"bg-white rounded-lg max-w-md w-full mx-4 p-4 sm:p-6"},vl=["value"],_l={class:"flex justify-end space-x-3 pt-4"},wl=["disabled"],$l={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"},Pl={class:"bg-white rounded-lg max-w-md w-full mx-4 p-4 sm:p-6"},Al={class:"space-y-4"},Sl={class:"text-sm text-gray-900"},Cl={class:"text-sm text-gray-900"},Tl={class:"text-sm font-mono text-gray-900"},Dl={class:"flex items-center space-x-2"},Ml=["value"],Ll={class:"flex justify-end space-x-3 pt-4"},Bl={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"},Il={class:"bg-white rounded-lg max-w-md w-full mx-4 p-4 sm:p-6"},El={class:"space-y-4"},Nl={class:"block text-sm font-medium text-gray-700 mb-1"},Ul=["value"],Rl={class:"flex items-center space-x-2"},jl=["value"],Kl={class:"flex justify-between space-x-3 pt-4"},Wl={key:1},Xl={__name:"Payments",setup(J){const _=It(),d=Et(),W=Rt(),O=D(!1),y=D(!1),E=D(null),R=D(""),r=D(!1),C=D(!1),G=D("single"),w=kt({amount:5e4,description:"Kas Bulanan",target:"all",selectedStudents:[]}),M=kt({studentId:"",amount:0,description:""}),$=kt({target:"pending",delayMinutes:1,template:"reminder",customMessage:"",selectedPayments:[]}),Y=D(!1),k=D(!1),N=D({phone:"",message:"",studentName:""}),ut=tt(()=>_.paymentLinks.filter(l=>l.status==="pending")),z=tt(()=>_.paymentLinks.filter(l=>l.status==="completed")),et=tt(()=>z.value.reduce((l,e)=>l+e.amount,0)),Z=tt(()=>{let l=[..._.paymentLinks];return R.value&&(l=l.filter(e=>e.status===R.value)),l.sort((e,a)=>new Date(a.created_at)-new Date(e.created_at))}),T=l=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(l),X=l=>Vt(new Date(l),"dd MMM yyyy HH:mm",{locale:Jt}),st=l=>({pending:"Pending",completed:"Selesai",expired:"Expired"})[l]||l,at=l=>{const e={pending:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-warning-100 text-warning-800",completed:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-success-100 text-success-800",expired:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800"};return e[l]||e.pending},nt=async()=>{try{r.value=!0;let l=[];const e=new Date().toLocaleDateString("id-ID",{month:"long",year:"numeric"});if(w.target==="all")l=_.students;else if(w.target==="unpaid"){if(l=_.unpaidStudentsThisMonth,l.length===0){d.info(`Semua siswa sudah membayar untuk bulan ${e}! ðŸŽ‰`);return}}else w.target==="selected"&&(l=_.students.filter(a=>w.selectedStudents.includes(a.id)));if(l.length>5&&!confirm(`Generate link pembayaran untuk ${l.length} siswa?

Bulan: ${e}
Jumlah: ${T(w.amount)}
Keterangan: ${w.description}`))return;try{const a=await _.generateBulkPaymentLinks(w.amount,w.description,w.target==="unpaid"),b=a.filter(u=>u.success).length,n=a.filter(u=>!u.success).length;b>0&&d.success(`âœ… Berhasil generate ${b} link pembayaran untuk bulan ${e}`),n>0&&d.warning(`âš ï¸ ${n} link gagal dibuat (mungkin siswa sudah bayar)`)}catch(a){if(a.message.includes("sudah membayar"))d.info(a.message);else throw a}w.selectedStudents=[]}catch(l){d.error("Gagal generate link pembayaran: "+l.message),console.error("Error generating bulk links:",l)}finally{r.value=!1}},mt=async()=>{try{C.value=!0;const l=_.students.find(a=>a.id===M.studentId),e=new Date().toLocaleDateString("id-ID",{month:"long",year:"numeric"});await _.generatePaymentLink(M.studentId,M.amount,M.description),d.success(`âœ… Link pembayaran berhasil dibuat untuk ${l==null?void 0:l.name} - ${e}`),O.value=!1,M.studentId="",M.amount=0,M.description=""}catch(l){l.message.includes("sudah membayar")?d.warning(l.message):d.error("Gagal membuat link pembayaran: "+l.message),console.error("Error creating payment link:",l)}finally{C.value=!1}},lt=async l=>{try{if(navigator.clipboard&&window.isSecureContext)await navigator.clipboard.writeText(l.payment_url),d.success("Link berhasil disalin ke clipboard");else{const e=document.createElement("textarea");e.value=l.payment_url,e.style.position="fixed",e.style.left="-999999px",e.style.top="-999999px",document.body.appendChild(e),e.focus(),e.select();try{document.execCommand("copy"),d.success("Link berhasil disalin")}catch(a){d.error("Gagal menyalin link - silakan copy manual"),console.error("Copy fallback failed:",a)}finally{document.body.removeChild(e)}}}catch(e){console.error("Error copying payment link:",e),d.error("Gagal menyalin link - silakan copy manual")}},ct=l=>{pt(l)},pt=async l=>{try{const e=l.student,a=(e==null?void 0:e.name)||"Siswa",b=(e==null?void 0:e.nickname)||a,n=(e==null?void 0:e.phone)||"",u=rt(),v=`Assalamu'alaikum Wr. Wb.

${u} orang tua dari ${a}

Dengan hormat, kami ingin mengingatkan mengenai pembayaran uang kas kelas untuk bulan ini sebesar ${T(l.amount)}

Untuk kemudahan pembayaran, Bapak/Ibu dapat menggunakan link pembayaran berikut:

${l.payment_url}

Pembayaran dapat dilakukan melalui QRIS dengan berbagai metode:

âœ… Scan QR Code
âœ… E-Wallet (GoPay, OVO, DANA, ShopeePay)

Terima kasih atas perhatian dan kerjasamanya.

Wassalamu'alaikum Wr. Wb.

---
*Order ID: ${l.order_id}*
*Dikirim: ${u} (${dt()})*
*Sistem Kas Kelas Otomatis*`,S=`https://wa.me/${n.replace(/\D/g,"").replace(/^0/,"62")}?text=${encodeURIComponent(v)}`;window.open(S,"_blank","noopener,noreferrer"),d.success(`ðŸ“± WhatsApp terbuka untuk ${a}`,{timeout:3e3}),y.value=!1}catch(e){console.error("Error opening WhatsApp:",e),d.error("Gagal membuka WhatsApp")}},gt=async l=>{try{const e=await Gt.checkTransactionStatus(l.amount,l.order_id);e.status==="completed"&&l.status==="pending"?(await _.db.updatePaymentLink(l.id,{status:"completed",payment_method:e.payment_method||"qris",completed_at:e.completed_at||new Date().toISOString()}),await _.addTransaction({type:"income",amount:l.amount,description:l.description,student_id:l.student_id,payment_method:e.payment_method||"qris",order_id:l.order_id,status:"completed",created_at:e.completed_at||new Date().toISOString()}),d.success("Status pembayaran berhasil diupdate")):d.info(`Status: ${e.status||"pending"}`)}catch(e){d.error("Gagal mengecek status pembayaran"),console.error("Error checking payment status:",e)}},bt=async l=>{var a,b,n;const e=new Date().toLocaleDateString("id-ID",{month:"long",year:"numeric"});if(confirm(`Tandai pembayaran ${(a=l.student)==null?void 0:a.name} sebagai LUNAS untuk bulan ${e}?

Jumlah: ${T(l.amount)}
Keterangan: ${l.description}

âš ï¸ Ini akan menambah saldo kas kelas dan menandai siswa sebagai sudah bayar bulan ini.`))try{const u=new Date().toISOString(),v=u.slice(0,7);await _.updatePaymentLink(l.id,{status:"completed",payment_method:"manual",completed_at:u,month:v,notes:`Ditandai lunas secara manual oleh admin pada ${new Date().toLocaleString("id-ID")}`}),await _.addTransaction({type:"income",amount:l.amount,description:`${l.description} - ${e} (Manual)`,student_id:l.student_id,payment_method:"manual",order_id:l.order_id,status:"completed",month:v,created_at:u,notes:`Pembayaran manual - ${(b=l.student)==null?void 0:b.name} untuk ${e}`}),await _.fetchPaymentLinks(),await _.fetchTransactions();const h=_.currentBalance;d.success(`âœ… ${(n=l.student)==null?void 0:n.name} berhasil ditandai LUNAS!
ðŸ’° Saldo kas bertambah: ${T(l.amount)}
ðŸ“Š Saldo saat ini: ${T(h)}`,{timeout:6e3})}catch(u){console.error("Error marking payment as paid:",u),d.error("Gagal menandai pembayaran sebagai lunas: "+u.message)}},xt=async l=>{if(confirm("Apakah Anda yakin ingin menghapus link pembayaran ini?"))try{await _.deletePaymentLink(l.id),d.success("Link pembayaran berhasil dihapus")}catch(e){d.error("Gagal menghapus link pembayaran"),console.error("Error deleting payment link:",e)}},yt=l=>{l.order_id?W.push({path:"/invoice",query:{orderId:l.order_id}}):l.student_id?W.push({path:"/invoice",query:{studentId:l.student_id}}):d.warning("Data pembayaran tidak lengkap untuk membuat invoice")},ht=async l=>{try{if(navigator.clipboard&&window.isSecureContext)await navigator.clipboard.writeText(l),d.success("Berhasil disalin ke clipboard");else{const e=document.createElement("textarea");e.value=l,e.style.position="fixed",e.style.left="-999999px",e.style.top="-999999px",document.body.appendChild(e),e.focus(),e.select();try{document.execCommand("copy"),d.success("Berhasil disalin")}catch(a){d.warning("Silakan copy manual dari text yang ditampilkan"),console.error("Copy fallback failed:",a)}finally{document.body.removeChild(e)}}}catch(e){console.error("Error copying to clipboard:",e),d.error("Gagal menyalin - silakan copy manual")}},_t=async()=>{const l=`Nomor: ${N.value.phone}

Pesan:
${N.value.message}`;try{await navigator.clipboard.writeText(l),d.success("Pesan dan nomor berhasil disalin!")}catch{d.error("Gagal menyalin")}},ot=()=>{const l=N.value.phone.replace(/[^\d]/g,""),e=encodeURIComponent(N.value.message),a=`https://web.whatsapp.com/send?phone=${l}&text=${e}`;window.open(a,"_blank"),d.info("WhatsApp Web dibuka di tab baru")},q=()=>$.target==="pending"?_.paymentLinks.filter(l=>l.status==="pending"):$.target==="all"?_.paymentLinks:$.target==="selected"?_.paymentLinks.filter(l=>$.selectedPayments.includes(l.id)):[],o=l=>{var n;if($.template==="custom")return $.customMessage.replace("{nama}",((n=l.student)==null?void 0:n.name)||"").replace("{jumlah}",T(l.amount)).replace("{keterangan}",l.description).replace("{link}",l.payment_url);const e=l.student,a=(e==null?void 0:e.name)||"Siswa",b=rt();return`Assalamu'alaikum Wr. Wb.

${b} orang tua dari ${a}

Dengan hormat, kami ingin mengingatkan mengenai pembayaran uang kas kelas untuk bulan ini sebesar ${T(l.amount)}

Untuk kemudahan pembayaran, Bapak/Ibu dapat menggunakan link pembayaran berikut:

${l.payment_url}

Pembayaran dapat dilakukan melalui QRIS dengan berbagai metode:

âœ… Scan QR Code
âœ… E-Wallet (GoPay, OVO, DANA, ShopeePay)

Terima kasih atas perhatian dan kerjasamanya.

Wassalamu'alaikum Wr. Wb.

---
*Order ID: ${l.order_id}*
*Dikirim: ${b} (${dt()})*
*Sistem Kas Kelas Otomatis*`},s=async()=>{try{const l=x(),e=document.createElement("div");e.innerHTML=l,e.style.position="absolute",e.style.left="-9999px",e.style.top="-9999px",document.body.appendChild(e);const a=window.open("","_blank");a&&(a.document.write(`
        <!DOCTYPE html>
        <html>
        <head>
          <title>Laporan Pembayaran - ${new Date().toLocaleDateString("id-ID")}</title>
          <style>
            body { font-family: Arial, sans-serif; margin: 20px; }
            h1 { color: #1f2937; border-bottom: 2px solid #3b82f6; padding-bottom: 10px; }
            h2 { color: #374151; margin-top: 20px; }
            table { width: 100%; border-collapse: collapse; margin: 20px 0; }
            th, td { border: 1px solid #d1d5db; padding: 8px; text-align: left; }
            th { background-color: #f3f4f6; font-weight: bold; }
            .status-pending { color: #d97706; }
            .status-completed { color: #059669; }
            .status-expired { color: #dc2626; }
            .summary { background-color: #f9fafb; padding: 15px; border-radius: 8px; margin: 20px 0; }
            .footer { margin-top: 30px; text-align: center; color: #6b7280; font-size: 12px; }
          </style>
        </head>
        <body>
          ${l}
          <div class="footer">
            Generated on ${new Date().toLocaleString("id-ID")} | Sistem Kas Kelas
          </div>
        </body>
        </html>
      `),a.document.close(),setTimeout(()=>{a.print()},500)),document.body.removeChild(e),d.success("PDF Report siap untuk di-print/save")}catch(l){console.error("Error generating PDF:",l),d.error("Gagal membuat PDF report")}},x=()=>{const l=Z.value,e=l.reduce((u,v)=>u+v.amount,0),a=l.filter(u=>u.status==="pending").length,b=l.filter(u=>u.status==="completed").length;let n="";return l.forEach(u=>{var h,S;const v=`status-${u.status}`;n+=`
      <tr>
        <td>${((h=u.student)==null?void 0:h.name)||"-"}</td>
        <td>${((S=u.student)==null?void 0:S.nickname)||"-"}</td>
        <td>${T(u.amount)}</td>
        <td>${u.description}</td>
        <td class="${v}">${st(u.status)}</td>
        <td>${X(u.created_at)}</td>
        <td style="font-family: monospace; font-size: 11px;">${u.order_id}</td>
      </tr>
    `}),`
    <h1>ðŸ“Š Laporan Pembayaran Kas Kelas</h1>

    <div class="summary">
      <h2>ðŸ“ˆ Ringkasan</h2>
      <p><strong>Total Link Pembayaran:</strong> ${l.length}</p>
      <p><strong>Pending:</strong> ${a} | <strong>Selesai:</strong> ${b}</p>
      <p><strong>Total Amount:</strong> ${T(e)}</p>
      <p><strong>Filter Status:</strong> ${R.value||"Semua Status"}</p>
    </div>

    <h2>ðŸ“‹ Detail Pembayaran</h2>
    <table>
      <thead>
        <tr>
          <th>Nama Siswa</th>
          <th>Nickname</th>
          <th>Jumlah</th>
          <th>Keterangan</th>
          <th>Status</th>
          <th>Tanggal Dibuat</th>
          <th>Order ID</th>
        </tr>
      </thead>
      <tbody>
        ${n||'<tr><td colspan="7" style="text-align: center; color: #6b7280;">Tidak ada data pembayaran</td></tr>'}
      </tbody>
    </table>
  `},f=async()=>{try{Y.value=!0;const l=q();if(l.length===0){d.error("Tidak ada pembayaran yang dipilih");return}const e=[],a=$.delayMinutes*60;for(let u=0;u<l.length;u++){const v=l[u],h=v.student,S=(h==null?void 0:h.phone)||"";try{u>0&&await new Promise(V=>setTimeout(V,a*1e3));const F=o(v),Tt=`https://wa.me/${S.replace(/\D/g,"").replace(/^0/,"62")}?text=${encodeURIComponent(F)}`;if(u===0)window.open(Tt,"_blank","noopener,noreferrer");else{const V=document.createElement("a");V.href=Tt,V.target="_blank",V.rel="noopener noreferrer",V.style.display="none",document.body.appendChild(V),V.click(),document.body.removeChild(V)}e.push({recipient:h==null?void 0:h.name,phone:S,success:!0}),d.success(`ðŸ“± ${u+1}/${l.length} - WhatsApp dibuka untuk ${h==null?void 0:h.name}`,{timeout:2e3})}catch(F){e.push({recipient:h==null?void 0:h.name,phone:S,success:!1,error:F.message}),d.error(`âŒ Gagal membuka WhatsApp untuk ${h==null?void 0:h.name}`)}}const b=e.filter(u=>u.success).length,n=e.filter(u=>!u.success).length;d.success(`ðŸŽ‰ Selesai! ${b} WhatsApp terbuka${n>0?`, ${n} gagal`:""}`),$.selectedPayments=[]}catch(l){d.error("Gagal mengirim pesan massal"),console.error("Error sending bulk messages:",l)}finally{Y.value=!1}};return(l,e)=>{var b;const a=jt("router-link");return c(),m("div",Ta,[t("div",Da,[e[26]||(e[26]=t("div",null,[t("h1",{class:"text-xl sm:text-2xl font-semibold text-gray-900"},"Link Pembayaran"),t("p",{class:"text-sm text-gray-500 mt-1"},"Kelola link pembayaran untuk kas kelas")],-1)),t("div",Ma,[g(a,{to:"/invoice",class:"btn-outline w-full sm:w-auto inline-flex items-center justify-center"},{default:Kt(()=>[g(p(At),{class:"w-4 h-4 mr-2"}),e[22]||(e[22]=t("span",{class:"hidden sm:inline"},"Lihat Invoice",-1)),e[23]||(e[23]=t("span",{class:"sm:hidden"},"Invoice",-1))]),_:1,__:[22,23]}),t("button",{onClick:e[0]||(e[0]=n=>O.value=!0),class:"btn-primary w-full sm:w-auto"},[g(p(Ct),{class:"w-4 h-4 mr-2"}),e[24]||(e[24]=t("span",{class:"hidden sm:inline"},"Buat Link Bayar",-1)),e[25]||(e[25]=t("span",{class:"sm:hidden"},"Buat Link",-1))])])]),t("div",La,[t("nav",Ba,[t("button",{onClick:e[1]||(e[1]=n=>G.value="single"),class:j(["whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm",G.value==="single"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])}," Pembayaran Bulanan ",2),t("button",{onClick:e[2]||(e[2]=n=>G.value="multi"),class:j(["whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm",G.value==="multi"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])},e[27]||(e[27]=[I(" Multi-Bulan ",-1),t("span",{class:"ml-2 bg-green-100 text-green-800 text-xs font-medium px-2 py-0.5 rounded-full"}," NEW ",-1)]),2)])]),G.value==="single"?(c(),m("div",Ia,[t("div",Ea,[t("div",Na,[t("div",Ua,[t("div",Ra,[g(p(Wt),{class:"w-6 h-6 text-primary-600"})]),t("div",ja,[e[28]||(e[28]=t("p",{class:"text-sm font-medium text-gray-600"},"Total Link",-1)),t("p",Ka,i(p(_).paymentLinks.length),1)])])]),t("div",Wa,[t("div",Oa,[t("div",Ga,[g(p(Ft),{class:"w-6 h-6 text-warning-600"})]),t("div",Fa,[e[29]||(e[29]=t("p",{class:"text-sm font-medium text-gray-600"},"Pending",-1)),t("p",Va,i(ut.value.length),1)])])]),t("div",Ja,[t("div",Ya,[t("div",Ha,[g(p(St),{class:"w-6 h-6 text-success-600"})]),t("div",qa,[e[30]||(e[30]=t("p",{class:"text-sm font-medium text-gray-600"},"Selesai",-1)),t("p",Qa,i(z.value.length),1)])])]),t("div",za,[t("div",Za,[t("div",Xa,[g(p(Ot),{class:"w-6 h-6 text-success-600"})]),t("div",tn,[e[31]||(e[31]=t("p",{class:"text-sm font-medium text-gray-600"},"Total Terkumpul",-1)),t("p",en,i(T(et.value)),1)])])])]),t("div",sn,[e[37]||(e[37]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Generate Link Cepat",-1)),t("div",an,[t("div",null,[e[32]||(e[32]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Jumlah",-1)),P(t("input",{"onUpdate:modelValue":e[3]||(e[3]=n=>w.amount=n),type:"number",min:"1",class:"input-field",placeholder:"Contoh: 50000"},null,512),[[Q,w.amount,void 0,{number:!0}]])]),t("div",null,[e[33]||(e[33]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Keterangan",-1)),P(t("input",{"onUpdate:modelValue":e[4]||(e[4]=n=>w.description=n),type:"text",class:"input-field",placeholder:"Contoh: Kas Bulanan Februari"},null,512),[[Q,w.description]])]),t("div",null,[e[35]||(e[35]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Target Siswa",-1)),P(t("select",{"onUpdate:modelValue":e[5]||(e[5]=n=>w.target=n),class:"input-field"},e[34]||(e[34]=[t("option",{value:"all"},"Semua Siswa",-1),t("option",{value:"unpaid"},"Siswa Belum Bayar",-1),t("option",{value:"selected"},"Pilih Manual",-1)]),512),[[K,w.target]])]),t("div",nn,[t("button",{onClick:nt,disabled:!w.amount||!w.description||r.value,class:"btn-primary w-full"},i(r.value?"Generating...":"Generate Links"),9,ln)])]),w.target==="selected"?(c(),m("div",on,[e[36]||(e[36]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Pilih Siswa",-1)),t("div",rn,[(c(!0),m(L,null,B(p(_).students,n=>(c(),m("label",{key:n.id,class:"flex items-center space-x-2 p-2 border rounded-lg hover:bg-gray-50"},[P(t("input",{type:"checkbox",value:n.id,"onUpdate:modelValue":e[6]||(e[6]=u=>w.selectedStudents=u),class:"rounded"},null,8,dn),[[Dt,w.selectedStudents]]),t("span",un,i(n.name),1)]))),128))])])):A("",!0)]),t("div",mn,[e[47]||(e[47]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Kirim Pesan WhatsApp Massal",-1)),e[48]||(e[48]=t("div",{class:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 mb-4"},[t("p",{class:"text-sm text-yellow-800"},[t("strong",null,"Catatan:"),I(" Pengiriman pesan langsung dari browser mungkin diblokir oleh CORS policy. Untuk production yang stabil, implementasikan API calls melalui backend server. ")])],-1)),t("div",cn,[t("div",null,[e[39]||(e[39]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Target Pesan",-1)),P(t("select",{"onUpdate:modelValue":e[7]||(e[7]=n=>$.target=n),class:"input-field"},e[38]||(e[38]=[t("option",{value:"pending"},"Link Pembayaran Pending",-1),t("option",{value:"all"},"Semua Link Pembayaran",-1),t("option",{value:"selected"},"Pilih Manual",-1)]),512),[[K,$.target]])]),t("div",null,[e[40]||(e[40]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Jeda Antar Pesan (menit)",-1)),P(t("input",{"onUpdate:modelValue":e[8]||(e[8]=n=>$.delayMinutes=n),type:"number",min:"1",max:"60",class:"input-field",placeholder:"1"},null,512),[[Q,$.delayMinutes,void 0,{number:!0}]])]),t("div",pn,[e[42]||(e[42]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Template Pesan",-1)),P(t("select",{"onUpdate:modelValue":e[9]||(e[9]=n=>$.template=n),class:"input-field"},e[41]||(e[41]=[t("option",{value:"reminder"},"Pengingat Pembayaran",-1),t("option",{value:"custom"},"Pesan Kustom",-1)]),512),[[K,$.template]])])]),$.template==="custom"?(c(),m("div",gn,[e[43]||(e[43]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Pesan Kustom",-1)),P(t("textarea",{"onUpdate:modelValue":e[10]||(e[10]=n=>$.customMessage=n),rows:"4",class:"input-field",placeholder:"Tulis pesan kustom di sini..."},null,512),[[Q,$.customMessage]]),e[44]||(e[44]=t("p",{class:"text-sm text-gray-500 mt-1"}," Gunakan {nama}, {jumlah}, {keterangan}, {link} untuk data dinamis ",-1))])):A("",!0),$.target==="selected"?(c(),m("div",bn,[e[45]||(e[45]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Pilih Link Pembayaran",-1)),t("div",xn,[(c(!0),m(L,null,B(p(_).paymentLinks,n=>{var u;return c(),m("label",{key:n.id,class:"flex items-center space-x-2 p-2 border rounded-lg hover:bg-gray-50"},[P(t("input",{type:"checkbox",value:n.id,"onUpdate:modelValue":e[11]||(e[11]=v=>$.selectedPayments=v),class:"rounded"},null,8,yn),[[Dt,$.selectedPayments]]),t("span",hn,i((u=n.student)==null?void 0:u.name)+" - "+i(T(n.amount))+" - "+i(n.description),1)])}),128))])])):A("",!0),t("div",kn,[t("div",fn,[t("span",vn,i(q().length),1),e[46]||(e[46]=I(" pesan akan dikirim ",-1))]),t("button",{onClick:f,disabled:Y.value||q().length===0,class:"btn-primary"},i(Y.value?"Mengirim...":"Kirim Pesan WhatsApp"),9,_n)])]),t("div",wn,[t("div",$n,[e[52]||(e[52]=t("h3",{class:"text-lg font-semibold text-gray-900"},"Daftar Link Pembayaran",-1)),t("div",Pn,[P(t("select",{"onUpdate:modelValue":e[12]||(e[12]=n=>R.value=n),class:"input-field w-full sm:w-auto"},e[49]||(e[49]=[t("option",{value:""},"Semua Status",-1),t("option",{value:"pending"},"Pending",-1),t("option",{value:"completed"},"Selesai",-1),t("option",{value:"expired"},"Expired",-1)]),512),[[K,R.value]]),t("button",{onClick:s,class:"btn-secondary flex items-center",title:"Download PDF Report"},[g(p(Nt),{class:"w-4 h-4 mr-2"}),e[50]||(e[50]=t("span",{class:"hidden sm:inline"},"Download PDF",-1)),e[51]||(e[51]=t("span",{class:"sm:hidden"},"PDF",-1))])])]),t("div",An,[(c(!0),m(L,null,B(Z.value,n=>{var u,v,h,S,F;return c(),m("div",{key:n.id,class:"bg-gray-50 rounded-lg p-4"},[t("div",Sn,[t("div",Cn,[t("div",Tn,[t("span",Dn,i((h=(v=(u=n.student)==null?void 0:u.nickname)==null?void 0:v.charAt(0))==null?void 0:h.toUpperCase()),1)]),t("div",null,[t("div",Mn,i((S=n.student)==null?void 0:S.name),1),t("div",Ln,i((F=n.student)==null?void 0:F.nickname),1)])]),t("span",{class:j(at(n.status))},i(st(n.status)),3)]),t("div",Bn,[t("div",In,[e[53]||(e[53]=t("span",{class:"text-gray-600"},"Jumlah:",-1)),t("span",En,i(T(n.amount)),1)]),t("div",Nn,[e[54]||(e[54]=t("span",{class:"text-gray-600"},"Keterangan:",-1)),t("span",Un,i(n.description),1)]),t("div",Rn,[e[55]||(e[55]=t("span",{class:"text-gray-600"},"Order ID:",-1)),t("span",jn,i(n.order_id),1)]),t("div",Kn,[e[56]||(e[56]=t("span",{class:"text-gray-600"},"Dibuat:",-1)),t("span",Wn,i(X(n.created_at)),1)])]),t("div",On,[t("button",{onClick:U=>lt(n),class:"flex items-center justify-center text-primary-600 hover:text-primary-900 py-2",title:"Copy Link"},[g(p(vt),{class:"w-4 h-4 mr-1"}),e[57]||(e[57]=t("span",{class:"text-xs"},"Copy",-1))],8,Gn),t("button",{onClick:U=>ct(n),class:"flex items-center justify-center text-success-600 hover:text-success-900 py-2",title:"Kirim via WhatsApp"},[g(p(H),{class:"w-4 h-4 mr-1"}),e[58]||(e[58]=t("span",{class:"text-xs"},"Kirim",-1))],8,Fn),t("button",{onClick:U=>yt(n),class:"flex items-center justify-center text-purple-600 hover:text-purple-900 py-2",title:"Lihat Invoice"},[g(p(At),{class:"w-4 h-4 mr-1"}),e[59]||(e[59]=t("span",{class:"text-xs"},"Invoice",-1))],8,Vn),n.status==="pending"?(c(),m("button",{key:0,onClick:U=>bt(n),class:"flex items-center justify-center text-green-600 hover:text-green-900 py-2",title:"Tandai Lunas"},[g(p(St),{class:"w-4 h-4 mr-1"}),e[60]||(e[60]=t("span",{class:"text-xs"},"Lunas",-1))],8,Jn)):A("",!0),t("button",{onClick:U=>gt(n),class:"flex items-center justify-center text-warning-600 hover:text-warning-900 py-2",title:"Cek Status"},[g(p(Lt),{class:"w-4 h-4 mr-1"}),e[61]||(e[61]=t("span",{class:"text-xs"},"Cek",-1))],8,Yn)]),t("div",Hn,[t("button",{onClick:U=>xt(n),class:"flex items-center justify-center text-red-600 hover:text-red-900 py-2 w-full"},[g(p(it),{class:"w-4 h-4 mr-1"}),e[62]||(e[62]=t("span",{class:"text-xs"},"Hapus",-1))],8,qn)])])}),128))]),t("div",Qn,[t("table",zn,[e[63]||(e[63]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Siswa "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Order ID "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Keterangan "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Jumlah "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Dibuat "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Aksi ")])],-1)),t("tbody",Zn,[(c(!0),m(L,null,B(Z.value,n=>{var u,v,h,S,F;return c(),m("tr",{key:n.id},[t("td",Xn,[t("div",tl,[t("div",el,[t("span",sl,i((h=(v=(u=n.student)==null?void 0:u.nickname)==null?void 0:v.charAt(0))==null?void 0:h.toUpperCase()),1)]),t("div",null,[t("div",al,i((S=n.student)==null?void 0:S.name),1),t("div",nl,i((F=n.student)==null?void 0:F.nickname),1)])])]),t("td",ll,i(n.order_id),1),t("td",ol,i(n.description),1),t("td",il,i(T(n.amount)),1),t("td",rl,[t("span",{class:j(at(n.status))},i(st(n.status)),3)]),t("td",dl,i(X(n.created_at)),1),t("td",ul,[t("div",ml,[t("button",{onClick:U=>lt(n),class:"text-primary-600 hover:text-primary-900",title:"Copy Link"},[g(p(vt),{class:"w-4 h-4"})],8,cl),t("button",{onClick:U=>ct(n),class:"text-success-600 hover:text-success-900",title:"Kirim via WhatsApp"},[g(p(H),{class:"w-4 h-4"})],8,pl),n.status==="pending"?(c(),m("button",{key:0,onClick:U=>bt(n),class:"text-green-600 hover:text-green-900",title:"Tandai Lunas"},[g(p(St),{class:"w-4 h-4"})],8,gl)):A("",!0),t("button",{onClick:U=>yt(n),class:"text-purple-600 hover:text-purple-900",title:"Lihat Invoice"},[g(p(At),{class:"w-4 h-4"})],8,bl),t("button",{onClick:U=>gt(n),class:"text-warning-600 hover:text-warning-900",title:"Cek Status"},[g(p(Lt),{class:"w-4 h-4"})],8,xl),t("button",{onClick:U=>xt(n),class:"text-red-600 hover:text-red-900",title:"Hapus"},[g(p(it),{class:"w-4 h-4"})],8,yl)])])])}),128))])])]),Z.value.length===0?(c(),m("div",hl,e[64]||(e[64]=[t("p",{class:"text-sm text-gray-500"},"Tidak ada link pembayaran yang ditemukan",-1)]))):A("",!0)]),O.value?(c(),m("div",kl,[t("div",fl,[e[69]||(e[69]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Buat Link Pembayaran",-1)),t("form",{onSubmit:Bt(mt,["prevent"]),class:"space-y-4"},[t("div",null,[e[66]||(e[66]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Siswa",-1)),P(t("select",{"onUpdate:modelValue":e[13]||(e[13]=n=>M.studentId=n),required:"",class:"input-field"},[e[65]||(e[65]=t("option",{value:""},"Pilih Siswa",-1)),(c(!0),m(L,null,B(p(_).students,n=>(c(),m("option",{key:n.id,value:n.id},i(n.name)+" ("+i(n.nickname)+") ",9,vl))),128))],512),[[K,M.studentId]])]),t("div",null,[e[67]||(e[67]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Jumlah",-1)),P(t("input",{"onUpdate:modelValue":e[14]||(e[14]=n=>M.amount=n),type:"number",min:"1",required:"",class:"input-field",placeholder:"Masukkan jumlah"},null,512),[[Q,M.amount,void 0,{number:!0}]])]),t("div",null,[e[68]||(e[68]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Keterangan",-1)),P(t("input",{"onUpdate:modelValue":e[15]||(e[15]=n=>M.description=n),type:"text",required:"",class:"input-field",placeholder:"Contoh: Kas bulanan Februari"},null,512),[[Q,M.description]])]),t("div",_l,[t("button",{type:"button",onClick:e[16]||(e[16]=n=>O.value=!1),class:"btn-secondary"}," Batal "),t("button",{type:"submit",disabled:C.value,class:"btn-primary"},i(C.value?"Membuat...":"Buat Link"),9,wl)])],32)])])):A("",!0),y.value&&E.value?(c(),m("div",$l,[t("div",Pl,[e[75]||(e[75]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Link Pembayaran",-1)),t("div",Al,[t("div",null,[e[70]||(e[70]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Siswa",-1)),t("p",Sl,i((b=E.value.student)==null?void 0:b.name),1)]),t("div",null,[e[71]||(e[71]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Jumlah",-1)),t("p",Cl,i(T(E.value.amount)),1)]),t("div",null,[e[72]||(e[72]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Order ID",-1)),t("p",Tl,i(E.value.order_id),1)]),t("div",null,[e[73]||(e[73]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Link Pembayaran",-1)),t("div",Dl,[t("input",{value:E.value.payment_url,readonly:"",class:"input-field text-xs"},null,8,Ml),t("button",{onClick:e[17]||(e[17]=n=>ht(E.value.payment_url)),class:"btn-secondary p-2"},[g(p(ft),{class:"w-4 h-4"})])])])]),t("div",Ll,[t("button",{onClick:e[18]||(e[18]=n=>y.value=!1),class:"btn-secondary"}," Tutup "),t("button",{onClick:e[19]||(e[19]=n=>pt(E.value)),class:"btn-success"},[g(p(H),{class:"w-4 h-4 mr-2"}),e[74]||(e[74]=I(" Kirim via WhatsApp ",-1))])])])])):A("",!0),k.value?(c(),m("div",Bl,[t("div",Il,[e[79]||(e[79]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Tidak Dapat Mengirim Pesan",-1)),t("div",El,[e[77]||(e[77]=t("div",{class:"bg-yellow-50 border border-yellow-200 rounded-lg p-3"},[t("p",{class:"text-sm text-yellow-800"},[t("strong",null,"CORS Error:"),I(" Browser memblokir API call langsung ke StarSender. Untuk production, implementasikan API calls melalui backend server. ")])],-1)),t("div",null,[t("label",Nl,"Pesan untuk "+i(N.value.studentName)+":",1),t("textarea",{value:N.value.message,readonly:"",rows:"6",class:"input-field text-xs"},null,8,Ul)]),t("div",null,[e[76]||(e[76]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Nomor WhatsApp:",-1)),t("div",Rl,[t("input",{value:N.value.phone,readonly:"",class:"input-field text-sm"},null,8,jl),t("button",{onClick:e[20]||(e[20]=n=>ht(N.value.phone)),class:"btn-secondary p-2",title:"Copy nomor"},[g(p(ft),{class:"w-4 h-4"})])])]),e[78]||(e[78]=t("div",{class:"bg-blue-50 border border-blue-200 rounded-lg p-3"},[t("p",{class:"text-sm text-blue-800"},[t("strong",null,"Alternatif:"),I(" Copy pesan dan nomor di atas, lalu kirim manual melalui WhatsApp Web atau aplikasi WhatsApp. ")])],-1))]),t("div",Kl,[t("button",{onClick:_t,class:"btn-primary flex-1"}," Copy Pesan & Nomor "),t("button",{onClick:ot,class:"btn-success flex-1"}," Buka WhatsApp Web "),t("button",{onClick:e[21]||(e[21]=n=>k.value=!1),class:"btn-secondary"}," Tutup ")])])])):A("",!0)])):G.value==="multi"?(c(),m("div",Wl,[g(Ca)])):A("",!0)])}}};export{Xl as default};

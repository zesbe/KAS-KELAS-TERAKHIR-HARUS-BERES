const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./Login-DIYFR6uv.js","./vendor-Cn5j0SEu.js","./EyeIcon-B8jtdIG5.js","./InformationCircleIcon-BbkVrAyu.js","./excel-C9Ruqv6W.js","./Dashboard-DokizXmD.js","./_plugin-vue_export-helper-DlAUqK2U.js","./DocumentArrowDownIcon-CfkQcPq0.js","./CheckCircleIcon-9dtlsCvY.js","./index-BoRhMNJp.js","./Dashboard-4UH4po2c.css","./Students-BNZCigc5.js","./PlusIcon-Hols0ICP.js","./TrashIcon-8_Rw6v_G.js","./Transactions-65cPOpfd.js","./ClockIcon-A7fuk63B.js","./Expenses-D5CLBPH8.js","./export-DbUzqSZp.js","./Payments-CU5aYowg.js","./DocumentTextIcon-BLO7htXp.js","./Campaigns-CKuDMiti.js","./Reports-n8FnoaHR.js","./charts-D38yv1J6.js","./PrinterIcon-F7orX_Kk.js","./Settings-BYraIPSM.js","./paymentNotificationService-BKrs64aB.js","./PaymentWebhook-pB1P2fQn.js","./Invoice-D3zJQBLl.js","./Invoice-DRS4zok4.css"])))=>i.map(i=>d[i]);
import{d as Ie,c as R,b as we,e as _r,f as Z,m as ys,g as Qe,j as ve,k as fe,l as v,F as Ye,p as Pe,q as B,u as Hn,x as Vn,T as zn,y as vt,t as Wn,z as j,A as Ce,B as Kn,C as Jn,n as Gn,D as br,E as b,G as Xn,H as X,I as Zn,r as kr,J as wt,K as Qn,L as Yn,w as ei,o as ti,M as As,N as si,O as ri,P as ni}from"./vendor-Cn5j0SEu.js";import{g as ii,c as Q}from"./excel-C9Ruqv6W.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function s(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(n){if(n.ep)return;n.ep=!0;const i=s(n);fetch(n.href,i)}})();var oi=Object.defineProperty,Cs=Object.getOwnPropertySymbols,ai=Object.prototype.hasOwnProperty,li=Object.prototype.propertyIsEnumerable,Rs=(t,e,s)=>e in t?oi(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,Sr=(t,e)=>{for(var s in e||(e={}))ai.call(e,s)&&Rs(t,s,e[s]);if(Cs)for(var s of Cs(e))li.call(e,s)&&Rs(t,s,e[s]);return t},Tt=t=>typeof t=="function",xt=t=>typeof t=="string",Er=t=>xt(t)&&t.trim().length>0,ci=t=>typeof t=="number",Oe=t=>typeof t>"u",et=t=>typeof t=="object"&&t!==null,ui=t=>ae(t,"tag")&&Er(t.tag),Tr=t=>window.TouchEvent&&t instanceof TouchEvent,xr=t=>ae(t,"component")&&Pr(t.component),di=t=>Tt(t)||et(t),Pr=t=>!Oe(t)&&(xt(t)||di(t)||xr(t)),js=t=>et(t)&&["height","width","right","left","top","bottom"].every(e=>ci(t[e])),ae=(t,e)=>(et(t)||Tt(t))&&e in t,hi=(t=>()=>t++)(0);function Ft(t){return Tr(t)?t.targetTouches[0].clientX:t.clientX}function Is(t){return Tr(t)?t.targetTouches[0].clientY:t.clientY}var fi=t=>{Oe(t.remove)?t.parentNode&&t.parentNode.removeChild(t):t.remove()},rt=t=>xr(t)?rt(t.component):ui(t)?Ie({render(){return t}}):typeof t=="string"?t:Wn(j(t)),pi=t=>{if(typeof t=="string")return t;const e=ae(t,"props")&&et(t.props)?t.props:{},s=ae(t,"listeners")&&et(t.listeners)?t.listeners:{};return{component:rt(t),props:e,listeners:s}},mi=()=>typeof window<"u",vs=class{constructor(){this.allHandlers={}}getHandlers(t){return this.allHandlers[t]||[]}on(t,e){const s=this.getHandlers(t);s.push(e),this.allHandlers[t]=s}off(t,e){const s=this.getHandlers(t);s.splice(s.indexOf(e)>>>0,1)}emit(t,e){this.getHandlers(t).forEach(r=>r(e))}},gi=t=>["on","off","emit"].every(e=>ae(t,e)&&Tt(t[e])),K;(function(t){t.SUCCESS="success",t.ERROR="error",t.WARNING="warning",t.INFO="info",t.DEFAULT="default"})(K||(K={}));var _t;(function(t){t.TOP_LEFT="top-left",t.TOP_CENTER="top-center",t.TOP_RIGHT="top-right",t.BOTTOM_LEFT="bottom-left",t.BOTTOM_CENTER="bottom-center",t.BOTTOM_RIGHT="bottom-right"})(_t||(_t={}));var J;(function(t){t.ADD="add",t.DISMISS="dismiss",t.UPDATE="update",t.CLEAR="clear",t.UPDATE_DEFAULTS="update_defaults"})(J||(J={}));var re="Vue-Toastification",se={type:{type:String,default:K.DEFAULT},classNames:{type:[String,Array],default:()=>[]},trueBoolean:{type:Boolean,default:!0}},Or={type:se.type,customIcon:{type:[String,Boolean,Object,Function],default:!0}},pt={component:{type:[String,Object,Function,Boolean],default:"button"},classNames:se.classNames,showOnHover:{type:Boolean,default:!1},ariaLabel:{type:String,default:"close"}},es={timeout:{type:[Number,Boolean],default:5e3},hideProgressBar:{type:Boolean,default:!1},isRunning:{type:Boolean,default:!1}},Ar={transition:{type:[Object,String],default:`${re}__bounce`}},yi={position:{type:String,default:_t.TOP_RIGHT},draggable:se.trueBoolean,draggablePercent:{type:Number,default:.6},pauseOnFocusLoss:se.trueBoolean,pauseOnHover:se.trueBoolean,closeOnClick:se.trueBoolean,timeout:es.timeout,hideProgressBar:es.hideProgressBar,toastClassName:se.classNames,bodyClassName:se.classNames,icon:Or.customIcon,closeButton:pt.component,closeButtonClassName:pt.classNames,showCloseButtonOnHover:pt.showOnHover,accessibility:{type:Object,default:()=>({toastRole:"alert",closeButtonLabel:"close"})},rtl:{type:Boolean,default:!1},eventBus:{type:Object,required:!1,default:()=>new vs}},vi={id:{type:[String,Number],required:!0,default:0},type:se.type,content:{type:[String,Object,Function],required:!0,default:""},onClick:{type:Function,default:void 0},onClose:{type:Function,default:void 0}},wi={container:{type:[Object,Function],default:()=>document.body},newestOnTop:se.trueBoolean,maxToasts:{type:Number,default:20},transition:Ar.transition,toastDefaults:Object,filterBeforeCreate:{type:Function,default:t=>t},filterToasts:{type:Function,default:t=>t},containerClassName:se.classNames,onMounted:Function,shareAppContext:[Boolean,Object]},pe={CORE_TOAST:yi,TOAST:vi,CONTAINER:wi,PROGRESS_BAR:es,ICON:Or,TRANSITION:Ar,CLOSE_BUTTON:pt},Cr=Ie({name:"VtProgressBar",props:pe.PROGRESS_BAR,data(){return{hasClass:!0}},computed:{style(){return{animationDuration:`${this.timeout}ms`,animationPlayState:this.isRunning?"running":"paused",opacity:this.hideProgressBar?0:1}},cpClass(){return this.hasClass?`${re}__progress-bar`:""}},watch:{timeout(){this.hasClass=!1,this.$nextTick(()=>this.hasClass=!0)}},mounted(){this.$el.addEventListener("animationend",this.animationEnded)},beforeUnmount(){this.$el.removeEventListener("animationend",this.animationEnded)},methods:{animationEnded(){this.$emit("close-toast")}}});function _i(t,e){return b(),R("div",{style:_r(t.style),class:we(t.cpClass)},null,6)}Cr.render=_i;var bi=Cr,Rr=Ie({name:"VtCloseButton",props:pe.CLOSE_BUTTON,computed:{buttonComponent(){return this.component!==!1?rt(this.component):"button"},classes(){const t=[`${re}__close-button`];return this.showOnHover&&t.push("show-on-hover"),t.concat(this.classNames)}}}),ki=Pe(" Ã— ");function Si(t,e){return b(),Z(Qe(t.buttonComponent),ys({"aria-label":t.ariaLabel,class:t.classes},t.$attrs),{default:ve(()=>[ki]),_:1},16,["aria-label","class"])}Rr.render=Si;var Ei=Rr,jr={},Ti={"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"check-circle",class:"svg-inline--fa fa-check-circle fa-w-16",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},xi=v("path",{fill:"currentColor",d:"M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"},null,-1),Pi=[xi];function Oi(t,e){return b(),R("svg",Ti,Pi)}jr.render=Oi;var Ai=jr,Ir={},Ci={"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"info-circle",class:"svg-inline--fa fa-info-circle fa-w-16",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},Ri=v("path",{fill:"currentColor",d:"M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"},null,-1),ji=[Ri];function Ii(t,e){return b(),R("svg",Ci,ji)}Ir.render=Ii;var $s=Ir,$r={},$i={"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"exclamation-circle",class:"svg-inline--fa fa-exclamation-circle fa-w-16",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},Li=v("path",{fill:"currentColor",d:"M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"},null,-1),Di=[Li];function Ui(t,e){return b(),R("svg",$i,Di)}$r.render=Ui;var Bi=$r,Lr={},Ni={"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"exclamation-triangle",class:"svg-inline--fa fa-exclamation-triangle fa-w-18",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512"},Mi=v("path",{fill:"currentColor",d:"M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"},null,-1),Fi=[Mi];function qi(t,e){return b(),R("svg",Ni,Fi)}Lr.render=qi;var Hi=Lr,Dr=Ie({name:"VtIcon",props:pe.ICON,computed:{customIconChildren(){return ae(this.customIcon,"iconChildren")?this.trimValue(this.customIcon.iconChildren):""},customIconClass(){return xt(this.customIcon)?this.trimValue(this.customIcon):ae(this.customIcon,"iconClass")?this.trimValue(this.customIcon.iconClass):""},customIconTag(){return ae(this.customIcon,"iconTag")?this.trimValue(this.customIcon.iconTag,"i"):"i"},hasCustomIcon(){return this.customIconClass.length>0},component(){return this.hasCustomIcon?this.customIconTag:Pr(this.customIcon)?rt(this.customIcon):this.iconTypeComponent},iconTypeComponent(){return{[K.DEFAULT]:$s,[K.INFO]:$s,[K.SUCCESS]:Ai,[K.ERROR]:Hi,[K.WARNING]:Bi}[this.type]},iconClasses(){const t=[`${re}__icon`];return this.hasCustomIcon?t.concat(this.customIconClass):t}},methods:{trimValue(t,e=""){return Er(t)?t.trim():e}}});function Vi(t,e){return b(),Z(Qe(t.component),{class:we(t.iconClasses)},{default:ve(()=>[Pe(B(t.customIconChildren),1)]),_:1},8,["class"])}Dr.render=Vi;var zi=Dr,Ur=Ie({name:"VtToast",components:{ProgressBar:bi,CloseButton:Ei,Icon:zi},inheritAttrs:!1,props:Object.assign({},pe.CORE_TOAST,pe.TOAST),data(){return{isRunning:!0,disableTransitions:!1,beingDragged:!1,dragStart:0,dragPos:{x:0,y:0},dragRect:{}}},computed:{classes(){const t=[`${re}__toast`,`${re}__toast--${this.type}`,`${this.position}`].concat(this.toastClassName);return this.disableTransitions&&t.push("disable-transition"),this.rtl&&t.push(`${re}__toast--rtl`),t},bodyClasses(){return[`${re}__toast-${xt(this.content)?"body":"component-body"}`].concat(this.bodyClassName)},draggableStyle(){return this.dragStart===this.dragPos.x?{}:this.beingDragged?{transform:`translateX(${this.dragDelta}px)`,opacity:1-Math.abs(this.dragDelta/this.removalDistance)}:{transition:"transform 0.2s, opacity 0.2s",transform:"translateX(0)",opacity:1}},dragDelta(){return this.beingDragged?this.dragPos.x-this.dragStart:0},removalDistance(){return js(this.dragRect)?(this.dragRect.right-this.dragRect.left)*this.draggablePercent:0}},mounted(){this.draggable&&this.draggableSetup(),this.pauseOnFocusLoss&&this.focusSetup()},beforeUnmount(){this.draggable&&this.draggableCleanup(),this.pauseOnFocusLoss&&this.focusCleanup()},methods:{hasProp:ae,getVueComponentFromObj:rt,closeToast(){this.eventBus.emit(J.DISMISS,this.id)},clickHandler(){this.onClick&&this.onClick(this.closeToast),this.closeOnClick&&(!this.beingDragged||this.dragStart===this.dragPos.x)&&this.closeToast()},timeoutHandler(){this.closeToast()},hoverPause(){this.pauseOnHover&&(this.isRunning=!1)},hoverPlay(){this.pauseOnHover&&(this.isRunning=!0)},focusPause(){this.isRunning=!1},focusPlay(){this.isRunning=!0},focusSetup(){addEventListener("blur",this.focusPause),addEventListener("focus",this.focusPlay)},focusCleanup(){removeEventListener("blur",this.focusPause),removeEventListener("focus",this.focusPlay)},draggableSetup(){const t=this.$el;t.addEventListener("touchstart",this.onDragStart,{passive:!0}),t.addEventListener("mousedown",this.onDragStart),addEventListener("touchmove",this.onDragMove,{passive:!1}),addEventListener("mousemove",this.onDragMove),addEventListener("touchend",this.onDragEnd),addEventListener("mouseup",this.onDragEnd)},draggableCleanup(){const t=this.$el;t.removeEventListener("touchstart",this.onDragStart),t.removeEventListener("mousedown",this.onDragStart),removeEventListener("touchmove",this.onDragMove),removeEventListener("mousemove",this.onDragMove),removeEventListener("touchend",this.onDragEnd),removeEventListener("mouseup",this.onDragEnd)},onDragStart(t){this.beingDragged=!0,this.dragPos={x:Ft(t),y:Is(t)},this.dragStart=Ft(t),this.dragRect=this.$el.getBoundingClientRect()},onDragMove(t){this.beingDragged&&(t.preventDefault(),this.isRunning&&(this.isRunning=!1),this.dragPos={x:Ft(t),y:Is(t)})},onDragEnd(){this.beingDragged&&(Math.abs(this.dragDelta)>=this.removalDistance?(this.disableTransitions=!0,this.$nextTick(()=>this.closeToast())):setTimeout(()=>{this.beingDragged=!1,js(this.dragRect)&&this.pauseOnHover&&this.dragRect.bottom>=this.dragPos.y&&this.dragPos.y>=this.dragRect.top&&this.dragRect.left<=this.dragPos.x&&this.dragPos.x<=this.dragRect.right?this.isRunning=!1:this.isRunning=!0}))}}}),Wi=["role"];function Ki(t,e){const s=Ce("Icon"),r=Ce("CloseButton"),n=Ce("ProgressBar");return b(),R("div",{class:we(t.classes),style:_r(t.draggableStyle),onClick:e[0]||(e[0]=(...i)=>t.clickHandler&&t.clickHandler(...i)),onMouseenter:e[1]||(e[1]=(...i)=>t.hoverPause&&t.hoverPause(...i)),onMouseleave:e[2]||(e[2]=(...i)=>t.hoverPlay&&t.hoverPlay(...i))},[t.icon?(b(),Z(s,{key:0,"custom-icon":t.icon,type:t.type},null,8,["custom-icon","type"])):fe("v-if",!0),v("div",{role:t.accessibility.toastRole||"alert",class:we(t.bodyClasses)},[typeof t.content=="string"?(b(),R(Ye,{key:0},[Pe(B(t.content),1)],2112)):(b(),Z(Qe(t.getVueComponentFromObj(t.content)),ys({key:1,"toast-id":t.id},t.hasProp(t.content,"props")?t.content.props:{},Hn(t.hasProp(t.content,"listeners")?t.content.listeners:{}),{onCloseToast:t.closeToast}),null,16,["toast-id","onCloseToast"]))],10,Wi),t.closeButton?(b(),Z(r,{key:1,component:t.closeButton,"class-names":t.closeButtonClassName,"show-on-hover":t.showCloseButtonOnHover,"aria-label":t.accessibility.closeButtonLabel,onClick:Vn(t.closeToast,["stop"])},null,8,["component","class-names","show-on-hover","aria-label","onClick"])):fe("v-if",!0),t.timeout?(b(),Z(n,{key:2,"is-running":t.isRunning,"hide-progress-bar":t.hideProgressBar,timeout:t.timeout,onCloseToast:t.timeoutHandler},null,8,["is-running","hide-progress-bar","timeout","onCloseToast"])):fe("v-if",!0)],38)}Ur.render=Ki;var Ji=Ur,Br=Ie({name:"VtTransition",props:pe.TRANSITION,emits:["leave"],methods:{hasProp:ae,leave(t){t instanceof HTMLElement&&(t.style.left=t.offsetLeft+"px",t.style.top=t.offsetTop+"px",t.style.width=getComputedStyle(t).width,t.style.position="absolute")}}});function Gi(t,e){return b(),Z(zn,{tag:"div","enter-active-class":t.transition.enter?t.transition.enter:`${t.transition}-enter-active`,"move-class":t.transition.move?t.transition.move:`${t.transition}-move`,"leave-active-class":t.transition.leave?t.transition.leave:`${t.transition}-leave-active`,onLeave:t.leave},{default:ve(()=>[Xn(t.$slots,"default")]),_:3},8,["enter-active-class","move-class","leave-active-class","onLeave"])}Br.render=Gi;var Xi=Br,Nr=Ie({name:"VueToastification",devtools:{hide:!0},components:{Toast:Ji,VtTransition:Xi},props:Object.assign({},pe.CORE_TOAST,pe.CONTAINER,pe.TRANSITION),data(){return{count:0,positions:Object.values(_t),toasts:{},defaults:{}}},computed:{toastArray(){return Object.values(this.toasts)},filteredToasts(){return this.defaults.filterToasts(this.toastArray)}},beforeMount(){const t=this.eventBus;t.on(J.ADD,this.addToast),t.on(J.CLEAR,this.clearToasts),t.on(J.DISMISS,this.dismissToast),t.on(J.UPDATE,this.updateToast),t.on(J.UPDATE_DEFAULTS,this.updateDefaults),this.defaults=this.$props},mounted(){this.setup(this.container)},methods:{async setup(t){Tt(t)&&(t=await t()),fi(this.$el),t.appendChild(this.$el)},setToast(t){Oe(t.id)||(this.toasts[t.id]=t)},addToast(t){t.content=pi(t.content);const e=Object.assign({},this.defaults,t.type&&this.defaults.toastDefaults&&this.defaults.toastDefaults[t.type],t),s=this.defaults.filterBeforeCreate(e,this.toastArray);s&&this.setToast(s)},dismissToast(t){const e=this.toasts[t];!Oe(e)&&!Oe(e.onClose)&&e.onClose(),delete this.toasts[t]},clearToasts(){Object.keys(this.toasts).forEach(t=>{this.dismissToast(t)})},getPositionToasts(t){const e=this.filteredToasts.filter(s=>s.position===t).slice(0,this.defaults.maxToasts);return this.defaults.newestOnTop?e.reverse():e},updateDefaults(t){Oe(t.container)||this.setup(t.container),this.defaults=Object.assign({},this.defaults,t)},updateToast({id:t,options:e,create:s}){this.toasts[t]?(e.timeout&&e.timeout===this.toasts[t].timeout&&e.timeout++,this.setToast(Object.assign({},this.toasts[t],e))):s&&this.addToast(Object.assign({},{id:t},e))},getClasses(t){return[`${re}__container`,t].concat(this.defaults.containerClassName)}}});function Zi(t,e){const s=Ce("Toast"),r=Ce("VtTransition");return b(),R("div",null,[(b(!0),R(Ye,null,vt(t.positions,n=>(b(),R("div",{key:n},[X(r,{transition:t.defaults.transition,class:we(t.getClasses(n))},{default:ve(()=>[(b(!0),R(Ye,null,vt(t.getPositionToasts(n),i=>(b(),Z(s,ys({key:i.id},i),null,16))),128))]),_:2},1032,["transition","class"])]))),128))])}Nr.render=Zi;var Qi=Nr,Ls=(t={},e=!0)=>{const s=t.eventBus=t.eventBus||new vs;e&&Gn(()=>{const i=br(Qi,Sr({},t)),o=i.mount(document.createElement("div")),a=t.onMounted;if(Oe(a)||a(o,i),t.shareAppContext){const l=t.shareAppContext;l===!0?console.warn(`[${re}] App to share context with was not provided.`):(i._context.components=l._context.components,i._context.directives=l._context.directives,i._context.mixins=l._context.mixins,i._context.provides=l._context.provides,i.config.globalProperties=l.config.globalProperties)}});const r=(i,o)=>{const a=Object.assign({},{id:hi(),type:K.DEFAULT},o,{content:i});return s.emit(J.ADD,a),a.id};r.clear=()=>s.emit(J.CLEAR,void 0),r.updateDefaults=i=>{s.emit(J.UPDATE_DEFAULTS,i)},r.dismiss=i=>{s.emit(J.DISMISS,i)};function n(i,{content:o,options:a},l=!1){const c=Object.assign({},a,{content:o});s.emit(J.UPDATE,{id:i,options:c,create:l})}return r.update=n,r.success=(i,o)=>r(i,Object.assign({},o,{type:K.SUCCESS})),r.info=(i,o)=>r(i,Object.assign({},o,{type:K.INFO})),r.error=(i,o)=>r(i,Object.assign({},o,{type:K.ERROR})),r.warning=(i,o)=>r(i,Object.assign({},o,{type:K.WARNING})),r},Yi=()=>{const t=()=>console.warn(`[${re}] This plugin does not support SSR!`);return new Proxy(t,{get(){return t}})};function Mr(t){return mi()?gi(t)?Ls({eventBus:t},!1):Ls(t,!0):Yi()}var Fr=Symbol("VueToastification"),qr=new vs,eo=(t,e)=>{(e==null?void 0:e.shareAppContext)===!0&&(e.shareAppContext=t);const s=Mr(Sr({eventBus:qr},e));t.provide(Fr,s)},to=t=>{const e=Kn()?Jn(Fr,void 0):void 0;return e||Mr(qr)},so=eo;const ro="modulepreload",no=function(t,e){return new URL(t,e).href},Ds={},M=function(e,s,r){let n=Promise.resolve();if(s&&s.length>0){const o=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));n=Promise.allSettled(s.map(c=>{if(c=no(c,r),c in Ds)return;Ds[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(!!r)for(let h=o.length-1;h>=0;h--){const m=o[h];if(m.href===c&&(!u||m.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${d}`))return;const p=document.createElement("link");if(p.rel=u?"stylesheet":ro,u||(p.as="script"),p.crossOrigin="",p.href=c,l&&p.setAttribute("nonce",l),document.head.appendChild(p),u)return new Promise((h,m)=>{p.addEventListener("load",h),p.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return n.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},io=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>M(async()=>{const{default:r}=await Promise.resolve().then(()=>He);return{default:r}},void 0,import.meta.url).then(({default:r})=>r(...s)):e=fetch,(...s)=>e(...s)};class ws extends Error{constructor(e,s="FunctionsError",r){super(e),this.name=s,this.context=r}}class oo extends ws{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Us extends ws{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Bs extends ws{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var ts;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(ts||(ts={}));var ao=function(t,e,s,r){function n(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?i(u.value):n(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};class lo{constructor(e,{headers:s={},customFetch:r,region:n=ts.Any}={}){this.url=e,this.headers=s,this.region=n,this.fetch=io(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,s={}){var r;return ao(this,void 0,void 0,function*(){try{const{headers:n,method:i,body:o}=s;let a={},{region:l}=s;l||(l=this.region);const c=new URL(`${this.url}/${e}`);l&&l!=="any"&&(a["x-region"]=l,c.searchParams.set("forceFunctionRegion",l));let u;o&&(n&&!Object.prototype.hasOwnProperty.call(n,"Content-Type")||!n)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",u=o):typeof o=="string"?(a["Content-Type"]="text/plain",u=o):typeof FormData<"u"&&o instanceof FormData?u=o:(a["Content-Type"]="application/json",u=JSON.stringify(o)));const d=yield this.fetch(c.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),n),body:u}).catch(m=>{throw new oo(m)}),y=d.headers.get("x-relay-error");if(y&&y==="true")throw new Us(d);if(!d.ok)throw new Bs(d);let p=((r=d.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),h;return p==="application/json"?h=yield d.json():p==="application/octet-stream"?h=yield d.blob():p==="text/event-stream"?h=d:p==="multipart/form-data"?h=yield d.formData():h=yield d.text(),{data:h,error:null,response:d}}catch(n){return{data:null,error:n,response:n instanceof Bs||n instanceof Us?n.context:void 0}}})}}var V={},_s={},Pt={},nt={},Ot={},At={},co=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},qe=co();const uo=qe.fetch,Hr=qe.fetch.bind(qe),Vr=qe.Headers,ho=qe.Request,fo=qe.Response,He=Object.freeze(Object.defineProperty({__proto__:null,Headers:Vr,Request:ho,Response:fo,default:Hr,fetch:uo},Symbol.toStringTag,{value:"Module"})),po=ii(He);var Ct={};Object.defineProperty(Ct,"__esModule",{value:!0});let mo=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Ct.default=mo;var zr=Q&&Q.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(At,"__esModule",{value:!0});const go=zr(po),yo=zr(Ct);let vo=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=go.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,s){return this.headers=Object.assign({},this.headers),this.headers[e]=s,this}then(e,s){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let n=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,a,l;let c=null,u=null,d=null,y=i.status,p=i.statusText;if(i.ok){if(this.method!=="HEAD"){const _=await i.text();_===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=_:u=JSON.parse(_))}const m=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),g=(a=i.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");m&&g&&g.length>1&&(d=parseInt(g[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(c={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,d=null,y=406,p="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const m=await i.text();try{c=JSON.parse(m),Array.isArray(c)&&i.status===404&&(u=[],c=null,y=200,p="OK")}catch{i.status===404&&m===""?(y=204,p="No Content"):c={message:m}}if(c&&this.isMaybeSingle&&(!((l=c==null?void 0:c.details)===null||l===void 0)&&l.includes("0 rows"))&&(c=null,y=200,p="OK"),c&&this.shouldThrowOnError)throw new yo.default(c)}return{error:c,data:u,count:d,status:y,statusText:p}});return this.shouldThrowOnError||(n=n.catch(i=>{var o,a,l;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(a=i==null?void 0:i.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=i==null?void 0:i.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),n.then(e,s)}returns(){return this}overrideTypes(){return this}};At.default=vo;var wo=Q&&Q.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ot,"__esModule",{value:!0});const _o=wo(At);let bo=class extends _o.default{select(e){let s=!1;const r=(e??"*").split("").map(n=>/\s/.test(n)&&!s?"":(n==='"'&&(s=!s),n)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:s=!0,nullsFirst:r,foreignTable:n,referencedTable:i=n}={}){const o=i?`${i}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${e}.${s?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:s,referencedTable:r=s}={}){const n=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,s,{foreignTable:r,referencedTable:n=r}={}){const i=typeof n>"u"?"offset":`${n}.offset`,o=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(o,`${s-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:s=!1,settings:r=!1,buffers:n=!1,wal:i=!1,format:o="text"}={}){var a;const l=[e?"analyze":null,s?"verbose":null,r?"settings":null,n?"buffers":null,i?"wal":null].filter(Boolean).join("|"),c=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${c}"; options=${l};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Ot.default=bo;var ko=Q&&Q.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(nt,"__esModule",{value:!0});const So=ko(Ot);let Eo=class extends So.default{eq(e,s){return this.url.searchParams.append(e,`eq.${s}`),this}neq(e,s){return this.url.searchParams.append(e,`neq.${s}`),this}gt(e,s){return this.url.searchParams.append(e,`gt.${s}`),this}gte(e,s){return this.url.searchParams.append(e,`gte.${s}`),this}lt(e,s){return this.url.searchParams.append(e,`lt.${s}`),this}lte(e,s){return this.url.searchParams.append(e,`lte.${s}`),this}like(e,s){return this.url.searchParams.append(e,`like.${s}`),this}likeAllOf(e,s){return this.url.searchParams.append(e,`like(all).{${s.join(",")}}`),this}likeAnyOf(e,s){return this.url.searchParams.append(e,`like(any).{${s.join(",")}}`),this}ilike(e,s){return this.url.searchParams.append(e,`ilike.${s}`),this}ilikeAllOf(e,s){return this.url.searchParams.append(e,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(e,s){return this.url.searchParams.append(e,`ilike(any).{${s.join(",")}}`),this}is(e,s){return this.url.searchParams.append(e,`is.${s}`),this}in(e,s){const r=Array.from(new Set(s)).map(n=>typeof n=="string"&&new RegExp("[,()]").test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,s){return typeof s=="string"?this.url.searchParams.append(e,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(e,`cs.{${s.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(s)}`),this}containedBy(e,s){return typeof s=="string"?this.url.searchParams.append(e,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(e,`cd.{${s.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(s)}`),this}rangeGt(e,s){return this.url.searchParams.append(e,`sr.${s}`),this}rangeGte(e,s){return this.url.searchParams.append(e,`nxl.${s}`),this}rangeLt(e,s){return this.url.searchParams.append(e,`sl.${s}`),this}rangeLte(e,s){return this.url.searchParams.append(e,`nxr.${s}`),this}rangeAdjacent(e,s){return this.url.searchParams.append(e,`adj.${s}`),this}overlaps(e,s){return typeof s=="string"?this.url.searchParams.append(e,`ov.${s}`):this.url.searchParams.append(e,`ov.{${s.join(",")}}`),this}textSearch(e,s,{config:r,type:n}={}){let i="";n==="plain"?i="pl":n==="phrase"?i="ph":n==="websearch"&&(i="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${i}fts${o}.${s}`),this}match(e){return Object.entries(e).forEach(([s,r])=>{this.url.searchParams.append(s,`eq.${r}`)}),this}not(e,s,r){return this.url.searchParams.append(e,`not.${s}.${r}`),this}or(e,{foreignTable:s,referencedTable:r=s}={}){const n=r?`${r}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,s,r){return this.url.searchParams.append(e,`${s}.${r}`),this}};nt.default=Eo;var To=Q&&Q.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Pt,"__esModule",{value:!0});const Ke=To(nt);let xo=class{constructor(e,{headers:s={},schema:r,fetch:n}){this.url=e,this.headers=s,this.schema=r,this.fetch=n}select(e,{head:s=!1,count:r}={}){const n=s?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",o),r&&(this.headers.Prefer=`count=${r}`),new Ke.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:s,defaultToNull:r=!0}={}){const n="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),s&&i.push(`count=${s}`),r||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const o=e.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(o.length>0){const a=[...new Set(o)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new Ke.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:s,ignoreDuplicates:r=!1,count:n,defaultToNull:i=!0}={}){const o="POST",a=[`resolution=${r?"ignore":"merge"}-duplicates`];if(s!==void 0&&this.url.searchParams.set("on_conflict",s),this.headers.Prefer&&a.push(this.headers.Prefer),n&&a.push(`count=${n}`),i||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const l=e.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(l.length>0){const c=[...new Set(l)].map(u=>`"${u}"`);this.url.searchParams.set("columns",c.join(","))}}return new Ke.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:s}={}){const r="PATCH",n=[];return this.headers.Prefer&&n.push(this.headers.Prefer),s&&n.push(`count=${s}`),this.headers.Prefer=n.join(","),new Ke.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const s="DELETE",r=[];return e&&r.push(`count=${e}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new Ke.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Pt.default=xo;var Rt={},jt={};Object.defineProperty(jt,"__esModule",{value:!0});jt.version=void 0;jt.version="0.0.0-automated";Object.defineProperty(Rt,"__esModule",{value:!0});Rt.DEFAULT_HEADERS=void 0;const Po=jt;Rt.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${Po.version}`};var Wr=Q&&Q.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(_s,"__esModule",{value:!0});const Oo=Wr(Pt),Ao=Wr(nt),Co=Rt;let Ro=class Kr{constructor(e,{headers:s={},schema:r,fetch:n}={}){this.url=e,this.headers=Object.assign(Object.assign({},Co.DEFAULT_HEADERS),s),this.schemaName=r,this.fetch=n}from(e){const s=new URL(`${this.url}/${e}`);return new Oo.default(s,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Kr(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,s={},{head:r=!1,get:n=!1,count:i}={}){let o;const a=new URL(`${this.url}/rpc/${e}`);let l;r||n?(o=r?"HEAD":"GET",Object.entries(s).filter(([u,d])=>d!==void 0).map(([u,d])=>[u,Array.isArray(d)?`{${d.join(",")}}`:`${d}`]).forEach(([u,d])=>{a.searchParams.append(u,d)})):(o="POST",l=s);const c=Object.assign({},this.headers);return i&&(c.Prefer=`count=${i}`),new Ao.default({method:o,url:a,headers:c,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}};_s.default=Ro;var Ve=Q&&Q.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(V,"__esModule",{value:!0});V.PostgrestError=V.PostgrestBuilder=V.PostgrestTransformBuilder=V.PostgrestFilterBuilder=V.PostgrestQueryBuilder=V.PostgrestClient=void 0;const Jr=Ve(_s);V.PostgrestClient=Jr.default;const Gr=Ve(Pt);V.PostgrestQueryBuilder=Gr.default;const Xr=Ve(nt);V.PostgrestFilterBuilder=Xr.default;const Zr=Ve(Ot);V.PostgrestTransformBuilder=Zr.default;const Qr=Ve(At);V.PostgrestBuilder=Qr.default;const Yr=Ve(Ct);V.PostgrestError=Yr.default;var jo=V.default={PostgrestClient:Jr.default,PostgrestQueryBuilder:Gr.default,PostgrestFilterBuilder:Xr.default,PostgrestTransformBuilder:Zr.default,PostgrestBuilder:Qr.default,PostgrestError:Yr.default};const{PostgrestClient:Io,PostgrestQueryBuilder:Td,PostgrestFilterBuilder:xd,PostgrestTransformBuilder:Pd,PostgrestBuilder:Od,PostgrestError:Ad}=jo;function $o(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const Lo=$o(),Do="2.11.15",Uo=`realtime-js/${Do}`,Bo="1.0.0",en=1e4,No=1e3;var Xe;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Xe||(Xe={}));var N;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(N||(N={}));var te;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(te||(te={}));var ss;(function(t){t.websocket="websocket"})(ss||(ss={}));var Te;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Te||(Te={}));class Mo{constructor(){this.HEADER_LENGTH=1}decode(e,s){return e.constructor===ArrayBuffer?s(this._binaryDecode(e)):s(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const s=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,s,r)}_decodeBroadcast(e,s,r){const n=s.getUint8(1),i=s.getUint8(2);let o=this.HEADER_LENGTH+2;const a=r.decode(e.slice(o,o+n));o=o+n;const l=r.decode(e.slice(o,o+i));o=o+i;const c=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:l,payload:c}}}class tn{constructor(e,s){this.callback=e,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var I;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(I||(I={}));const Ns=(t,e,s={})=>{var r;const n=(r=s.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((i,o)=>(i[o]=Fo(o,t,e,n),i),{})},Fo=(t,e,s,r)=>{const n=e.find(a=>a.name===t),i=n==null?void 0:n.type,o=s[t];return i&&!r.includes(i)?sn(i,o):rs(o)},sn=(t,e)=>{if(t.charAt(0)==="_"){const s=t.slice(1,t.length);return zo(e,s)}switch(t){case I.bool:return qo(e);case I.float4:case I.float8:case I.int2:case I.int4:case I.int8:case I.numeric:case I.oid:return Ho(e);case I.json:case I.jsonb:return Vo(e);case I.timestamp:return Wo(e);case I.abstime:case I.date:case I.daterange:case I.int4range:case I.int8range:case I.money:case I.reltime:case I.text:case I.time:case I.timestamptz:case I.timetz:case I.tsrange:case I.tstzrange:return rs(e);default:return rs(e)}},rs=t=>t,qo=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},Ho=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},Vo=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},zo=(t,e)=>{if(typeof t!="string")return t;const s=t.length-1,r=t[s];if(t[0]==="{"&&r==="}"){let i;const o=t.slice(1,s);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>sn(e,a))}return t},Wo=t=>typeof t=="string"?t.replace(" ","T"):t,rn=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class qt{constructor(e,s,r={},n=en){this.channel=e,this.event=s,this.payload=r,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,s){var r;return this._hasReceived(e)&&s((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:s}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(s))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Ms;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Ms||(Ms={}));class Ze{constructor(e,s){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(s==null?void 0:s.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},n=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ze.syncState(this.state,n,i,o),this.pendingDiffs.forEach(l=>{this.state=Ze.syncDiff(this.state,l,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},n=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=Ze.syncDiff(this.state,n,i,o),a())}),this.onJoin((n,i,o)=>{this.channel._trigger("presence",{event:"join",key:n,currentPresences:i,newPresences:o})}),this.onLeave((n,i,o)=>{this.channel._trigger("presence",{event:"leave",key:n,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,s,r,n){const i=this.cloneDeep(e),o=this.transformState(s),a={},l={};return this.map(i,(c,u)=>{o[c]||(l[c]=u)}),this.map(o,(c,u)=>{const d=i[c];if(d){const y=u.map(g=>g.presence_ref),p=d.map(g=>g.presence_ref),h=u.filter(g=>p.indexOf(g.presence_ref)<0),m=d.filter(g=>y.indexOf(g.presence_ref)<0);h.length>0&&(a[c]=h),m.length>0&&(l[c]=m)}else a[c]=u}),this.syncDiff(i,{joins:a,leaves:l},r,n)}static syncDiff(e,s,r,n){const{joins:i,leaves:o}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return r||(r=()=>{}),n||(n=()=>{}),this.map(i,(a,l)=>{var c;const u=(c=e[a])!==null&&c!==void 0?c:[];if(e[a]=this.cloneDeep(l),u.length>0){const d=e[a].map(p=>p.presence_ref),y=u.filter(p=>d.indexOf(p.presence_ref)<0);e[a].unshift(...y)}r(a,u,l)}),this.map(o,(a,l)=>{let c=e[a];if(!c)return;const u=l.map(d=>d.presence_ref);c=c.filter(d=>u.indexOf(d.presence_ref)<0),e[a]=c,n(a,c,l),c.length===0&&delete e[a]}),e}static map(e,s){return Object.getOwnPropertyNames(e).map(r=>s(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((s,r)=>{const n=e[r];return"metas"in n?s[r]=n.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):s[r]=n,s},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Fs;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Fs||(Fs={}));var qs;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(qs||(qs={}));var de;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(de||(de={}));class bs{constructor(e,s={config:{}},r){this.topic=e,this.params=s,this.socket=r,this.bindings={},this.state=N.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new qt(this,te.join,this.params,this.timeout),this.rejoinTimer=new tn(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=N.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(n=>n.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=N.closed,this.socket._remove(this)}),this._onError(n=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,n),this.state=N.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=N.errored,this.rejoinTimer.scheduleTimeout())}),this._on(te.reply,{},(n,i)=>{this._trigger(this._replyEventName(i),n)}),this.presence=new Ze(this),this.broadcastEndpointURL=rn(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,s=this.timeout){var r,n;if(this.socket.isConnected()||this.socket.connect(),this.state==N.closed){const{config:{broadcast:i,presence:o,private:a}}=this.params;this._onError(u=>e==null?void 0:e(de.CHANNEL_ERROR,u)),this._onClose(()=>e==null?void 0:e(de.CLOSED));const l={},c={broadcast:i,presence:o,postgres_changes:(n=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(u=>u.filter))!==null&&n!==void 0?n:[],private:a};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:c},l)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:u})=>{var d;if(this.socket.setAuth(),u===void 0){e==null||e(de.SUBSCRIBED);return}else{const y=this.bindings.postgres_changes,p=(d=y==null?void 0:y.length)!==null&&d!==void 0?d:0,h=[];for(let m=0;m<p;m++){const g=y[m],{filter:{event:_,schema:T,table:w,filter:E}}=g,A=u&&u[m];if(A&&A.event===_&&A.schema===T&&A.table===w&&A.filter===E)h.push(Object.assign(Object.assign({},g),{id:A.id}));else{this.unsubscribe(),this.state=N.errored,e==null||e(de.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=h,e&&e(de.SUBSCRIBED);return}}).receive("error",u=>{this.state=N.errored,e==null||e(de.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(de.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,s={}){return await this.send({type:"presence",event:"track",payload:e},s.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,s,r){return this._on(e,s,r)}async send(e,s={}){var r,n;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=s.timeout)!==null&&r!==void 0?r:this.timeout);return await((n=c.body)===null||n===void 0?void 0:n.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,l;const c=this._push(e.type,e,s.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),c.receive("ok",()=>i("ok")),c.receive("error",()=>i("error")),c.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=N.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(te.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(n=>{r=new qt(this,te.leave,{},e),r.receive("ok",()=>{s(),n("ok")}).receive("timeout",()=>{s(),n("timed out")}).receive("error",()=>{n("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,s,r){const n=new AbortController,i=setTimeout(()=>n.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},s),{signal:n.signal}));return clearTimeout(i),o}_push(e,s,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new qt(this,e,s,r);return this._canPush()?n.send():(n.startTimeout(),this.pushBuffer.push(n)),n}_onMessage(e,s,r){return s}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,s,r){var n,i;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:c,join:u}=te;if(r&&[a,l,c,u].indexOf(o)>=0&&r!==this._joinRef())return;let y=this._onMessage(o,s,r);if(s&&!y)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(n=this.bindings.postgres_changes)===null||n===void 0||n.filter(p=>{var h,m,g;return((h=p.filter)===null||h===void 0?void 0:h.event)==="*"||((g=(m=p.filter)===null||m===void 0?void 0:m.event)===null||g===void 0?void 0:g.toLocaleLowerCase())===o}).map(p=>p.callback(y,r)):(i=this.bindings[o])===null||i===void 0||i.filter(p=>{var h,m,g,_,T,w;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in p){const E=p.id,A=(h=p.filter)===null||h===void 0?void 0:h.event;return E&&((m=s.ids)===null||m===void 0?void 0:m.includes(E))&&(A==="*"||(A==null?void 0:A.toLocaleLowerCase())===((g=s.data)===null||g===void 0?void 0:g.type.toLocaleLowerCase()))}else{const E=(T=(_=p==null?void 0:p.filter)===null||_===void 0?void 0:_.event)===null||T===void 0?void 0:T.toLocaleLowerCase();return E==="*"||E===((w=s==null?void 0:s.event)===null||w===void 0?void 0:w.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===o}).map(p=>{if(typeof y=="object"&&"ids"in y){const h=y.data,{schema:m,table:g,commit_timestamp:_,type:T,errors:w}=h;y=Object.assign(Object.assign({},{schema:m,table:g,commit_timestamp:_,eventType:T,new:{},old:{},errors:w}),this._getPayloadRecords(h))}p.callback(y,r)})}_isClosed(){return this.state===N.closed}_isJoined(){return this.state===N.joined}_isJoining(){return this.state===N.joining}_isLeaving(){return this.state===N.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,s,r){const n=e.toLocaleLowerCase(),i={type:n,filter:s,callback:r};return this.bindings[n]?this.bindings[n].push(i):this.bindings[n]=[i],this}_off(e,s){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(n=>{var i;return!(((i=n.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&bs.isEqual(n.filter,s))}),this}static isEqual(e,s){if(Object.keys(e).length!==Object.keys(s).length)return!1;for(const r in e)if(e[r]!==s[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(te.close,{},e)}_onError(e){this._on(te.error,{},s=>e(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=N.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const s={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(s.new=Ns(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(s.old=Ns(e.columns,e.old_record)),s}}const Hs=()=>{},Ko=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Jo{constructor(e,s){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=en,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Hs,this.ref=0,this.logger=Hs,this.conn=null,this.sendBuffer=[],this.serializer=new Mo,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...a)=>M(async()=>{const{default:l}=await Promise.resolve().then(()=>He);return{default:l}},void 0,import.meta.url).then(({default:l})=>l(...a)):o=fetch,(...a)=>o(...a)},this.endPoint=`${e}/${ss.websocket}`,this.httpEndpoint=rn(e),s!=null&&s.transport?this.transport=s.transport:this.transport=null,s!=null&&s.params&&(this.params=s.params),s!=null&&s.timeout&&(this.timeout=s.timeout),s!=null&&s.logger&&(this.logger=s.logger),(s!=null&&s.logLevel||s!=null&&s.log_level)&&(this.logLevel=s.logLevel||s.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),s!=null&&s.heartbeatIntervalMs&&(this.heartbeatIntervalMs=s.heartbeatIntervalMs);const n=(r=s==null?void 0:s.params)===null||r===void 0?void 0:r.apikey;if(n&&(this.accessTokenValue=n,this.apiKey=n),this.reconnectAfterMs=s!=null&&s.reconnectAfterMs?s.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=s!=null&&s.encode?s.encode:(i,o)=>o(JSON.stringify(i)),this.decode=s!=null&&s.decode?s.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new tn(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(s==null?void 0:s.fetch),s!=null&&s.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(s==null?void 0:s.worker)||!1,this.workerUrl=s==null?void 0:s.workerUrl}this.accessToken=(s==null?void 0:s.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=Lo),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Bo}))}disconnect(e,s){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,s??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(r=>r.teardown()))}getChannels(){return this.channels}async removeChannel(e){const s=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const e=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,s,r){this.logger(e,s,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Xe.connecting:return Te.Connecting;case Xe.open:return Te.Open;case Xe.closing:return Te.Closing;default:return Te.Closed}}isConnected(){return this.connectionState()===Te.Open}channel(e,s={config:{}}){const r=`realtime:${e}`,n=this.getChannels().find(i=>i.topic===r);if(n)return n;{const i=new bs(`realtime:${e}`,s,this);return this.channels.push(i),i}}push(e){const{topic:s,event:r,payload:n,ref:i}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${s} ${r} (${i})`,n),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let s=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=s&&(this.accessTokenValue=s,this.channels.forEach(r=>{const n={access_token:s,version:Uo};s&&r.updateJoinPayload(n),r.joinedOnce&&r._isJoined()&&r._push(te.access_token,{access_token:s})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(No,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let s=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${e}"`),s.unsubscribe())}_remove(e){this.channels=this.channels.filter(s=>s.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,s=>{let{topic:r,event:n,payload:i,ref:o}=s;r==="phoenix"&&n==="phx_reply"&&this.heartbeatCallback(s.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${r} ${n} ${o&&"("+o+")"||""}`,i),Array.from(this.channels).filter(a=>a._isMember(r)).forEach(a=>a._trigger(n,i,o)),this.stateChangeCallbacks.message.forEach(a=>a(s))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(e=>e())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this.workerRef.terminate()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(s=>s(e))}_onConnError(e){this.log("transport",`${e}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(s=>s(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(te.error))}_appendParams(e,s){if(Object.keys(s).length===0)return e;const r=e.match(/\?/)?"&":"?",n=new URLSearchParams(s);return`${e}${r}${n}`}_workerObjectUrl(e){let s;if(e)s=e;else{const r=new Blob([Ko],{type:"application/javascript"});s=URL.createObjectURL(r)}return s}}class ks extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function U(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class Go extends ks{constructor(e,s,r){super(e),this.name="StorageApiError",this.status=s,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class ns extends ks{constructor(e,s){super(e),this.name="StorageUnknownError",this.originalError=s}}var Xo=function(t,e,s,r){function n(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?i(u.value):n(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};const nn=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>M(async()=>{const{default:r}=await Promise.resolve().then(()=>He);return{default:r}},void 0,import.meta.url).then(({default:r})=>r(...s)):e=fetch,(...s)=>e(...s)},Zo=()=>Xo(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield M(()=>Promise.resolve().then(()=>He),void 0,import.meta.url)).Response:Response}),is=t=>{if(Array.isArray(t))return t.map(s=>is(s));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([s,r])=>{const n=s.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[n]=is(r)}),e},Qo=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var $e=function(t,e,s,r){function n(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?i(u.value):n(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};const Ht=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Yo=(t,e,s)=>$e(void 0,void 0,void 0,function*(){const r=yield Zo();t instanceof r&&!(s!=null&&s.noResolveJson)?t.json().then(n=>{const i=t.status||500,o=(n==null?void 0:n.statusCode)||i+"";e(new Go(Ht(n),i,o))}).catch(n=>{e(new ns(Ht(n),n))}):e(new ns(Ht(t),t))}),ea=(t,e,s,r)=>{const n={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!r?n:(Qo(r)?(n.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),n.body=JSON.stringify(r)):n.body=r,Object.assign(Object.assign({},n),s))};function it(t,e,s,r,n,i){return $e(this,void 0,void 0,function*(){return new Promise((o,a)=>{t(s,ea(e,r,n,i)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>Yo(l,a,r))})})}function bt(t,e,s,r){return $e(this,void 0,void 0,function*(){return it(t,"GET",e,s,r)})}function he(t,e,s,r,n){return $e(this,void 0,void 0,function*(){return it(t,"POST",e,r,n,s)})}function os(t,e,s,r,n){return $e(this,void 0,void 0,function*(){return it(t,"PUT",e,r,n,s)})}function ta(t,e,s,r){return $e(this,void 0,void 0,function*(){return it(t,"HEAD",e,Object.assign(Object.assign({},s),{noResolveJson:!0}),r)})}function on(t,e,s,r,n){return $e(this,void 0,void 0,function*(){return it(t,"DELETE",e,r,n,s)})}var H=function(t,e,s,r){function n(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?i(u.value):n(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};const sa={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Vs={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class ra{constructor(e,s={},r,n){this.url=e,this.headers=s,this.bucketId=r,this.fetch=nn(n)}uploadOrUpdate(e,s,r,n){return H(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},Vs),n);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l))):(i=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),n!=null&&n.headers&&(a=Object.assign(Object.assign({},a),n.headers));const c=this._removeEmptyFolders(s),u=this._getFinalPath(c),d=yield(e=="PUT"?os:he)(this.fetch,`${this.url}/object/${u}`,i,Object.assign({headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:c,id:d.Id,fullPath:d.Key},error:null}}catch(i){if(U(i))return{data:null,error:i};throw i}})}upload(e,s,r){return H(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,s,r)})}uploadToSignedUrl(e,s,r,n){return H(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",s);try{let l;const c=Object.assign({upsert:Vs.upsert},n),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",c.cacheControl)):(l=r,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);const d=yield os(this.fetch,a.toString(),l,{headers:u});return{data:{path:i,fullPath:d.Key},error:null}}catch(l){if(U(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,s){return H(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const n=Object.assign({},this.headers);s!=null&&s.upsert&&(n["x-upsert"]="true");const i=yield he(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:n}),o=new URL(this.url+i.url),a=o.searchParams.get("token");if(!a)throw new ks("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(r){if(U(r))return{data:null,error:r};throw r}})}update(e,s,r){return H(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,s,r)})}move(e,s,r){return H(this,void 0,void 0,function*(){try{return{data:yield he(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(n){if(U(n))return{data:null,error:n};throw n}})}copy(e,s,r){return H(this,void 0,void 0,function*(){try{return{data:{path:(yield he(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(n){if(U(n))return{data:null,error:n};throw n}})}createSignedUrl(e,s,r){return H(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e),i=yield he(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:s},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(n){if(U(n))return{data:null,error:n};throw n}})}createSignedUrls(e,s,r){return H(this,void 0,void 0,function*(){try{const n=yield he(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:s,paths:e},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:n.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(n){if(U(n))return{data:null,error:n};throw n}})}download(e,s){return H(this,void 0,void 0,function*(){const n=typeof(s==null?void 0:s.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((s==null?void 0:s.transform)||{}),o=i?`?${i}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield bt(this.fetch,`${this.url}/${n}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(U(a))return{data:null,error:a};throw a}})}info(e){return H(this,void 0,void 0,function*(){const s=this._getFinalPath(e);try{const r=yield bt(this.fetch,`${this.url}/object/info/${s}`,{headers:this.headers});return{data:is(r),error:null}}catch(r){if(U(r))return{data:null,error:r};throw r}})}exists(e){return H(this,void 0,void 0,function*(){const s=this._getFinalPath(e);try{return yield ta(this.fetch,`${this.url}/object/${s}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(U(r)&&r instanceof ns){const n=r.originalError;if([400,404].includes(n==null?void 0:n.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,s){const r=this._getFinalPath(e),n=[],i=s!=null&&s.download?`download=${s.download===!0?"":s.download}`:"";i!==""&&n.push(i);const a=typeof(s==null?void 0:s.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((s==null?void 0:s.transform)||{});l!==""&&n.push(l);let c=n.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${c}`)}}}remove(e){return H(this,void 0,void 0,function*(){try{return{data:yield on(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(s){if(U(s))return{data:null,error:s};throw s}})}list(e,s,r){return H(this,void 0,void 0,function*(){try{const n=Object.assign(Object.assign(Object.assign({},sa),s),{prefix:e||""});return{data:yield he(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(U(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const s=[];return e.width&&s.push(`width=${e.width}`),e.height&&s.push(`height=${e.height}`),e.resize&&s.push(`resize=${e.resize}`),e.format&&s.push(`format=${e.format}`),e.quality&&s.push(`quality=${e.quality}`),s.join("&")}}const na="2.10.4",ia={"X-Client-Info":`storage-js/${na}`};var Le=function(t,e,s,r){function n(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?i(u.value):n(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};class oa{constructor(e,s={},r,n){const i=new URL(e);n!=null&&n.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},ia),s),this.fetch=nn(r)}listBuckets(){return Le(this,void 0,void 0,function*(){try{return{data:yield bt(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(U(e))return{data:null,error:e};throw e}})}getBucket(e){return Le(this,void 0,void 0,function*(){try{return{data:yield bt(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(s){if(U(s))return{data:null,error:s};throw s}})}createBucket(e,s={public:!1}){return Le(this,void 0,void 0,function*(){try{return{data:yield he(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:s.type,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(U(r))return{data:null,error:r};throw r}})}updateBucket(e,s){return Le(this,void 0,void 0,function*(){try{return{data:yield os(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(U(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Le(this,void 0,void 0,function*(){try{return{data:yield he(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(s){if(U(s))return{data:null,error:s};throw s}})}deleteBucket(e){return Le(this,void 0,void 0,function*(){try{return{data:yield on(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(s){if(U(s))return{data:null,error:s};throw s}})}}class aa extends oa{constructor(e,s={},r,n){super(e,s,r,n)}from(e){return new ra(this.url,this.headers,e,this.fetch)}}const la="2.53.0";let Ge="";typeof Deno<"u"?Ge="deno":typeof document<"u"?Ge="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ge="react-native":Ge="node";const ca={"X-Client-Info":`supabase-js-${Ge}/${la}`},ua={headers:ca},da={schema:"public"},ha={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},fa={};var pa=function(t,e,s,r){function n(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?i(u.value):n(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};const ma=t=>{let e;return t?e=t:typeof fetch>"u"?e=Hr:e=fetch,(...s)=>e(...s)},ga=()=>typeof Headers>"u"?Vr:Headers,ya=(t,e,s)=>{const r=ma(s),n=ga();return(i,o)=>pa(void 0,void 0,void 0,function*(){var a;const l=(a=yield e())!==null&&a!==void 0?a:t;let c=new n(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",t),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),r(i,Object.assign(Object.assign({},o),{headers:c}))})};var va=function(t,e,s,r){function n(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?i(u.value):n(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};function wa(t){return t.endsWith("/")?t:t+"/"}function _a(t,e){var s,r;const{db:n,auth:i,realtime:o,global:a}=t,{db:l,auth:c,realtime:u,global:d}=e,y={db:Object.assign(Object.assign({},l),n),auth:Object.assign(Object.assign({},c),i),realtime:Object.assign(Object.assign({},u),o),storage:{},global:Object.assign(Object.assign(Object.assign({},d),a),{headers:Object.assign(Object.assign({},(s=d==null?void 0:d.headers)!==null&&s!==void 0?s:{}),(r=a==null?void 0:a.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>va(this,void 0,void 0,function*(){return""})};return t.accessToken?y.accessToken=t.accessToken:delete y.accessToken,y}const an="2.71.1",Me=30*1e3,as=3,Vt=as*Me,ba="http://localhost:9999",ka="supabase.auth.token",Sa={"X-Client-Info":`gotrue-js/${an}`},ls="X-Supabase-Api-Version",ln={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Ea=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Ta=10*60*1e3;class Ss extends Error{constructor(e,s,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=r}}function k(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class xa extends Ss{constructor(e,s,r){super(e,s,r),this.name="AuthApiError",this.status=s,this.code=r}}function Pa(t){return k(t)&&t.name==="AuthApiError"}class cn extends Ss{constructor(e,s){super(e),this.name="AuthUnknownError",this.originalError=s}}class _e extends Ss{constructor(e,s,r,n){super(e,r,n),this.name=s,this.status=r}}class ge extends _e{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Oa(t){return k(t)&&t.name==="AuthSessionMissingError"}class dt extends _e{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ht extends _e{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class ft extends _e{constructor(e,s=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Aa(t){return k(t)&&t.name==="AuthImplicitGrantRedirectError"}class zs extends _e{constructor(e,s=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class cs extends _e{constructor(e,s){super(e,"AuthRetryableFetchError",s,void 0)}}function zt(t){return k(t)&&t.name==="AuthRetryableFetchError"}class Ws extends _e{constructor(e,s,r){super(e,"AuthWeakPasswordError",s,"weak_password"),this.reasons=r}}class us extends _e{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const kt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Ks=` 	
\r=`.split(""),Ca=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Ks.length;e+=1)t[Ks[e].charCodeAt(0)]=-2;for(let e=0;e<kt.length;e+=1)t[kt[e].charCodeAt(0)]=e;return t})();function Js(t,e,s){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;s(kt[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;s(kt[r]),e.queuedBits-=6}}function un(t,e,s){const r=Ca[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)s(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Gs(t){const e=[],s=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},n={queue:0,queuedBits:0},i=o=>{Ia(o,r,s)};for(let o=0;o<t.length;o+=1)un(t.charCodeAt(o),n,i);return e.join("")}function Ra(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function ja(t,e){for(let s=0;s<t.length;s+=1){let r=t.charCodeAt(s);if(r>55295&&r<=56319){const n=(r-55296)*1024&65535;r=(t.charCodeAt(s+1)-56320&65535|n)+65536,s+=1}Ra(r,e)}}function Ia(t,e,s){if(e.utf8seq===0){if(t<=127){s(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&s(e.codepoint)}}function $a(t){const e=[],s={queue:0,queuedBits:0},r=n=>{e.push(n)};for(let n=0;n<t.length;n+=1)un(t.charCodeAt(n),s,r);return new Uint8Array(e)}function La(t){const e=[];return ja(t,s=>e.push(s)),new Uint8Array(e)}function Da(t){const e=[],s={queue:0,queuedBits:0},r=n=>{e.push(n)};return t.forEach(n=>Js(n,s,r)),Js(null,s,r),e.join("")}function Ua(t){return Math.round(Date.now()/1e3)+t}function Ba(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const ee=()=>typeof window<"u"&&typeof document<"u",be={tested:!1,writable:!1},dn=()=>{if(!ee())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(be.tested)return be.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),be.tested=!0,be.writable=!0}catch{be.tested=!0,be.writable=!1}return be.writable};function Na(t){const e={},s=new URL(t);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((n,i)=>{e[i]=n})}catch{}return s.searchParams.forEach((r,n)=>{e[n]=r}),e}const hn=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>M(async()=>{const{default:r}=await Promise.resolve().then(()=>He);return{default:r}},void 0,import.meta.url).then(({default:r})=>r(...s)):e=fetch,(...s)=>e(...s)},Ma=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Fe=async(t,e,s)=>{await t.setItem(e,JSON.stringify(s))},ke=async(t,e)=>{const s=await t.getItem(e);if(!s)return null;try{return JSON.parse(s)}catch{return s}},me=async(t,e)=>{await t.removeItem(e)};class It{constructor(){this.promise=new It.promiseConstructor((e,s)=>{this.resolve=e,this.reject=s})}}It.promiseConstructor=Promise;function Wt(t){const e=t.split(".");if(e.length!==3)throw new us("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!Ea.test(e[r]))throw new us("JWT not in base64url format");return{header:JSON.parse(Gs(e[0])),payload:JSON.parse(Gs(e[1])),signature:$a(e[2]),raw:{header:e[0],payload:e[1]}}}async function Fa(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function qa(t,e){return new Promise((r,n)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await t(i);if(!e(i,null,o)){r(o);return}}catch(o){if(!e(i,o)){n(o);return}}})()})}function Ha(t){return("0"+t.toString(16)).substr(-2)}function Va(){const e=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=s.length;let n="";for(let i=0;i<56;i++)n+=s.charAt(Math.floor(Math.random()*r));return n}return crypto.getRandomValues(e),Array.from(e,Ha).join("")}async function za(t){const s=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",s),n=new Uint8Array(r);return Array.from(n).map(i=>String.fromCharCode(i)).join("")}async function Wa(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const s=await za(t);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function De(t,e,s=!1){const r=Va();let n=r;s&&(n+="/PASSWORD_RECOVERY"),await Fe(t,`${e}-code-verifier`,n);const i=await Wa(r);return[i,r===i?"plain":"s256"]}const Ka=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Ja(t){const e=t.headers.get(ls);if(!e||!e.match(Ka))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Ga(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function Xa(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Za=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ue(t){if(!Za.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Kt(){const t={};return new Proxy(t,{get:(e,s)=>{if(s==="__isUserNotAvailableProxy")return!0;if(typeof s=="symbol"){const r=s.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${s}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Xs(t){return JSON.parse(JSON.stringify(t))}var Qa=function(t,e){var s={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(s[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(t);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(t,r[n])&&(s[r[n]]=t[r[n]]);return s};const Ee=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Ya=[502,503,504];async function Zs(t){var e;if(!Ma(t))throw new cs(Ee(t),0);if(Ya.includes(t.status))throw new cs(Ee(t),t.status);let s;try{s=await t.json()}catch(i){throw new cn(Ee(i),i)}let r;const n=Ja(t);if(n&&n.getTime()>=ln["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?r=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(r=s.error_code),r){if(r==="weak_password")throw new Ws(Ee(s),t.status,((e=s.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new ge}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new Ws(Ee(s),t.status,s.weak_password.reasons);throw new xa(Ee(s),t.status||500,r)}const el=(t,e,s,r)=>{const n={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),n.body=JSON.stringify(r),Object.assign(Object.assign({},n),s))};async function P(t,e,s,r){var n;const i=Object.assign({},r==null?void 0:r.headers);i[ls]||(i[ls]=ln["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(n=r==null?void 0:r.query)!==null&&n!==void 0?n:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await tl(t,e,s+a,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function tl(t,e,s,r,n,i){const o=el(e,r,n,i);let a;try{a=await t(s,Object.assign({},o))}catch(l){throw console.error(l),new cs(Ee(l),0)}if(a.ok||await Zs(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(l){await Zs(l)}}function ue(t){var e;let s=null;il(t)&&(s=Object.assign({},t),t.expires_at||(s.expires_at=Ua(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:s,user:r},error:null}}function Qs(t){const e=ue(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((s,r)=>s&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function ye(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function sl(t){return{data:t,error:null}}function rl(t){const{action_link:e,email_otp:s,hashed_token:r,redirect_to:n,verification_type:i}=t,o=Qa(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:s,hashed_token:r,redirect_to:n,verification_type:i},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function nl(t){return t}function il(t){return t.access_token&&t.refresh_token&&t.expires_in}const Jt=["global","local","others"];var ol=function(t,e){var s={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(s[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(t);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(t,r[n])&&(s[r[n]]=t[r[n]]);return s};class al{constructor({url:e="",headers:s={},fetch:r}){this.url=e,this.headers=s,this.fetch=hn(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,s=Jt[0]){if(Jt.indexOf(s)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Jt.join(", ")}`);try{return await P(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(k(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,s={}){try{return await P(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:ye})}catch(r){if(k(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:s}=e,r=ol(e,["options"]),n=Object.assign(Object.assign({},r),s);return"newEmail"in r&&(n.new_email=r==null?void 0:r.newEmail,delete n.newEmail),await P(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:rl,redirectTo:s==null?void 0:s.redirectTo})}catch(s){if(k(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(e){try{return await P(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:ye})}catch(s){if(k(s))return{data:{user:null},error:s};throw s}}async listUsers(e){var s,r,n,i,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},u=await P(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(s=e==null?void 0:e.page)===null||s===void 0?void 0:s.toString())!==null&&r!==void 0?r:"",per_page:(i=(n=e==null?void 0:e.perPage)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:""},xform:nl});if(u.error)throw u.error;const d=await u.json(),y=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(h=>{const m=parseInt(h.split(";")[0].split("=")[1].substring(0,1)),g=JSON.parse(h.split(";")[1].split("=")[1]);c[`${g}Page`]=m}),c.total=parseInt(y)),{data:Object.assign(Object.assign({},d),c),error:null}}catch(c){if(k(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){Ue(e);try{return await P(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:ye})}catch(s){if(k(s))return{data:{user:null},error:s};throw s}}async updateUserById(e,s){Ue(e);try{return await P(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:s,headers:this.headers,xform:ye})}catch(r){if(k(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,s=!1){Ue(e);try{return await P(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:s},xform:ye})}catch(r){if(k(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Ue(e.userId);try{const{data:s,error:r}=await P(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:n=>({data:{factors:n},error:null})});return{data:s,error:r}}catch(s){if(k(s))return{data:null,error:s};throw s}}async _deleteFactor(e){Ue(e.userId),Ue(e.id);try{return{data:await P(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(s){if(k(s))return{data:null,error:s};throw s}}}function Ys(t={}){return{getItem:e=>t[e]||null,setItem:(e,s)=>{t[e]=s},removeItem:e=>{delete t[e]}}}function ll(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Be={debug:!!(globalThis&&dn()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class fn extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class cl extends fn{}async function ul(t,e,s){Be.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Be.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async n=>{if(n){Be.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,n.name);try{return await s()}finally{Be.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,n.name)}}else{if(e===0)throw Be.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new cl(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Be.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}ll();const dl={url:ba,storageKey:ka,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Sa,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function er(t,e,s){return await s()}const Ne={};class tt{constructor(e){var s,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=tt.nextInstanceID,tt.nextInstanceID+=1,this.instanceID>0&&ee()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const n=Object.assign(Object.assign({},dl),e);if(this.logDebugMessages=!!n.debug,typeof n.debug=="function"&&(this.logger=n.debug),this.persistSession=n.persistSession,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.admin=new al({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=hn(n.fetch),this.lock=n.lock||er,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.hasCustomAuthorizationHeader=n.hasCustomAuthorizationHeader,n.lock?this.lock=n.lock:ee()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=ul:this.lock=er,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(n.storage?this.storage=n.storage:dn()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Ys(this.memoryStorage)),n.userStorage&&(this.userStorage=n.userStorage)):(this.memoryStorage={},this.storage=Ys(this.memoryStorage)),ee()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var e,s;return(s=(e=Ne[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&s!==void 0?s:{keys:[]}}set jwks(e){Ne[this.storageKey]=Object.assign(Object.assign({},Ne[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,s;return(s=(e=Ne[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&s!==void 0?s:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Ne[this.storageKey]=Object.assign(Object.assign({},Ne[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${an}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const s=Na(window.location.href);let r="none";if(this._isImplicitGrantCallback(s)?r="implicit":await this._isPKCECallback(s)&&(r="pkce"),ee()&&this.detectSessionInUrl&&r!=="none"){const{data:n,error:i}=await this._getSessionFromURL(s,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),Aa(i)){const l=(e=i.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:a}=n;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return k(s)?{error:s}:{error:new cn("Unexpected error during initialization",s)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var s,r,n;try{const i=await P(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.captchaToken}},xform:ue}),{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(k(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var s,r,n;try{let i;if("email"in e){const{email:u,password:d,options:y}=e;let p=null,h=null;this.flowType==="pkce"&&([p,h]=await De(this.storage,this.storageKey)),i=await P(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:y==null?void 0:y.emailRedirectTo,body:{email:u,password:d,data:(s=y==null?void 0:y.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken},code_challenge:p,code_challenge_method:h},xform:ue})}else if("phone"in e){const{phone:u,password:d,options:y}=e;i=await P(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:d,data:(r=y==null?void 0:y.data)!==null&&r!==void 0?r:{},channel:(n=y==null?void 0:y.channel)!==null&&n!==void 0?n:"sms",gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken}},xform:ue})}else throw new ht("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(k(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let s;if("email"in e){const{email:i,password:o,options:a}=e;s=await P(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Qs})}else if("phone"in e){const{phone:i,password:o,options:a}=e;s=await P(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Qs})}else throw new ht("You must provide either an email or phone number and a password");const{data:r,error:n}=s;return n?{data:{user:null,session:null},error:n}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new dt}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:n})}catch(s){if(k(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOAuth(e){var s,r,n,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(s=e.options)===null||s===void 0?void 0:s.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(n=e.options)===null||n===void 0?void 0:n.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:s}=e;if(s==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${s}"`)}async signInWithSolana(e){var s,r,n,i,o,a,l,c,u,d,y,p;let h,m;if("message"in e)h=e.message,m=e.signature;else{const{chain:g,wallet:_,statement:T,options:w}=e;let E;if(ee())if(typeof _=="object")E=_;else{const C=window;if("solana"in C&&typeof C.solana=="object"&&("signIn"in C.solana&&typeof C.solana.signIn=="function"||"signMessage"in C.solana&&typeof C.solana.signMessage=="function"))E=C.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof _!="object"||!(w!=null&&w.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");E=_}const A=new URL((s=w==null?void 0:w.url)!==null&&s!==void 0?s:window.location.href);if("signIn"in E&&E.signIn){const C=await E.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},w==null?void 0:w.signInWithSolana),{version:"1",domain:A.host,uri:A.href}),T?{statement:T}:null));let x;if(Array.isArray(C)&&C[0]&&typeof C[0]=="object")x=C[0];else if(C&&typeof C=="object"&&"signedMessage"in C&&"signature"in C)x=C;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in x&&"signature"in x&&(typeof x.signedMessage=="string"||x.signedMessage instanceof Uint8Array)&&x.signature instanceof Uint8Array)h=typeof x.signedMessage=="string"?x.signedMessage:new TextDecoder().decode(x.signedMessage),m=x.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in E)||typeof E.signMessage!="function"||!("publicKey"in E)||typeof E!="object"||!E.publicKey||!("toBase58"in E.publicKey)||typeof E.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");h=[`${A.host} wants you to sign in with your Solana account:`,E.publicKey.toBase58(),...T?["",T,""]:[""],"Version: 1",`URI: ${A.href}`,`Issued At: ${(n=(r=w==null?void 0:w.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&n!==void 0?n:new Date().toISOString()}`,...!((i=w==null?void 0:w.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${w.signInWithSolana.notBefore}`]:[],...!((o=w==null?void 0:w.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${w.signInWithSolana.expirationTime}`]:[],...!((a=w==null?void 0:w.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${w.signInWithSolana.chainId}`]:[],...!((l=w==null?void 0:w.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${w.signInWithSolana.nonce}`]:[],...!((c=w==null?void 0:w.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${w.signInWithSolana.requestId}`]:[],...!((d=(u=w==null?void 0:w.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||d===void 0)&&d.length?["Resources",...w.signInWithSolana.resources.map(x=>`- ${x}`)]:[]].join(`
`);const C=await E.signMessage(new TextEncoder().encode(h),"utf8");if(!C||!(C instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");m=C}}try{const{data:g,error:_}=await P(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:h,signature:Da(m)},!((y=e.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:(p=e.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:ue});if(_)throw _;return!g||!g.session||!g.user?{data:{user:null,session:null},error:new dt}:(g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),{data:Object.assign({},g),error:_})}catch(g){if(k(g))return{data:{user:null,session:null},error:g};throw g}}async _exchangeCodeForSession(e){const s=await ke(this.storage,`${this.storageKey}-code-verifier`),[r,n]=(s??"").split("/");try{const{data:i,error:o}=await P(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:ue});if(await me(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new dt}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:n??null}),error:o})}catch(i){if(k(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:s,provider:r,token:n,access_token:i,nonce:o}=e,a=await P(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:n,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:ue}),{data:l,error:c}=a;return c?{data:{user:null,session:null},error:c}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new dt}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:c})}catch(s){if(k(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOtp(e){var s,r,n,i,o;try{if("email"in e){const{email:a,options:l}=e;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await De(this.storage,this.storageKey));const{error:d}=await P(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:d}}if("phone"in e){const{phone:a,options:l}=e,{data:c,error:u}=await P(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u}}throw new ht("You must provide either an email or phone number.")}catch(a){if(k(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var s,r;try{let n,i;"options"in e&&(n=(s=e.options)===null||s===void 0?void 0:s.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await P(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:n,xform:ue});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,c=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(n){if(k(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithSSO(e){var s,r,n;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await De(this.storage,this.storageKey)),await P(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(s=e.options)===null||s===void 0?void 0:s.redirectTo)!==null&&r!==void 0?r:void 0}),!((n=e==null?void 0:e.options)===null||n===void 0)&&n.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:sl})}catch(i){if(k(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:s},error:r}=e;if(r)throw r;if(!s)throw new ge;const{error:n}=await P(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return{data:{user:null,session:null},error:n}})}catch(e){if(k(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const s=`${this.url}/resend`;if("email"in e){const{email:r,type:n,options:i}=e,{error:o}=await P(this.fetch,"POST",s,{headers:this.headers,body:{email:r,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:r,type:n,options:i}=e,{data:o,error:a}=await P(this.fetch,"POST",s,{headers:this.headers,body:{phone:r,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new ht("You must provide either an email or phone number and a type")}catch(s){if(k(s))return{data:{user:null,session:null},error:s};throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async s=>s))}async _acquireLock(e,s){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await r,await s()))();return this.pendingInLock.push((async()=>{try{await n}catch{}})()),n}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=s();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const n=[...this.pendingInLock];await Promise.all(n),this.pendingInLock.splice(0,n.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await e(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const s=await ke(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?e=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<Vt:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const o=await ke(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=Kt()}if(this.storage.isServer&&e.user){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,c,u)=>(!o&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,c,u))})}return{data:{session:e},error:null}}const{session:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:n},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await P(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:ye}):await this._useSession(async s=>{var r,n,i;const{data:o,error:a}=s;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ge}:await P(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(n=o.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0,xform:ye})})}catch(s){if(k(s))return Oa(s)&&(await this._removeSession(),await me(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:s};throw s}}async updateUser(e,s={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,s))}async _updateUser(e,s={}){try{return await this._useSession(async r=>{const{data:n,error:i}=r;if(i)throw i;if(!n.session)throw new ge;const o=n.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await De(this.storage,this.storageKey));const{data:c,error:u}=await P(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s==null?void 0:s.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:ye});if(u)throw u;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(k(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new ge;const s=Date.now()/1e3;let r=s,n=!0,i=null;const{payload:o}=Wt(e.access_token);if(o.exp&&(r=o.exp,n=r<=s),n){const{session:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;i={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-s,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(s){if(k(s))return{data:{session:null,user:null},error:s};throw s}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async s=>{var r;if(!e){const{data:o,error:a}=s;if(a)throw a;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new ge;const{session:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:n?{data:{user:n.user,session:n},error:null}:{data:{user:null,session:null},error:null}})}catch(s){if(k(s))return{data:{user:null,session:null},error:s};throw s}}async _getSessionFromURL(e,s){try{if(!ee())throw new ft("No browser detected.");if(e.error||e.error_description||e.error_code)throw new ft(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new zs("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new ft("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new zs("No code detected.");const{data:T,error:w}=await this._exchangeCodeForSession(e.code);if(w)throw w;const E=new URL(window.location.href);return E.searchParams.delete("code"),window.history.replaceState(window.history.state,"",E.toString()),{data:{session:T.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:n,access_token:i,refresh_token:o,expires_in:a,expires_at:l,token_type:c}=e;if(!i||!a||!o||!c)throw new ft("No session defined in URL");const u=Math.round(Date.now()/1e3),d=parseInt(a);let y=u+d;l&&(y=parseInt(l));const p=y-u;p*1e3<=Me&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${d}s`);const h=y-d;u-h>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",h,y,u):u-h<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",h,y,u);const{data:m,error:g}=await this._getUser(i);if(g)throw g;const _={provider_token:r,provider_refresh_token:n,access_token:i,expires_in:d,expires_at:y,refresh_token:o,token_type:c,user:m.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:_,redirectType:e.type},error:null}}catch(r){if(k(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const s=await ke(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&s)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async s=>{var r;const{data:n,error:i}=s;if(i)return{error:i};const o=(r=n.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(Pa(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await me(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const s=Ba(),r={id:s,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async s=>{var r,n;try{const{data:{session:i},error:o}=s;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,s={}){let r=null,n=null;this.flowType==="pkce"&&([r,n]=await De(this.storage,this.storageKey,!0));try{return await P(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:n,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(i){if(k(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:s,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=s.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(s){if(k(s))return{data:null,error:s};throw s}}async linkIdentity(e){var s;try{const{data:r,error:n}=await this._useSession(async i=>{var o,a,l,c,u;const{data:d,error:y}=i;if(y)throw y;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await P(this.fetch,"GET",p,{headers:this.headers,jwt:(u=(c=d.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(n)throw n;return ee()&&!(!((s=e.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(k(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async s=>{var r,n;const{data:i,error:o}=s;if(o)throw o;return await P(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(n=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&n!==void 0?n:void 0})})}catch(s){if(k(s))return{data:null,error:s};throw s}}async _refreshAccessToken(e){const s=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{const r=Date.now();return await qa(async n=>(n>0&&await Fa(200*Math.pow(2,n-1)),this._debug(s,"refreshing attempt",n),await P(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:ue})),(n,i)=>{const o=200*Math.pow(2,n);return i&&zt(i)&&Date.now()+o-r<Me})}catch(r){if(this._debug(s,"error",r),k(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(s,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,s){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",s,"url",r),ee()&&!s.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,s;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const n=await ke(this.storage,this.storageKey);if(n&&this.userStorage){let o=await ke(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:n.user},await Fe(this.userStorage,this.storageKey+"-user",o)),n.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:Kt()}else if(n&&!n.user&&!n.user){const o=await ke(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(n.user=o.user,await me(this.storage,this.storageKey+"-user"),await Fe(this.storage,this.storageKey,n)):n.user=Kt()}if(this._debug(r,"session from storage",n),!this._isValidSession(n)){this._debug(r,"session is not valid"),n!==null&&await this._removeSession();return}const i=((s=n.expires_at)!==null&&s!==void 0?s:1/0)*1e3-Date.now()<Vt;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${Vt}s`),i){if(this.autoRefreshToken&&n.refresh_token){const{error:o}=await this._callRefreshToken(n.refresh_token);o&&(console.error(o),zt(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(n.user&&n.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(n.access_token);!a&&(o!=null&&o.user)?(n.user=o.user,await this._saveSession(n),await this._notifyAllSubscribers("SIGNED_IN",n)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(r,"error",n),console.error(n);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var s,r;if(!e)throw new ge;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new It;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new ge;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={session:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(n,"error",i),k(i)){const o={session:null,error:i};return zt(i)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(e,s,r=!0){const n=`#_notifyAllSubscribers(${e})`;this._debug(n,"begin",s,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:s});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,s)}catch(l){i.push(l)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(n,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const s=Object.assign({},e),r=s.user&&s.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&s.user&&await Fe(this.userStorage,this.storageKey+"-user",{user:s.user});const n=Object.assign({},s);delete n.user;const i=Xs(n);await Fe(this.storage,this.storageKey,i)}else{const n=Xs(s);await Fe(this.storage,this.storageKey,n)}}async _removeSession(){this._debug("#_removeSession()"),await me(this.storage,this.storageKey),await me(this.storage,this.storageKey+"-code-verifier"),await me(this.storage,this.storageKey+"-user"),this.userStorage&&await me(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&ee()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Me);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async s=>{const{data:{session:r}}=s;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const n=Math.floor((r.expires_at*1e3-e)/Me);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts ${Me}ms, refresh threshold is ${as} ticks`),n<=as&&await this._callRefreshToken(r.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof fn)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ee()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const s=`#_onVisibilityChanged(${e})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,s,r){const n=[`provider=${encodeURIComponent(s)}`];if(r!=null&&r.redirectTo&&n.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&n.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await De(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});n.push(a.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);n.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&n.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${n.join("&")}`}async _unenroll(e){try{return await this._useSession(async s=>{var r;const{data:n,error:i}=s;return i?{data:null,error:i}:await P(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=n==null?void 0:n.session)===null||r===void 0?void 0:r.access_token})})}catch(s){if(k(s))return{data:null,error:s};throw s}}async _enroll(e){try{return await this._useSession(async s=>{var r,n;const{data:i,error:o}=s;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:c}=await P(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return c?{data:null,error:c}:(e.factorType==="totp"&&(!((n=l==null?void 0:l.totp)===null||n===void 0)&&n.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(s){if(k(s))return{data:null,error:s};throw s}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var r;const{data:n,error:i}=s;if(i)return{data:null,error:i};const{data:o,error:a}=await P(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=n==null?void 0:n.session)===null||r===void 0?void 0:r.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(s){if(k(s))return{data:null,error:s};throw s}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var r;const{data:n,error:i}=s;return i?{data:null,error:i}:await P(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=n==null?void 0:n.session)===null||r===void 0?void 0:r.access_token})})}catch(s){if(k(s))return{data:null,error:s};throw s}})}async _challengeAndVerify(e){const{data:s,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:s.id,code:e.code})}async _listFactors(){const{data:{user:e},error:s}=await this.getUser();if(s)return{data:null,error:s};const r=(e==null?void 0:e.factors)||[],n=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:n,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var s,r;const{data:{session:n},error:i}=e;if(i)return{data:null,error:i};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Wt(n.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((r=(s=n.user.factors)===null||s===void 0?void 0:s.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const u=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(e,s={keys:[]}){let r=s.keys.find(a=>a.kid===e);if(r)return r;const n=Date.now();if(r=this.jwks.keys.find(a=>a.kid===e),r&&this.jwks_cached_at+Ta>n)return r;const{data:i,error:o}=await P(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=n,r=i.keys.find(a=>a.kid===e),!r)?null:r}async getClaims(e,s={}){try{let r=e;if(!r){const{data:p,error:h}=await this.getSession();if(h||!p.session)return{data:null,error:h};r=p.session.access_token}const{header:n,payload:i,signature:o,raw:{header:a,payload:l}}=Wt(r);s!=null&&s.allowExpired||Ga(i.exp);const c=!n.alg||n.alg.startsWith("HS")||!n.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(n.kid,s!=null&&s.keys?{keys:s.keys}:s==null?void 0:s.jwks);if(!c){const{error:p}=await this.getUser(r);if(p)throw p;return{data:{claims:i,header:n,signature:o},error:null}}const u=Xa(n.alg),d=await crypto.subtle.importKey("jwk",c,u,!0,["verify"]);if(!await crypto.subtle.verify(u,d,o,La(`${a}.${l}`)))throw new us("Invalid JWT signature");return{data:{claims:i,header:n,signature:o},error:null}}catch(r){if(k(r))return{data:null,error:r};throw r}}}tt.nextInstanceID=0;const hl=tt;class fl extends hl{constructor(e){super(e)}}var pl=function(t,e,s,r){function n(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?i(u.value):n(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};class ml{constructor(e,s,r){var n,i,o;if(this.supabaseUrl=e,this.supabaseKey=s,!e)throw new Error("supabaseUrl is required.");if(!s)throw new Error("supabaseKey is required.");const a=wa(e),l=new URL(a);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,u={db:da,realtime:fa,auth:Object.assign(Object.assign({},ha),{storageKey:c}),global:ua},d=_a(r??{},u);this.storageKey=(n=d.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(i=d.global.headers)!==null&&i!==void 0?i:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(y,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=d.auth)!==null&&o!==void 0?o:{},this.headers,d.global.fetch),this.fetch=ya(s,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new Io(new URL("rest/v1",l).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new aa(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new lo(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,s={},r={}){return this.rest.rpc(e,s,r)}channel(e,s={config:{}}){return this.realtime.channel(e,s)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,s;return pl(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(s=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&s!==void 0?s:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:s,detectSessionInUrl:r,storage:n,storageKey:i,flowType:o,lock:a,debug:l},c,u){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new fl({url:this.authUrl.href,headers:Object.assign(Object.assign({},d),c),storageKey:i,autoRefreshToken:e,persistSession:s,detectSessionInUrl:r,storage:n,flowType:o,lock:a,debug:l,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new Jo(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,r)=>{this._handleTokenChanged(s,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,s,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),s=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const gl=(t,e,s)=>new ml(t,e,s);function yl(){if(typeof window<"u"||typeof process>"u"||process.version===void 0||process.version===null)return!1;const t=process.version.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}yl()&&console.warn("âš ï¸  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Y=[],Se=[],le=[],ce=[],O={getStudents:()=>Promise.resolve({data:Y,error:null}),addStudent:t=>{const e={...t,id:String(Y.length+1),created_at:new Date().toISOString()};return Y.push(e),Promise.resolve({data:[e],error:null})},updateStudent:(t,e)=>{const s=Y.findIndex(r=>r.id===t);return s!==-1?(Y[s]={...Y[s],...e},Promise.resolve({data:[Y[s]],error:null})):Promise.resolve({data:null,error:{message:"Student not found"}})},deleteStudent:t=>{const e=Y.findIndex(s=>s.id===t);if(e!==-1){const s=Y.splice(e,1);return Promise.resolve({data:s,error:null})}return Promise.resolve({data:null,error:{message:"Student not found"}})},getTransactions:()=>Promise.resolve({data:Se,error:null}),addTransaction:t=>{const e={...t,id:String(Se.length+1),created_at:new Date().toISOString()};if(t.student_id){const s=Y.find(r=>r.id===t.student_id);s&&(e.student={name:s.name,nickname:s.nickname})}return Se.push(e),Promise.resolve({data:[e],error:null})},updateTransaction:(t,e)=>{const s=Se.findIndex(r=>r.id===t);return s!==-1?(Se[s]={...Se[s],...e},Promise.resolve({data:[Se[s]],error:null})):Promise.resolve({data:null,error:{message:"Transaction not found"}})},getExpenses:()=>Promise.resolve({data:le,error:null}),addExpense:t=>{const e={...t,id:String(le.length+1),created_at:new Date().toISOString()};return le.push(e),Promise.resolve({data:[e],error:null})},updateExpense:(t,e)=>{const s=le.findIndex(r=>r.id===t);return s!==-1?(le[s]={...le[s],...e},Promise.resolve({data:[le[s]],error:null})):Promise.resolve({data:null,error:{message:"Expense not found"}})},deleteExpense:t=>{const e=le.findIndex(s=>s.id===t);if(e!==-1){const s=le.splice(e,1);return Promise.resolve({data:s,error:null})}return Promise.resolve({data:null,error:{message:"Expense not found"}})},getPaymentLinks:()=>Promise.resolve({data:ce,error:null}),addPaymentLink:t=>{const e={...t,id:String(ce.length+1),created_at:new Date().toISOString()};if(t.student_id){const s=Y.find(r=>r.id===t.student_id);s&&(e.student={name:s.name,nickname:s.nickname,phone:s.phone})}return ce.push(e),Promise.resolve({data:[e],error:null})},updatePaymentLink:(t,e)=>{const s=ce.findIndex(r=>r.id===t);return s!==-1?(ce[s]={...ce[s],...e},Promise.resolve({data:[ce[s]],error:null})):Promise.resolve({data:null,error:{message:"Payment link not found"}})},deletePaymentLink:t=>{const e=ce.findIndex(s=>s.id===t);if(e!==-1){const s=ce.splice(e,1);return Promise.resolve({data:s,error:null})}return Promise.resolve({data:null,error:{message:"Payment link not found"}})},mockCampaigns:[],getCampaigns:()=>Promise.resolve({data:O.mockCampaigns,error:null}),addCampaign:t=>{const e={...t,id:t.id||String(O.mockCampaigns.length+1),created_at:new Date().toISOString()};return O.mockCampaigns.push(e),Promise.resolve({data:e,error:null})},updateCampaign:(t,e)=>{const s=O.mockCampaigns.findIndex(r=>r.id===t);return s!==-1?(O.mockCampaigns[s]={...O.mockCampaigns[s],...e},Promise.resolve({data:O.mockCampaigns[s],error:null})):Promise.resolve({data:null,error:{message:"Campaign not found"}})},deleteCampaign:t=>{const e=O.mockCampaigns.findIndex(s=>s.id===t);if(e!==-1){const s=O.mockCampaigns.splice(e,1);return Promise.resolve({data:s,error:null})}return Promise.resolve({data:null,error:{message:"Campaign not found"}})},mockWebhookLogs:[],addWebhookLog:t=>{const e={...t,id:t.id||String(O.mockWebhookLogs.length+1),created_at:new Date().toISOString()};return O.mockWebhookLogs.push(e),Promise.resolve({data:[e],error:null})}},pn="https://xpvnhfafueuobpebciqg.supabase.co",mn="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inhwdm5oZmFmdWV1b2JwZWJjaXFnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQyNDgwOTAsImV4cCI6MjA2OTgyNDA5MH0.wFcHRb4JzRBnpgJOfdYWYMDex_W5QWSYjmBYxwc5F94",xe=!pn.includes("your-project")&&!mn.includes("your-anon-key"),$=xe?gl(pn,mn,{auth:{persistSession:!1},global:{fetch:(t,e={})=>{const r=new AbortController,n=setTimeout(()=>r.abort(),5e3);return fetch(t,{...e,signal:r.signal}).finally(()=>{clearTimeout(n)}).catch(i=>{throw console.warn("Supabase fetch failed, falling back to mock data:",i.message),i})}}}):null,Cd={signUp:(t,e)=>xe?$.auth.signUp({email:t,password:e}):Promise.resolve({data:null,error:{message:"Supabase not configured"}}),signIn:(t,e)=>xe?$.auth.signInWithPassword({email:t,password:e}):Promise.resolve({data:null,error:{message:"Supabase not configured"}}),signOut:()=>xe?$.auth.signOut():Promise.resolve({error:null}),getUser:()=>xe?$.auth.getUser():Promise.resolve({data:{user:null},error:null}),onAuthStateChange:t=>xe?$.auth.onAuthStateChange(t):t("SIGNED_OUT",null)},D=async(t,e)=>{if(!xe)return console.info("Supabase not configured, using mock data"),e();try{return await t()}catch(s){return console.warn("Supabase operation failed, falling back to mock data:",s.message),e()}},q={getStudents:async()=>D(()=>$.from("students").select("*").order("name"),()=>O.getStudents()),addStudent:t=>D(()=>$.from("students").insert(t),()=>O.addStudent(t)),updateStudent:(t,e)=>D(()=>$.from("students").update(e).eq("id",t),()=>O.updateStudent(t,e)),deleteStudent:t=>D(()=>$.from("students").delete().eq("id",t),()=>O.deleteStudent(t)),getTransactions:async()=>D(()=>$.from("transactions").select(`
        *,
        student:students(name, nickname)
      `).order("created_at",{ascending:!1}),()=>O.getTransactions()),addTransaction:t=>D(()=>$.from("transactions").insert(t),()=>O.addTransaction(t)),updateTransaction:(t,e)=>D(()=>$.from("transactions").update(e).eq("id",t),()=>O.updateTransaction(t,e)),getPaymentLinks:async()=>D(()=>$.from("payment_links").select(`
        *,
        student:students(name, nickname, phone)
      `).order("created_at",{ascending:!1}),()=>O.getPaymentLinks()),addPaymentLink:t=>D(()=>$.from("payment_links").insert(t),()=>O.addPaymentLink(t)),updatePaymentLink:(t,e)=>D(()=>$.from("payment_links").update(e).eq("id",t),()=>O.updatePaymentLink(t,e)),deletePaymentLink:t=>D(()=>$.from("payment_links").delete().eq("id",t),()=>O.deletePaymentLink(t)),getExpenses:async()=>D(()=>$.from("expenses").select("*").order("created_at",{ascending:!1}),()=>O.getExpenses()),addExpense:t=>D(()=>$.from("expenses").insert(t),()=>O.addExpense(t)),updateExpense:(t,e)=>D(()=>$.from("expenses").update(e).eq("id",t),()=>O.updateExpense(t,e)),deleteExpense:t=>D(()=>$.from("expenses").delete().eq("id",t),()=>O.deleteExpense(t)),getCampaigns:async()=>D(()=>$.from("campaigns").select("*").order("created_at",{ascending:!1}),()=>O.getCampaigns?O.getCampaigns():Promise.resolve({data:[],error:null})),addCampaign:t=>D(()=>$.from("campaigns").insert(t),()=>O.addCampaign?O.addCampaign(t):Promise.resolve({data:t,error:null})),updateCampaign:(t,e)=>D(()=>$.from("campaigns").update(e).eq("id",t),()=>O.updateCampaign?O.updateCampaign(t,e):Promise.resolve({data:e,error:null})),deleteCampaign:t=>D(()=>$.from("campaigns").delete().eq("id",t),()=>O.deleteCampaign?O.deleteCampaign(t):Promise.resolve({data:null,error:null})),addWebhookLog:t=>D(()=>$.from("webhook_logs").insert(t),()=>O.addWebhookLog?O.addWebhookLog(t):Promise.resolve({data:t,error:null}))};function gn(t,e){return function(){return t.apply(e,arguments)}}const{toString:vl}=Object.prototype,{getPrototypeOf:Es}=Object,{iterator:$t,toStringTag:yn}=Symbol,Lt=(t=>e=>{const s=vl.call(e);return t[s]||(t[s]=s.slice(8,-1).toLowerCase())})(Object.create(null)),ne=t=>(t=t.toLowerCase(),e=>Lt(e)===t),Dt=t=>e=>typeof e===t,{isArray:ze}=Array,st=Dt("undefined");function ot(t){return t!==null&&!st(t)&&t.constructor!==null&&!st(t.constructor)&&z(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const vn=ne("ArrayBuffer");function wl(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&vn(t.buffer),e}const _l=Dt("string"),z=Dt("function"),wn=Dt("number"),at=t=>t!==null&&typeof t=="object",bl=t=>t===!0||t===!1,mt=t=>{if(Lt(t)!=="object")return!1;const e=Es(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(yn in t)&&!($t in t)},kl=t=>{if(!at(t)||ot(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},Sl=ne("Date"),El=ne("File"),Tl=ne("Blob"),xl=ne("FileList"),Pl=t=>at(t)&&z(t.pipe),Ol=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||z(t.append)&&((e=Lt(t))==="formdata"||e==="object"&&z(t.toString)&&t.toString()==="[object FormData]"))},Al=ne("URLSearchParams"),[Cl,Rl,jl,Il]=["ReadableStream","Request","Response","Headers"].map(ne),$l=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function lt(t,e,{allOwnKeys:s=!1}={}){if(t===null||typeof t>"u")return;let r,n;if(typeof t!="object"&&(t=[t]),ze(t))for(r=0,n=t.length;r<n;r++)e.call(null,t[r],r,t);else{if(ot(t))return;const i=s?Object.getOwnPropertyNames(t):Object.keys(t),o=i.length;let a;for(r=0;r<o;r++)a=i[r],e.call(null,t[a],a,t)}}function _n(t,e){if(ot(t))return null;e=e.toLowerCase();const s=Object.keys(t);let r=s.length,n;for(;r-- >0;)if(n=s[r],e===n.toLowerCase())return n;return null}const Ae=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,bn=t=>!st(t)&&t!==Ae;function ds(){const{caseless:t}=bn(this)&&this||{},e={},s=(r,n)=>{const i=t&&_n(e,n)||n;mt(e[i])&&mt(r)?e[i]=ds(e[i],r):mt(r)?e[i]=ds({},r):ze(r)?e[i]=r.slice():e[i]=r};for(let r=0,n=arguments.length;r<n;r++)arguments[r]&&lt(arguments[r],s);return e}const Ll=(t,e,s,{allOwnKeys:r}={})=>(lt(e,(n,i)=>{s&&z(n)?t[i]=gn(n,s):t[i]=n},{allOwnKeys:r}),t),Dl=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Ul=(t,e,s,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),s&&Object.assign(t.prototype,s)},Bl=(t,e,s,r)=>{let n,i,o;const a={};if(e=e||{},t==null)return e;do{for(n=Object.getOwnPropertyNames(t),i=n.length;i-- >0;)o=n[i],(!r||r(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=s!==!1&&Es(t)}while(t&&(!s||s(t,e))&&t!==Object.prototype);return e},Nl=(t,e,s)=>{t=String(t),(s===void 0||s>t.length)&&(s=t.length),s-=e.length;const r=t.indexOf(e,s);return r!==-1&&r===s},Ml=t=>{if(!t)return null;if(ze(t))return t;let e=t.length;if(!wn(e))return null;const s=new Array(e);for(;e-- >0;)s[e]=t[e];return s},Fl=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Es(Uint8Array)),ql=(t,e)=>{const r=(t&&t[$t]).call(t);let n;for(;(n=r.next())&&!n.done;){const i=n.value;e.call(t,i[0],i[1])}},Hl=(t,e)=>{let s;const r=[];for(;(s=t.exec(e))!==null;)r.push(s);return r},Vl=ne("HTMLFormElement"),zl=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(s,r,n){return r.toUpperCase()+n}),tr=(({hasOwnProperty:t})=>(e,s)=>t.call(e,s))(Object.prototype),Wl=ne("RegExp"),kn=(t,e)=>{const s=Object.getOwnPropertyDescriptors(t),r={};lt(s,(n,i)=>{let o;(o=e(n,i,t))!==!1&&(r[i]=o||n)}),Object.defineProperties(t,r)},Kl=t=>{kn(t,(e,s)=>{if(z(t)&&["arguments","caller","callee"].indexOf(s)!==-1)return!1;const r=t[s];if(z(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+s+"'")})}})},Jl=(t,e)=>{const s={},r=n=>{n.forEach(i=>{s[i]=!0})};return ze(t)?r(t):r(String(t).split(e)),s},Gl=()=>{},Xl=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function Zl(t){return!!(t&&z(t.append)&&t[yn]==="FormData"&&t[$t])}const Ql=t=>{const e=new Array(10),s=(r,n)=>{if(at(r)){if(e.indexOf(r)>=0)return;if(ot(r))return r;if(!("toJSON"in r)){e[n]=r;const i=ze(r)?[]:{};return lt(r,(o,a)=>{const l=s(o,n+1);!st(l)&&(i[a]=l)}),e[n]=void 0,i}}return r};return s(t,0)},Yl=ne("AsyncFunction"),ec=t=>t&&(at(t)||z(t))&&z(t.then)&&z(t.catch),Sn=((t,e)=>t?setImmediate:e?((s,r)=>(Ae.addEventListener("message",({source:n,data:i})=>{n===Ae&&i===s&&r.length&&r.shift()()},!1),n=>{r.push(n),Ae.postMessage(s,"*")}))(`axios@${Math.random()}`,[]):s=>setTimeout(s))(typeof setImmediate=="function",z(Ae.postMessage)),tc=typeof queueMicrotask<"u"?queueMicrotask.bind(Ae):typeof process<"u"&&process.nextTick||Sn,sc=t=>t!=null&&z(t[$t]),f={isArray:ze,isArrayBuffer:vn,isBuffer:ot,isFormData:Ol,isArrayBufferView:wl,isString:_l,isNumber:wn,isBoolean:bl,isObject:at,isPlainObject:mt,isEmptyObject:kl,isReadableStream:Cl,isRequest:Rl,isResponse:jl,isHeaders:Il,isUndefined:st,isDate:Sl,isFile:El,isBlob:Tl,isRegExp:Wl,isFunction:z,isStream:Pl,isURLSearchParams:Al,isTypedArray:Fl,isFileList:xl,forEach:lt,merge:ds,extend:Ll,trim:$l,stripBOM:Dl,inherits:Ul,toFlatObject:Bl,kindOf:Lt,kindOfTest:ne,endsWith:Nl,toArray:Ml,forEachEntry:ql,matchAll:Hl,isHTMLForm:Vl,hasOwnProperty:tr,hasOwnProp:tr,reduceDescriptors:kn,freezeMethods:Kl,toObjectSet:Jl,toCamelCase:zl,noop:Gl,toFiniteNumber:Xl,findKey:_n,global:Ae,isContextDefined:bn,isSpecCompliantForm:Zl,toJSONObject:Ql,isAsyncFn:Yl,isThenable:ec,setImmediate:Sn,asap:tc,isIterable:sc};function S(t,e,s,r,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),s&&(this.config=s),r&&(this.request=r),n&&(this.response=n,this.status=n.status?n.status:null)}f.inherits(S,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:f.toJSONObject(this.config),code:this.code,status:this.status}}});const En=S.prototype,Tn={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{Tn[t]={value:t}});Object.defineProperties(S,Tn);Object.defineProperty(En,"isAxiosError",{value:!0});S.from=(t,e,s,r,n,i)=>{const o=Object.create(En);return f.toFlatObject(t,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),S.call(o,t.message,e,s,r,n),o.cause=t,o.name=t.name,i&&Object.assign(o,i),o};const rc=null;function hs(t){return f.isPlainObject(t)||f.isArray(t)}function xn(t){return f.endsWith(t,"[]")?t.slice(0,-2):t}function sr(t,e,s){return t?t.concat(e).map(function(n,i){return n=xn(n),!s&&i?"["+n+"]":n}).join(s?".":""):e}function nc(t){return f.isArray(t)&&!t.some(hs)}const ic=f.toFlatObject(f,{},null,function(e){return/^is[A-Z]/.test(e)});function Ut(t,e,s){if(!f.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,s=f.toFlatObject(s,{metaTokens:!0,dots:!1,indexes:!1},!1,function(m,g){return!f.isUndefined(g[m])});const r=s.metaTokens,n=s.visitor||u,i=s.dots,o=s.indexes,l=(s.Blob||typeof Blob<"u"&&Blob)&&f.isSpecCompliantForm(e);if(!f.isFunction(n))throw new TypeError("visitor must be a function");function c(h){if(h===null)return"";if(f.isDate(h))return h.toISOString();if(f.isBoolean(h))return h.toString();if(!l&&f.isBlob(h))throw new S("Blob is not supported. Use a Buffer instead.");return f.isArrayBuffer(h)||f.isTypedArray(h)?l&&typeof Blob=="function"?new Blob([h]):Buffer.from(h):h}function u(h,m,g){let _=h;if(h&&!g&&typeof h=="object"){if(f.endsWith(m,"{}"))m=r?m:m.slice(0,-2),h=JSON.stringify(h);else if(f.isArray(h)&&nc(h)||(f.isFileList(h)||f.endsWith(m,"[]"))&&(_=f.toArray(h)))return m=xn(m),_.forEach(function(w,E){!(f.isUndefined(w)||w===null)&&e.append(o===!0?sr([m],E,i):o===null?m:m+"[]",c(w))}),!1}return hs(h)?!0:(e.append(sr(g,m,i),c(h)),!1)}const d=[],y=Object.assign(ic,{defaultVisitor:u,convertValue:c,isVisitable:hs});function p(h,m){if(!f.isUndefined(h)){if(d.indexOf(h)!==-1)throw Error("Circular reference detected in "+m.join("."));d.push(h),f.forEach(h,function(_,T){(!(f.isUndefined(_)||_===null)&&n.call(e,_,f.isString(T)?T.trim():T,m,y))===!0&&p(_,m?m.concat(T):[T])}),d.pop()}}if(!f.isObject(t))throw new TypeError("data must be an object");return p(t),e}function rr(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function Ts(t,e){this._pairs=[],t&&Ut(t,this,e)}const Pn=Ts.prototype;Pn.append=function(e,s){this._pairs.push([e,s])};Pn.toString=function(e){const s=e?function(r){return e.call(this,r,rr)}:rr;return this._pairs.map(function(n){return s(n[0])+"="+s(n[1])},"").join("&")};function oc(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function On(t,e,s){if(!e)return t;const r=s&&s.encode||oc;f.isFunction(s)&&(s={serialize:s});const n=s&&s.serialize;let i;if(n?i=n(e,s):i=f.isURLSearchParams(e)?e.toString():new Ts(e,s).toString(r),i){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class nr{constructor(){this.handlers=[]}use(e,s,r){return this.handlers.push({fulfilled:e,rejected:s,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){f.forEach(this.handlers,function(r){r!==null&&e(r)})}}const An={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},ac=typeof URLSearchParams<"u"?URLSearchParams:Ts,lc=typeof FormData<"u"?FormData:null,cc=typeof Blob<"u"?Blob:null,uc={isBrowser:!0,classes:{URLSearchParams:ac,FormData:lc,Blob:cc},protocols:["http","https","file","blob","url","data"]},xs=typeof window<"u"&&typeof document<"u",fs=typeof navigator=="object"&&navigator||void 0,dc=xs&&(!fs||["ReactNative","NativeScript","NS"].indexOf(fs.product)<0),hc=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",fc=xs&&window.location.href||"http://localhost",pc=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:xs,hasStandardBrowserEnv:dc,hasStandardBrowserWebWorkerEnv:hc,navigator:fs,origin:fc},Symbol.toStringTag,{value:"Module"})),F={...pc,...uc};function mc(t,e){return Ut(t,new F.classes.URLSearchParams,{visitor:function(s,r,n,i){return F.isNode&&f.isBuffer(s)?(this.append(r,s.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...e})}function gc(t){return f.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function yc(t){const e={},s=Object.keys(t);let r;const n=s.length;let i;for(r=0;r<n;r++)i=s[r],e[i]=t[i];return e}function Cn(t){function e(s,r,n,i){let o=s[i++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=i>=s.length;return o=!o&&f.isArray(n)?n.length:o,l?(f.hasOwnProp(n,o)?n[o]=[n[o],r]:n[o]=r,!a):((!n[o]||!f.isObject(n[o]))&&(n[o]=[]),e(s,r,n[o],i)&&f.isArray(n[o])&&(n[o]=yc(n[o])),!a)}if(f.isFormData(t)&&f.isFunction(t.entries)){const s={};return f.forEachEntry(t,(r,n)=>{e(gc(r),n,s,0)}),s}return null}function vc(t,e,s){if(f.isString(t))try{return(e||JSON.parse)(t),f.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(s||JSON.stringify)(t)}const ct={transitional:An,adapter:["xhr","http","fetch"],transformRequest:[function(e,s){const r=s.getContentType()||"",n=r.indexOf("application/json")>-1,i=f.isObject(e);if(i&&f.isHTMLForm(e)&&(e=new FormData(e)),f.isFormData(e))return n?JSON.stringify(Cn(e)):e;if(f.isArrayBuffer(e)||f.isBuffer(e)||f.isStream(e)||f.isFile(e)||f.isBlob(e)||f.isReadableStream(e))return e;if(f.isArrayBufferView(e))return e.buffer;if(f.isURLSearchParams(e))return s.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return mc(e,this.formSerializer).toString();if((a=f.isFileList(e))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return Ut(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return i||n?(s.setContentType("application/json",!1),vc(e)):e}],transformResponse:[function(e){const s=this.transitional||ct.transitional,r=s&&s.forcedJSONParsing,n=this.responseType==="json";if(f.isResponse(e)||f.isReadableStream(e))return e;if(e&&f.isString(e)&&(r&&!this.responseType||n)){const o=!(s&&s.silentJSONParsing)&&n;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?S.from(a,S.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:F.classes.FormData,Blob:F.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};f.forEach(["delete","get","head","post","put","patch"],t=>{ct.headers[t]={}});const wc=f.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),_c=t=>{const e={};let s,r,n;return t&&t.split(`
`).forEach(function(o){n=o.indexOf(":"),s=o.substring(0,n).trim().toLowerCase(),r=o.substring(n+1).trim(),!(!s||e[s]&&wc[s])&&(s==="set-cookie"?e[s]?e[s].push(r):e[s]=[r]:e[s]=e[s]?e[s]+", "+r:r)}),e},ir=Symbol("internals");function Je(t){return t&&String(t).trim().toLowerCase()}function gt(t){return t===!1||t==null?t:f.isArray(t)?t.map(gt):String(t)}function bc(t){const e=Object.create(null),s=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=s.exec(t);)e[r[1]]=r[2];return e}const kc=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Gt(t,e,s,r,n){if(f.isFunction(r))return r.call(this,e,s);if(n&&(e=s),!!f.isString(e)){if(f.isString(r))return e.indexOf(r)!==-1;if(f.isRegExp(r))return r.test(e)}}function Sc(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,s,r)=>s.toUpperCase()+r)}function Ec(t,e){const s=f.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+s,{value:function(n,i,o){return this[r].call(this,e,n,i,o)},configurable:!0})})}let W=class{constructor(e){e&&this.set(e)}set(e,s,r){const n=this;function i(a,l,c){const u=Je(l);if(!u)throw new Error("header name must be a non-empty string");const d=f.findKey(n,u);(!d||n[d]===void 0||c===!0||c===void 0&&n[d]!==!1)&&(n[d||l]=gt(a))}const o=(a,l)=>f.forEach(a,(c,u)=>i(c,u,l));if(f.isPlainObject(e)||e instanceof this.constructor)o(e,s);else if(f.isString(e)&&(e=e.trim())&&!kc(e))o(_c(e),s);else if(f.isObject(e)&&f.isIterable(e)){let a={},l,c;for(const u of e){if(!f.isArray(u))throw TypeError("Object iterator must return a key-value pair");a[c=u[0]]=(l=a[c])?f.isArray(l)?[...l,u[1]]:[l,u[1]]:u[1]}o(a,s)}else e!=null&&i(s,e,r);return this}get(e,s){if(e=Je(e),e){const r=f.findKey(this,e);if(r){const n=this[r];if(!s)return n;if(s===!0)return bc(n);if(f.isFunction(s))return s.call(this,n,r);if(f.isRegExp(s))return s.exec(n);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,s){if(e=Je(e),e){const r=f.findKey(this,e);return!!(r&&this[r]!==void 0&&(!s||Gt(this,this[r],r,s)))}return!1}delete(e,s){const r=this;let n=!1;function i(o){if(o=Je(o),o){const a=f.findKey(r,o);a&&(!s||Gt(r,r[a],a,s))&&(delete r[a],n=!0)}}return f.isArray(e)?e.forEach(i):i(e),n}clear(e){const s=Object.keys(this);let r=s.length,n=!1;for(;r--;){const i=s[r];(!e||Gt(this,this[i],i,e,!0))&&(delete this[i],n=!0)}return n}normalize(e){const s=this,r={};return f.forEach(this,(n,i)=>{const o=f.findKey(r,i);if(o){s[o]=gt(n),delete s[i];return}const a=e?Sc(i):String(i).trim();a!==i&&delete s[i],s[a]=gt(n),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const s=Object.create(null);return f.forEach(this,(r,n)=>{r!=null&&r!==!1&&(s[n]=e&&f.isArray(r)?r.join(", "):r)}),s}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,s])=>e+": "+s).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...s){const r=new this(e);return s.forEach(n=>r.set(n)),r}static accessor(e){const r=(this[ir]=this[ir]={accessors:{}}).accessors,n=this.prototype;function i(o){const a=Je(o);r[a]||(Ec(n,o),r[a]=!0)}return f.isArray(e)?e.forEach(i):i(e),this}};W.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);f.reduceDescriptors(W.prototype,({value:t},e)=>{let s=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[s]=r}}});f.freezeMethods(W);function Xt(t,e){const s=this||ct,r=e||s,n=W.from(r.headers);let i=r.data;return f.forEach(t,function(a){i=a.call(s,i,n.normalize(),e?e.status:void 0)}),n.normalize(),i}function Rn(t){return!!(t&&t.__CANCEL__)}function We(t,e,s){S.call(this,t??"canceled",S.ERR_CANCELED,e,s),this.name="CanceledError"}f.inherits(We,S,{__CANCEL__:!0});function jn(t,e,s){const r=s.config.validateStatus;!s.status||!r||r(s.status)?t(s):e(new S("Request failed with status code "+s.status,[S.ERR_BAD_REQUEST,S.ERR_BAD_RESPONSE][Math.floor(s.status/100)-4],s.config,s.request,s))}function Tc(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function xc(t,e){t=t||10;const s=new Array(t),r=new Array(t);let n=0,i=0,o;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),u=r[i];o||(o=c),s[n]=l,r[n]=c;let d=i,y=0;for(;d!==n;)y+=s[d++],d=d%t;if(n=(n+1)%t,n===i&&(i=(i+1)%t),c-o<e)return;const p=u&&c-u;return p?Math.round(y*1e3/p):void 0}}function Pc(t,e){let s=0,r=1e3/e,n,i;const o=(c,u=Date.now())=>{s=u,n=null,i&&(clearTimeout(i),i=null),t(...c)};return[(...c)=>{const u=Date.now(),d=u-s;d>=r?o(c,u):(n=c,i||(i=setTimeout(()=>{i=null,o(n)},r-d)))},()=>n&&o(n)]}const St=(t,e,s=3)=>{let r=0;const n=xc(50,250);return Pc(i=>{const o=i.loaded,a=i.lengthComputable?i.total:void 0,l=o-r,c=n(l),u=o<=a;r=o;const d={loaded:o,total:a,progress:a?o/a:void 0,bytes:l,rate:c||void 0,estimated:c&&a&&u?(a-o)/c:void 0,event:i,lengthComputable:a!=null,[e?"download":"upload"]:!0};t(d)},s)},or=(t,e)=>{const s=t!=null;return[r=>e[0]({lengthComputable:s,total:t,loaded:r}),e[1]]},ar=t=>(...e)=>f.asap(()=>t(...e)),Oc=F.hasStandardBrowserEnv?((t,e)=>s=>(s=new URL(s,F.origin),t.protocol===s.protocol&&t.host===s.host&&(e||t.port===s.port)))(new URL(F.origin),F.navigator&&/(msie|trident)/i.test(F.navigator.userAgent)):()=>!0,Ac=F.hasStandardBrowserEnv?{write(t,e,s,r,n,i){const o=[t+"="+encodeURIComponent(e)];f.isNumber(s)&&o.push("expires="+new Date(s).toGMTString()),f.isString(r)&&o.push("path="+r),f.isString(n)&&o.push("domain="+n),i===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Cc(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function Rc(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function In(t,e,s){let r=!Cc(e);return t&&(r||s==!1)?Rc(t,e):e}const lr=t=>t instanceof W?{...t}:t;function je(t,e){e=e||{};const s={};function r(c,u,d,y){return f.isPlainObject(c)&&f.isPlainObject(u)?f.merge.call({caseless:y},c,u):f.isPlainObject(u)?f.merge({},u):f.isArray(u)?u.slice():u}function n(c,u,d,y){if(f.isUndefined(u)){if(!f.isUndefined(c))return r(void 0,c,d,y)}else return r(c,u,d,y)}function i(c,u){if(!f.isUndefined(u))return r(void 0,u)}function o(c,u){if(f.isUndefined(u)){if(!f.isUndefined(c))return r(void 0,c)}else return r(void 0,u)}function a(c,u,d){if(d in e)return r(c,u);if(d in t)return r(void 0,c)}const l={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,u,d)=>n(lr(c),lr(u),d,!0)};return f.forEach(Object.keys({...t,...e}),function(u){const d=l[u]||n,y=d(t[u],e[u],u);f.isUndefined(y)&&d!==a||(s[u]=y)}),s}const $n=t=>{const e=je({},t);let{data:s,withXSRFToken:r,xsrfHeaderName:n,xsrfCookieName:i,headers:o,auth:a}=e;e.headers=o=W.from(o),e.url=On(In(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let l;if(f.isFormData(s)){if(F.hasStandardBrowserEnv||F.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((l=o.getContentType())!==!1){const[c,...u]=l?l.split(";").map(d=>d.trim()).filter(Boolean):[];o.setContentType([c||"multipart/form-data",...u].join("; "))}}if(F.hasStandardBrowserEnv&&(r&&f.isFunction(r)&&(r=r(e)),r||r!==!1&&Oc(e.url))){const c=n&&i&&Ac.read(i);c&&o.set(n,c)}return e},jc=typeof XMLHttpRequest<"u",Ic=jc&&function(t){return new Promise(function(s,r){const n=$n(t);let i=n.data;const o=W.from(n.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:c}=n,u,d,y,p,h;function m(){p&&p(),h&&h(),n.cancelToken&&n.cancelToken.unsubscribe(u),n.signal&&n.signal.removeEventListener("abort",u)}let g=new XMLHttpRequest;g.open(n.method.toUpperCase(),n.url,!0),g.timeout=n.timeout;function _(){if(!g)return;const w=W.from("getAllResponseHeaders"in g&&g.getAllResponseHeaders()),A={data:!a||a==="text"||a==="json"?g.responseText:g.response,status:g.status,statusText:g.statusText,headers:w,config:t,request:g};jn(function(x){s(x),m()},function(x){r(x),m()},A),g=null}"onloadend"in g?g.onloadend=_:g.onreadystatechange=function(){!g||g.readyState!==4||g.status===0&&!(g.responseURL&&g.responseURL.indexOf("file:")===0)||setTimeout(_)},g.onabort=function(){g&&(r(new S("Request aborted",S.ECONNABORTED,t,g)),g=null)},g.onerror=function(){r(new S("Network Error",S.ERR_NETWORK,t,g)),g=null},g.ontimeout=function(){let E=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const A=n.transitional||An;n.timeoutErrorMessage&&(E=n.timeoutErrorMessage),r(new S(E,A.clarifyTimeoutError?S.ETIMEDOUT:S.ECONNABORTED,t,g)),g=null},i===void 0&&o.setContentType(null),"setRequestHeader"in g&&f.forEach(o.toJSON(),function(E,A){g.setRequestHeader(A,E)}),f.isUndefined(n.withCredentials)||(g.withCredentials=!!n.withCredentials),a&&a!=="json"&&(g.responseType=n.responseType),c&&([y,h]=St(c,!0),g.addEventListener("progress",y)),l&&g.upload&&([d,p]=St(l),g.upload.addEventListener("progress",d),g.upload.addEventListener("loadend",p)),(n.cancelToken||n.signal)&&(u=w=>{g&&(r(!w||w.type?new We(null,t,g):w),g.abort(),g=null)},n.cancelToken&&n.cancelToken.subscribe(u),n.signal&&(n.signal.aborted?u():n.signal.addEventListener("abort",u)));const T=Tc(n.url);if(T&&F.protocols.indexOf(T)===-1){r(new S("Unsupported protocol "+T+":",S.ERR_BAD_REQUEST,t));return}g.send(i||null)})},$c=(t,e)=>{const{length:s}=t=t?t.filter(Boolean):[];if(e||s){let r=new AbortController,n;const i=function(c){if(!n){n=!0,a();const u=c instanceof Error?c:this.reason;r.abort(u instanceof S?u:new We(u instanceof Error?u.message:u))}};let o=e&&setTimeout(()=>{o=null,i(new S(`timeout ${e} of ms exceeded`,S.ETIMEDOUT))},e);const a=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(c=>{c.unsubscribe?c.unsubscribe(i):c.removeEventListener("abort",i)}),t=null)};t.forEach(c=>c.addEventListener("abort",i));const{signal:l}=r;return l.unsubscribe=()=>f.asap(a),l}},Lc=function*(t,e){let s=t.byteLength;if(s<e){yield t;return}let r=0,n;for(;r<s;)n=r+e,yield t.slice(r,n),r=n},Dc=async function*(t,e){for await(const s of Uc(t))yield*Lc(s,e)},Uc=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:s,value:r}=await e.read();if(s)break;yield r}}finally{await e.cancel()}},cr=(t,e,s,r)=>{const n=Dc(t,e);let i=0,o,a=l=>{o||(o=!0,r&&r(l))};return new ReadableStream({async pull(l){try{const{done:c,value:u}=await n.next();if(c){a(),l.close();return}let d=u.byteLength;if(s){let y=i+=d;s(y)}l.enqueue(new Uint8Array(u))}catch(c){throw a(c),c}},cancel(l){return a(l),n.return()}},{highWaterMark:2})},Bt=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Ln=Bt&&typeof ReadableStream=="function",Bc=Bt&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),Dn=(t,...e)=>{try{return!!t(...e)}catch{return!1}},Nc=Ln&&Dn(()=>{let t=!1;const e=new Request(F.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),ur=64*1024,ps=Ln&&Dn(()=>f.isReadableStream(new Response("").body)),Et={stream:ps&&(t=>t.body)};Bt&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Et[e]&&(Et[e]=f.isFunction(t[e])?s=>s[e]():(s,r)=>{throw new S(`Response type '${e}' is not supported`,S.ERR_NOT_SUPPORT,r)})})})(new Response);const Mc=async t=>{if(t==null)return 0;if(f.isBlob(t))return t.size;if(f.isSpecCompliantForm(t))return(await new Request(F.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(f.isArrayBufferView(t)||f.isArrayBuffer(t))return t.byteLength;if(f.isURLSearchParams(t)&&(t=t+""),f.isString(t))return(await Bc(t)).byteLength},Fc=async(t,e)=>{const s=f.toFiniteNumber(t.getContentLength());return s??Mc(e)},qc=Bt&&(async t=>{let{url:e,method:s,data:r,signal:n,cancelToken:i,timeout:o,onDownloadProgress:a,onUploadProgress:l,responseType:c,headers:u,withCredentials:d="same-origin",fetchOptions:y}=$n(t);c=c?(c+"").toLowerCase():"text";let p=$c([n,i&&i.toAbortSignal()],o),h;const m=p&&p.unsubscribe&&(()=>{p.unsubscribe()});let g;try{if(l&&Nc&&s!=="get"&&s!=="head"&&(g=await Fc(u,r))!==0){let A=new Request(e,{method:"POST",body:r,duplex:"half"}),C;if(f.isFormData(r)&&(C=A.headers.get("content-type"))&&u.setContentType(C),A.body){const[x,ut]=or(g,St(ar(l)));r=cr(A.body,ur,x,ut)}}f.isString(d)||(d=d?"include":"omit");const _="credentials"in Request.prototype;h=new Request(e,{...y,signal:p,method:s.toUpperCase(),headers:u.normalize().toJSON(),body:r,duplex:"half",credentials:_?d:void 0});let T=await fetch(h,y);const w=ps&&(c==="stream"||c==="response");if(ps&&(a||w&&m)){const A={};["status","statusText","headers"].forEach(Os=>{A[Os]=T[Os]});const C=f.toFiniteNumber(T.headers.get("content-length")),[x,ut]=a&&or(C,St(ar(a),!0))||[];T=new Response(cr(T.body,ur,x,()=>{ut&&ut(),m&&m()}),A)}c=c||"text";let E=await Et[f.findKey(Et,c)||"text"](T,t);return!w&&m&&m(),await new Promise((A,C)=>{jn(A,C,{data:E,headers:W.from(T.headers),status:T.status,statusText:T.statusText,config:t,request:h})})}catch(_){throw m&&m(),_&&_.name==="TypeError"&&/Load failed|fetch/i.test(_.message)?Object.assign(new S("Network Error",S.ERR_NETWORK,t,h),{cause:_.cause||_}):S.from(_,_&&_.code,t,h)}}),ms={http:rc,xhr:Ic,fetch:qc};f.forEach(ms,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const dr=t=>`- ${t}`,Hc=t=>f.isFunction(t)||t===null||t===!1,Un={getAdapter:t=>{t=f.isArray(t)?t:[t];const{length:e}=t;let s,r;const n={};for(let i=0;i<e;i++){s=t[i];let o;if(r=s,!Hc(s)&&(r=ms[(o=String(s)).toLowerCase()],r===void 0))throw new S(`Unknown adapter '${o}'`);if(r)break;n[o||"#"+i]=r}if(!r){const i=Object.entries(n).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=e?i.length>1?`since :
`+i.map(dr).join(`
`):" "+dr(i[0]):"as no adapter specified";throw new S("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:ms};function Zt(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new We(null,t)}function hr(t){return Zt(t),t.headers=W.from(t.headers),t.data=Xt.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Un.getAdapter(t.adapter||ct.adapter)(t).then(function(r){return Zt(t),r.data=Xt.call(t,t.transformResponse,r),r.headers=W.from(r.headers),r},function(r){return Rn(r)||(Zt(t),r&&r.response&&(r.response.data=Xt.call(t,t.transformResponse,r.response),r.response.headers=W.from(r.response.headers))),Promise.reject(r)})}const Bn="1.11.0",Nt={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Nt[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const fr={};Nt.transitional=function(e,s,r){function n(i,o){return"[Axios v"+Bn+"] Transitional option '"+i+"'"+o+(r?". "+r:"")}return(i,o,a)=>{if(e===!1)throw new S(n(o," has been removed"+(s?" in "+s:"")),S.ERR_DEPRECATED);return s&&!fr[o]&&(fr[o]=!0,console.warn(n(o," has been deprecated since v"+s+" and will be removed in the near future"))),e?e(i,o,a):!0}};Nt.spelling=function(e){return(s,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function Vc(t,e,s){if(typeof t!="object")throw new S("options must be an object",S.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let n=r.length;for(;n-- >0;){const i=r[n],o=e[i];if(o){const a=t[i],l=a===void 0||o(a,i,t);if(l!==!0)throw new S("option "+i+" must be "+l,S.ERR_BAD_OPTION_VALUE);continue}if(s!==!0)throw new S("Unknown option "+i,S.ERR_BAD_OPTION)}}const yt={assertOptions:Vc,validators:Nt},ie=yt.validators;let Re=class{constructor(e){this.defaults=e||{},this.interceptors={request:new nr,response:new nr}}async request(e,s){try{return await this._request(e,s)}catch(r){if(r instanceof Error){let n={};Error.captureStackTrace?Error.captureStackTrace(n):n=new Error;const i=n.stack?n.stack.replace(/^.+\n/,""):"";try{r.stack?i&&!String(r.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+i):r.stack=i}catch{}}throw r}}_request(e,s){typeof e=="string"?(s=s||{},s.url=e):s=e||{},s=je(this.defaults,s);const{transitional:r,paramsSerializer:n,headers:i}=s;r!==void 0&&yt.assertOptions(r,{silentJSONParsing:ie.transitional(ie.boolean),forcedJSONParsing:ie.transitional(ie.boolean),clarifyTimeoutError:ie.transitional(ie.boolean)},!1),n!=null&&(f.isFunction(n)?s.paramsSerializer={serialize:n}:yt.assertOptions(n,{encode:ie.function,serialize:ie.function},!0)),s.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?s.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:s.allowAbsoluteUrls=!0),yt.assertOptions(s,{baseUrl:ie.spelling("baseURL"),withXsrfToken:ie.spelling("withXSRFToken")},!0),s.method=(s.method||this.defaults.method||"get").toLowerCase();let o=i&&f.merge(i.common,i[s.method]);i&&f.forEach(["delete","get","head","post","put","patch","common"],h=>{delete i[h]}),s.headers=W.concat(o,i);const a=[];let l=!0;this.interceptors.request.forEach(function(m){typeof m.runWhen=="function"&&m.runWhen(s)===!1||(l=l&&m.synchronous,a.unshift(m.fulfilled,m.rejected))});const c=[];this.interceptors.response.forEach(function(m){c.push(m.fulfilled,m.rejected)});let u,d=0,y;if(!l){const h=[hr.bind(this),void 0];for(h.unshift(...a),h.push(...c),y=h.length,u=Promise.resolve(s);d<y;)u=u.then(h[d++],h[d++]);return u}y=a.length;let p=s;for(d=0;d<y;){const h=a[d++],m=a[d++];try{p=h(p)}catch(g){m.call(this,g);break}}try{u=hr.call(this,p)}catch(h){return Promise.reject(h)}for(d=0,y=c.length;d<y;)u=u.then(c[d++],c[d++]);return u}getUri(e){e=je(this.defaults,e);const s=In(e.baseURL,e.url,e.allowAbsoluteUrls);return On(s,e.params,e.paramsSerializer)}};f.forEach(["delete","get","head","options"],function(e){Re.prototype[e]=function(s,r){return this.request(je(r||{},{method:e,url:s,data:(r||{}).data}))}});f.forEach(["post","put","patch"],function(e){function s(r){return function(i,o,a){return this.request(je(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}Re.prototype[e]=s(),Re.prototype[e+"Form"]=s(!0)});let zc=class Nn{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let s;this.promise=new Promise(function(i){s=i});const r=this;this.promise.then(n=>{if(!r._listeners)return;let i=r._listeners.length;for(;i-- >0;)r._listeners[i](n);r._listeners=null}),this.promise.then=n=>{let i;const o=new Promise(a=>{r.subscribe(a),i=a}).then(n);return o.cancel=function(){r.unsubscribe(i)},o},e(function(i,o,a){r.reason||(r.reason=new We(i,o,a),s(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const s=this._listeners.indexOf(e);s!==-1&&this._listeners.splice(s,1)}toAbortSignal(){const e=new AbortController,s=r=>{e.abort(r)};return this.subscribe(s),e.signal.unsubscribe=()=>this.unsubscribe(s),e.signal}static source(){let e;return{token:new Nn(function(n){e=n}),cancel:e}}};function Wc(t){return function(s){return t.apply(null,s)}}function Kc(t){return f.isObject(t)&&t.isAxiosError===!0}const gs={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(gs).forEach(([t,e])=>{gs[e]=t});function Mn(t){const e=new Re(t),s=gn(Re.prototype.request,e);return f.extend(s,Re.prototype,e,{allOwnKeys:!0}),f.extend(s,e,null,{allOwnKeys:!0}),s.create=function(n){return Mn(je(t,n))},s}const L=Mn(ct);L.Axios=Re;L.CanceledError=We;L.CancelToken=zc;L.isCancel=Rn;L.VERSION=Bn;L.toFormData=Ut;L.AxiosError=S;L.Cancel=L.CanceledError;L.all=function(e){return Promise.all(e)};L.spread=Wc;L.isAxiosError=Kc;L.mergeConfig=je;L.AxiosHeaders=W;L.formToJSON=t=>Cn(f.isHTMLForm(t)?new FormData(t):t);L.getAdapter=Un.getAdapter;L.HttpStatusCode=gs;L.default=L;const{Axios:Id,AxiosError:$d,CanceledError:Ld,isCancel:Dd,CancelToken:Ud,VERSION:Bd,all:Nd,Cancel:Md,isAxiosError:Fd,spread:qd,toFormData:Hd,AxiosHeaders:Vd,HttpStatusCode:zd,formToJSON:Wd,getAdapter:Kd,mergeConfig:Jd}=L,Qt="uang-kas-kelas-1-ibnu-sina",Jc="u8e0CphRmRVuNwDyqnfNoeOwHa6UBpLg",pr="https://pakasir.zone.id",Gc="https://berbagiakun.com";class Xc{generatePaymentUrl(e,s){return`${pr}/pay/${Qt}/${e}?order_id=${s}&qris_only=1&redirect=${Gc}`}generateOrderId(e){const r=new Date().toISOString().slice(2,10).replace(/-/g,""),n=Math.random().toString(36).substring(2,8).toUpperCase();return`${e.toUpperCase()}${r}${n}`}async checkTransactionStatus(e,s){try{return(await L.get(`${pr}/api/transactiondetail`,{params:{project:Qt,amount:e,order_id:s,api_key:Jc}})).data}catch(r){throw console.error("Error checking transaction status:",r),r}}createPaymentLink(e,s,r="Kas Kelas"){const n=this.generateOrderId(e.nickname),i=this.generatePaymentUrl(s,n);return{order_id:n,payment_url:i,amount:s,description:r,created_at:new Date().toISOString()}}formatCurrency(e){return new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(e)}validateWebhook(e){const s=["amount","order_id","project","status","payment_method","completed_at"];for(const r of s)if(!e[r])throw new Error(`Missing required field: ${r}`);if(e.project!==Qt)throw new Error("Invalid project slug");if(e.status!=="completed")throw new Error("Payment not completed");return!0}}const Yt=new Xc,Zc=Zn("app",{state:()=>({students:[],transactions:[],expenses:[],totalBalance:0,paymentLinks:[],loading:{students:!1,transactions:!1,expenses:!1,paymentLinks:!1,global:!1},error:null,isUsingMockData:!1,databaseStatus:"unknown",sidebarOpen:!1}),getters:{totalIncome:t=>t.transactions.filter(e=>e.type==="income"&&e.status==="completed").reduce((e,s)=>e+s.amount,0),totalExpenses:t=>t.expenses.filter(e=>e.status==="approved").reduce((e,s)=>e+s.amount,0),currentBalance:t=>t.totalIncome-t.totalExpenses,recentTransactions:t=>t.transactions.slice(0,10),pendingPayments:t=>t.paymentLinks.filter(e=>e.status==="pending"),studentsByPaymentStatus:t=>{const e=new Date().toISOString().slice(0,7),s=t.transactions.filter(o=>{const a=new Date(o.created_at).toISOString().slice(0,7);return o.type==="income"&&o.status==="completed"&&a===e}).map(o=>o.student_id),r={};t.transactions.filter(o=>o.type==="income"&&o.status==="completed").forEach(o=>{const a=new Date(o.created_at).toISOString().slice(0,7);r[o.student_id]||(r[o.student_id]={}),r[o.student_id][a]||(r[o.student_id][a]=[]),r[o.student_id][a].push(o)});const n=t.students.filter(o=>s.includes(o.id)).map(o=>{var a;return{...o,paymentHistory:r[o.id]||{},totalPaid:Object.values(r[o.id]||{}).flat().reduce((l,c)=>l+c.amount,0),paidThisMonth:!!((a=r[o.id])!=null&&a[e])}}),i=t.students.filter(o=>!s.includes(o.id)).map(o=>({...o,paymentHistory:r[o.id]||{},totalPaid:Object.values(r[o.id]||{}).flat().reduce((a,l)=>a+l.amount,0),paidThisMonth:!1}));return{paid:n,unpaid:i}},unpaidStudentsThisMonth:t=>{const e=new Date().toISOString().slice(0,7),s=t.transactions.filter(r=>{const n=new Date(r.created_at).toISOString().slice(0,7);return r.type==="income"&&r.status==="completed"&&n===e}).map(r=>r.student_id);return t.students.filter(r=>!s.includes(r.id))},isAnyLoading:t=>Object.values(t.loading).some(Boolean)},actions:{async fetchStudents(){this.loading.students=!0,this.loading.global=!0;try{const{data:t,error:e}=await q.getStudents();if(e)throw this.databaseStatus="error",e;this.students=t||[],this.isUsingMockData=t&&t.length>0&&t[0].id==="1",this.databaseStatus=this.isUsingMockData?"mock":"connected"}catch(t){this.error=this.formatError(t),this.databaseStatus="error",console.error("Error fetching students:",this.formatError(t))}finally{this.loading.students=!1,this.loading.global=!1}},async addStudent(t){try{const{data:e,error:s}=await q.addStudent(t);if(s)throw s;return await this.fetchStudents(),e}catch(e){throw this.error=e.message,e}},async fetchTransactions(){this.loading.transactions=!0,this.loading.global=!0;try{const{data:t,error:e}=await q.getTransactions();if(e)throw e;this.transactions=t||[]}catch(t){this.error=this.formatError(t),console.error("Error fetching transactions:",this.formatError(t))}finally{this.loading.transactions=!1,this.loading.global=!1}},async addTransaction(t){try{const{data:e,error:s}=await q.addTransaction(t);if(s)throw s;return await this.fetchTransactions(),e}catch(e){throw this.error=e.message,e}},async fetchExpenses(){this.loading.expenses=!0,this.loading.global=!0;try{const{data:t,error:e}=await q.getExpenses();if(e)throw e;this.expenses=t||[]}catch(t){this.error=this.formatError(t),console.error("Error fetching expenses:",this.formatError(t))}finally{this.loading.expenses=!1,this.loading.global=!1}},async addExpense(t){try{const{data:e,error:s}=await q.addExpense(t);if(s)throw s;return await this.fetchExpenses(),e}catch(e){throw this.error=e.message,e}},async updateExpense(t,e){try{const{data:s,error:r}=await q.updateExpense(t,e);if(r)throw r;return await this.fetchExpenses(),s}catch(s){throw this.error=s.message,s}},async updatePaymentLink(t,e){try{const{data:s,error:r}=await q.updatePaymentLink(t,e);if(r)throw r;return await this.fetchPaymentLinks(),s}catch(s){throw this.error=s.message,s}},async deleteExpense(t){try{const{data:e,error:s}=await q.deleteExpense(t);if(s)throw s;return await this.fetchExpenses(),e}catch(e){throw this.error=e.message,e}},async fetchPaymentLinks(){this.loading.paymentLinks=!0,this.loading.global=!0;try{const{data:t,error:e}=await q.getPaymentLinks();if(e)throw e;this.paymentLinks=t||[]}catch(t){this.error=this.formatError(t),console.error("Error fetching payment links:",this.formatError(t))}finally{this.loading.paymentLinks=!1,this.loading.global=!1}},async generatePaymentLink(t,e,s){try{const r=this.students.find(c=>c.id===t);if(!r)throw new Error("Student not found");const n=new Date().toISOString().slice(0,7);if(this.transactions.some(c=>{const u=new Date(c.created_at).toISOString().slice(0,7);return c.student_id===t&&c.type==="income"&&c.status==="completed"&&u===n}))throw new Error(`${r.name} sudah membayar untuk bulan ini`);const o=Yt.createPaymentLink(r,e,s),{data:a,error:l}=await q.addPaymentLink({...o,student_id:t,status:"pending",month:n});if(l)throw l;return await this.fetchPaymentLinks(),a}catch(r){throw this.error=r.message,r}},async generateBulkPaymentLinks(t,e,s=!0){try{const r=s?this.unpaidStudentsThisMonth:this.students;if(r.length===0)throw new Error("Semua siswa sudah membayar untuk bulan ini");const n=[],i=new Date().toISOString().slice(0,7);for(const o of r)try{const a=Yt.createPaymentLink(o,t,e),{data:l,error:c}=await q.addPaymentLink({...a,student_id:o.id,status:"pending",month:i});if(c)throw c;n.push({student:o.name,success:!0,data:l})}catch(a){n.push({student:o.name,success:!1,error:a.message})}return await this.fetchPaymentLinks(),n}catch(r){throw this.error=r.message,r}},async deletePaymentLink(t){try{const{data:e,error:s}=await q.deletePaymentLink(t);if(s)throw s;return await this.fetchPaymentLinks(),e}catch(e){throw this.error=e.message,e}},async handlePaymentWebhook(t){try{Yt.validateWebhook(t);const e=this.paymentLinks.find(s=>s.order_id===t.order_id);if(!e)throw new Error("Payment link not found");return await q.updatePaymentLink(e.id,{status:"completed",payment_method:t.payment_method,completed_at:t.completed_at}),await q.addTransaction({type:"income",amount:t.amount,description:e.description,student_id:e.student_id,payment_method:t.payment_method,order_id:t.order_id,status:"completed",created_at:t.completed_at}),await this.fetchPaymentLinks(),await this.fetchTransactions(),!0}catch(e){throw this.error=e.message,e}},toggleSidebar(){this.sidebarOpen=!this.sidebarOpen},clearError(){this.error=null},formatError(t){return t?t.name==="TypeError"&&t.message==="Failed to fetch"?"Network connection failed. Please check your internet connection and try again.":t.message?t.message:typeof t=="object"?t.error_description?t.error_description:t.error?t.error:JSON.stringify(t,null,2):t.toString():"Unknown error occurred"},clearAllLoading(){this.loading.students=!1,this.loading.transactions=!1,this.loading.expenses=!1,this.loading.paymentLinks=!1,this.loading.global=!1},clearError(){this.error=null},async retryLoadAll(){try{this.clearError(),await Promise.all([this.fetchStudents(),this.fetchTransactions(),this.fetchExpenses(),this.fetchPaymentLinks()])}catch(t){console.error("Error retrying data load:",t),this.error=this.formatError(t)}}}}),oe=kr({id:"1",name:"Yudi Haryanto",email:"yudi@alhusna.edu",role:"admin",status:"active"}),G=wt(()=>{var t,e,s,r,n;return{id:((t=oe.value)==null?void 0:t.id)||"1",name:((e=oe.value)==null?void 0:e.name)||"User",email:((s=oe.value)==null?void 0:s.email)||"user@example.com",role:((r=oe.value)==null?void 0:r.role)||"viewer",status:((n=oe.value)==null?void 0:n.status)||"active"}}),mr={admin:["create","read","update","delete","manage_users","manage_settings","export_data","manage_transactions","manage_expenses","manage_students","view_reports","export_reports","view_all"],bendahara:["create","read","update","delete","manage_transactions","manage_expenses","view_reports","export_reports"],ketua_kelas:["create","read","update","manage_students","view_reports"],wali_kelas:["read","view_all","view_reports","export_reports"],viewer:["read","view_basic"]},Qc={dashboard:["read"],students:["manage_students","view_all","admin"],transactions:["manage_transactions","view_all","admin"],payments:["manage_transactions","view_all","admin"],campaigns:["manage_transactions","view_all","admin"],expenses:["manage_expenses","view_all","admin"],reports:["view_reports","view_all","admin"],settings:["manage_settings","admin"]};function Fn(){const t=wt(()=>mr[G.value.role]||[]),e=h=>t.value.includes(h)||G.value.role==="admin",s=h=>h.some(m=>e(m)),r=h=>{const m=Qc[h]||["read"];return s(m)},n=(h,m)=>{const g=`${m}_${h}`;return e(g)||e(m)||e("view_all")},i=()=>({id:G.value.role,permissions:t.value,isAdmin:G.value.role==="admin",isBendahara:G.value.role==="bendahara",isKetuaKelas:G.value.role==="ketua_kelas",isWaliKelas:G.value.role==="wali_kelas",isViewer:G.value.role==="viewer"}),o=h=>{oe.value=h},a=async()=>{try{const h=localStorage.getItem("currentUser");if(h){const m=JSON.parse(h);return oe.value=m,!0}}catch(h){console.error("Error parsing stored user:",h),localStorage.removeItem("currentUser")}return!1},l=wt(()=>!!(oe.value&&oe.value.id));return{currentUser:G,userPermissions:t,hasPermission:e,hasAnyPermission:s,canAccessPage:r,canPerformAction:n,canModifyItem:(h,m="update")=>G.value.role==="admin"?!0:e(m)?h.created_by?h.created_by===G.value.id:!0:!1,getUserRole:i,setCurrentUser:o,getFilteredNavigation:h=>h.filter(m=>m.requiresPermission?r(m.requiresPermission):!0),getUIRestrictions:()=>{const h=G.value.role;return{canCreateStudents:e("manage_students"),canEditStudents:e("manage_students"),canDeleteStudents:e("manage_students")&&h==="admin",canCreateTransactions:e("manage_transactions"),canEditTransactions:e("manage_transactions"),canDeleteTransactions:e("manage_transactions")&&["admin","bendahara"].includes(h),canCreateExpenses:e("manage_expenses"),canEditExpenses:e("manage_expenses"),canDeleteExpenses:e("manage_expenses"),canManageUsers:e("manage_users"),canChangeSettings:e("manage_settings"),canExportData:e("export_data")||e("export_reports"),canViewAllReports:e("view_all")||e("view_reports"),canCreatePaymentLinks:e("manage_transactions"),canDeletePaymentLinks:e("manage_transactions")&&["admin","bendahara"].includes(h)}},getRoleDisplayInfo:h=>{const m={admin:{name:"Administrator",color:"purple",description:"Akses penuh ke semua fitur"},bendahara:{name:"Bendahara",color:"green",description:"Mengelola keuangan dan transaksi"},ketua_kelas:{name:"Ketua Kelas",color:"blue",description:"Mengelola data siswa"},wali_kelas:{name:"Wali Kelas",color:"yellow",description:"Monitoring dan supervisi"},viewer:{name:"Viewer",color:"gray",description:"Hanya dapat melihat data"}};return m[h]||m.viewer},rolePermissions:mr,initializeAuth:a,isAuthenticated:l,logout:()=>{oe.value=null,localStorage.removeItem("currentUser")}}}function gr(t,e){return b(),R("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[v("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m3 0 3-3m0 0-3-3m3 3H9"})])}function Yc(t,e){return b(),R("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[v("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 18.75a60.07 60.07 0 0 1 15.797 2.101c.727.198 1.453-.342 1.453-1.096V18.75M3.75 4.5v.75A.75.75 0 0 1 3 6h-.75m0 0v-.375c0-.621.504-1.125 1.125-1.125H20.25M2.25 6v9m18-10.5v.75c0 .414.336.75.75.75h.75m-1.5-1.5h.375c.621 0 1.125.504 1.125 1.125v9.75c0 .621-.504 1.125-1.125 1.125h-.375m1.5-1.5H21a.75.75 0 0 0-.75.75v.75m0 0H3.75m0 0h-.375a1.125 1.125 0 0 1-1.125-1.125V15m1.5 1.5v-.75A.75.75 0 0 0 3 15h-.75M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm3 0h.008v.008H18V10.5Zm-12 0h.008v.008H6V10.5Z"})])}function eu(t,e){return b(),R("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[v("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})])}function tu(t,e){return b(),R("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[v("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4.5 12a7.5 7.5 0 0 0 15 0m-15 0a7.5 7.5 0 1 1 15 0m-15 0H3m16.5 0H21m-1.5 0H12m-8.457 3.077 1.41-.513m14.095-5.13 1.41-.513M5.106 17.785l1.15-.964m11.49-9.642 1.149-.964M7.501 19.795l.75-1.3m7.5-12.99.75-1.3m-6.063 16.658.26-1.477m2.605-14.772.26-1.477m0 17.726-.26-1.477M10.698 4.614l-.26-1.477M16.5 19.794l-.75-1.299M7.5 4.205 12 12m6.894 5.785-1.149-.964M6.256 7.178l-1.15-.964m15.352 8.864-1.41-.513M4.954 9.435l-1.41-.514M12.002 12l-3.75 6.495"})])}function su(t,e){return b(),R("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[v("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 8.25h19.5M2.25 9h19.5m-16.5 5.25h6m-6 2.25h3m-3.75 3h15a2.25 2.25 0 0 0 2.25-2.25V6.75A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25v10.5A2.25 2.25 0 0 0 4.5 19.5Z"})])}function ru(t,e){return b(),R("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[v("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25M9 16.5v.75m3-3v3M15 12v5.25m-4.5-15H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"})])}function yr(t,e){return b(),R("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[v("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"})])}function nu(t,e){return b(),R("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[v("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"})])}function iu(t,e){return b(),R("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[v("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10.34 15.84c-.688-.06-1.386-.09-2.09-.09H7.5a4.5 4.5 0 1 1 0-9h.75c.704 0 1.402-.03 2.09-.09m0 9.18c.253.962.584 1.892.985 2.783.247.55.06 1.21-.463 1.511l-.657.38c-.551.318-1.26.117-1.527-.461a20.845 20.845 0 0 1-1.44-4.282m3.102.069a18.03 18.03 0 0 1-.59-4.59c0-1.586.205-3.124.59-4.59m0 9.18a23.848 23.848 0 0 1 8.835 2.535M10.34 6.66a23.847 23.847 0 0 0 8.835-2.535m0 0A23.74 23.74 0 0 0 18.795 3m.38 1.125a23.91 23.91 0 0 1 1.014 5.395m-1.014 8.855c-.118.38-.245.754-.38 1.125m.38-1.125a23.91 23.91 0 0 0 1.014-5.395m0-3.46c.495.413.811 1.035.811 1.73 0 .695-.316 1.317-.811 1.73m0-3.46a24.347 24.347 0 0 1 0 3.46"})])}function ou(t,e){return b(),R("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[v("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m9 14.25 6-6m4.5-3.493V21.75l-3.75-1.5-3.75 1.5-3.75-1.5-3.75 1.5V4.757c0-1.108.806-2.057 1.907-2.185a48.507 48.507 0 0 1 11.186 0c1.1.128 1.907 1.077 1.907 2.185ZM9.75 9h.008v.008H9.75V9Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm4.125 4.5h.008v.008h-.008V13.5Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"})])}function au(t,e){return b(),R("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[v("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 19.128a9.38 9.38 0 0 0 2.625.372 9.337 9.337 0 0 0 4.121-.952 4.125 4.125 0 0 0-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 0 1 8.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0 1 11.964-3.07M12 6.375a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0Zm8.25 2.25a2.625 2.625 0 1 1-5.25 0 2.625 2.625 0 0 1 5.25 0Z"})])}function vr(t,e){return b(),R("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[v("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18 18 6M6 6l12 12"})])}const lu={class:"min-h-screen bg-gray-50"},cu={key:0,class:"fixed inset-0 z-50 bg-white bg-opacity-90 flex items-center justify-center"},uu={class:"lg:hidden"},du={class:"flex flex-col h-full"},hu={class:"flex-1 px-4 py-4 space-y-1"},fu={class:"px-4 py-4 border-t border-gray-200"},pu={class:"flex items-center justify-between"},mu={class:"flex items-center"},gu={class:"w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center"},yu={class:"text-primary-600 font-medium text-sm"},vu={class:"ml-3"},wu={class:"text-sm font-medium text-gray-900"},_u={class:"text-xs text-gray-500"},bu={class:"bg-white shadow-sm border-b border-gray-200"},ku={class:"flex items-center justify-between px-4 py-3"},Su={class:"flex items-center min-w-0 flex-1"},Eu={class:"text-lg font-semibold text-gray-900 truncate"},Tu={class:"flex items-center space-x-2"},xu={key:0,class:"flex items-center space-x-1 px-2 py-1 bg-yellow-50 rounded-lg"},Pu={class:"flex items-center space-x-1 px-2 py-1 bg-success-50 rounded-lg"},Ou={class:"text-xs font-semibold text-success-700"},Au={class:"p-4"},Cu={class:"hidden lg:flex desktop-layout"},Ru={class:"desktop-sidebar"},ju={class:"flex flex-col h-full"},Iu={class:"flex-1 px-4 py-4 space-y-1"},$u={class:"px-4 py-4 border-t border-gray-200"},Lu={class:"flex items-center justify-between"},Du={class:"flex items-center"},Uu={class:"w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center"},Bu={class:"text-primary-600 font-medium text-sm"},Nu={class:"ml-3"},Mu={class:"text-sm font-medium text-gray-900"},Fu={class:"text-xs text-gray-500"},qu={class:"desktop-main"},Hu={class:"desktop-header"},Vu={class:"flex items-center justify-between px-6 py-4"},zu={class:"flex items-center min-w-0 flex-1"},Wu={class:"text-xl font-semibold text-gray-900 truncate"},Ku={class:"flex items-center space-x-4"},Ju={key:0,class:"flex items-center space-x-2 px-3 py-1 bg-yellow-50 rounded-lg"},Gu={class:"flex items-center space-x-2 px-3 py-1 bg-success-50 rounded-lg"},Xu={class:"text-sm font-semibold text-success-700"},Zu={class:"desktop-content"},Qu={key:1,class:"fixed bottom-4 left-4 right-4 sm:left-auto sm:right-4 sm:max-w-md z-50"},Yu={class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative"},ed={class:"flex items-start"},td={class:"flex-shrink-0"},sd={class:"ml-3"},rd={class:"mt-1 text-sm text-red-700"},nd={class:"mt-2 flex gap-2"},id=["disabled"],od={class:"ml-auto pl-3"},ad={key:2,class:"fixed bottom-4 left-4 right-4 sm:left-auto sm:right-4 sm:max-w-md z-50"},ld={class:"bg-yellow-100 border border-yellow-400 text-yellow-700 px-4 py-3 rounded relative"},cd={class:"flex items-start"},ud={class:"flex-shrink-0"},dd={class:"ml-3"},hd={class:"mt-1 text-sm text-yellow-700"},fd={class:"ml-auto pl-3"},pd={__name:"App",setup(t){const e=Zc(),s=Fn(),r=Qn(),n=Yn(),i=to(),o=kr(!1),a=[{name:"Dashboard",label:"Dashboard",href:"/",icon:nu,requiresPermission:"dashboard"},{name:"Students",label:"Data Siswa",href:"/students",icon:au,requiresPermission:"students"},{name:"Transactions",label:"Transaksi Kas",href:"/transactions",icon:Yc,requiresPermission:"transactions"},{name:"Expenses",label:"Pengeluaran",href:"/expenses",icon:ou,requiresPermission:"expenses"},{name:"Payments",label:"Link Pembayaran",href:"/payments",icon:su,requiresPermission:"payments"},{name:"Campaigns",label:"Campaign WhatsApp",href:"/campaigns",icon:iu,requiresPermission:"campaigns"},{name:"Reports",label:"Laporan",href:"/reports",icon:ru,requiresPermission:"reports"},{name:"Settings",label:"Pengaturan",href:"/settings",icon:tu,requiresPermission:"settings"}],l=wt(()=>a.filter(p=>p.requiresPermission?s.canAccessPage(p.requiresPermission):!0)),c=p=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(p),u=()=>{window.innerWidth<1024&&(e.sidebarOpen=!1)},d=()=>{confirm("Apakah Anda yakin ingin logout?")&&(s.logout(),i.success("Berhasil logout"),r.push("/login"))};ei(()=>n.path,(p,h)=>{if(p!==h){console.log("Route changed:",h,"->",p),o.value=!0;const m=setTimeout(()=>{console.log("Loading finished for:",p),o.value=!1},300);return()=>clearTimeout(m)}},{immediate:!1}),r.onError(p=>{console.error("Router error:",p),o.value=!1});const y=async()=>{try{o.value=!0;try{await fetch(window.location.origin,{method:"HEAD"})}catch{i.info("Server sedang bangun, mohon tunggu..."),await new Promise(h=>setTimeout(h,3e3))}await e.retryLoadAll(),i.success("Data berhasil dimuat")}catch{i.error("Gagal memuat data. Silakan coba lagi.")}finally{o.value=!1}};return ti(async()=>{await s.initializeAuth();let p=0;const h=3;for(;p<h;)try{o.value=!0,await Promise.all([e.fetchStudents(),e.fetchTransactions(),e.fetchExpenses(),e.fetchPaymentLinks()]),e.isUsingMockData&&!e.error&&console.log("Successfully loaded demo data");break}catch(m){p++,console.error(`Error loading initial data (attempt ${p}):`,m),p>=h?e.isUsingMockData?e.clearError():i.error("Gagal memuat data. Silakan refresh halaman."):await new Promise(g=>setTimeout(g,1e3*p))}finally{(p>=h||!e.error)&&(o.value=!1)}}),(p,h)=>{var _,T,w,E,A,C;const m=Ce("router-link"),g=Ce("router-view");return b(),R("div",lu,[o.value?(b(),R("div",cu,h[4]||(h[4]=[v("div",{class:"text-center"},[v("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"}),v("p",{class:"text-gray-600"},"Memuat halaman...")],-1)]))):fe("",!0),v("div",uu,[j(e).sidebarOpen?(b(),R("div",{key:0,onClick:h[0]||(h[0]=x=>j(e).toggleSidebar()),class:"fixed inset-0 z-40 bg-black bg-opacity-50"})):fe("",!0),v("div",{class:we(["fixed inset-y-0 left-0 z-50 w-64 bg-white shadow-lg transform transition-transform duration-300 ease-in-out",j(e).sidebarOpen?"translate-x-0":"-translate-x-full"])},[v("div",du,[h[5]||(h[5]=As('<div class="flex items-center px-6 py-6 border-b border-white/20 bg-gradient-to-r from-primary-50 to-indigo-50"><div class="flex items-center"><div class="w-12 h-12 bg-gradient-to-br from-primary-500 to-primary-700 rounded-2xl flex items-center justify-center shadow-lg transform hover:scale-105 transition-transform duration-200"><span class="text-white font-bold text-lg">ðŸ’°</span></div><div class="ml-4"><h1 class="text-xl font-bold bg-gradient-to-r from-primary-600 to-indigo-600 bg-clip-text text-transparent">Kas Kelas 1B</h1><p class="text-sm text-gray-600 font-medium">SD Islam Al Husna</p></div></div></div>',1)),v("nav",hu,[(b(!0),R(Ye,null,vt(l.value,x=>(b(),Z(m,{key:x.name,to:x.href,onClick:u,class:we(["sidebar-link rounded-lg",p.$route.name===x.name?"active":""])},{default:ve(()=>[(b(),Z(Qe(x.icon),{class:"w-5 h-5 mr-3"})),Pe(" "+B(x.label),1)]),_:2},1032,["to","class"]))),128))]),v("div",fu,[v("div",pu,[v("div",mu,[v("div",gu,[v("span",yu,B((((_=j(s).currentUser)==null?void 0:_.name)||"U").charAt(0).toUpperCase()),1)]),v("div",vu,[v("p",wu,B(((T=j(s).currentUser)==null?void 0:T.name)||"User"),1),v("p",_u,B(j(s).getRoleDisplayInfo(((w=j(s).currentUser)==null?void 0:w.role)||"viewer").name),1)])]),v("button",{onClick:d,class:"p-1 text-gray-400 hover:text-gray-600",title:"Logout"},[X(j(gr),{class:"w-5 h-5"})])])])])],2),v("div",null,[v("header",bu,[v("div",ku,[v("div",Su,[v("button",{onClick:h[1]||(h[1]=x=>j(e).toggleSidebar()),class:"p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 mr-2"},[X(j(eu),{class:"w-6 h-6"})]),v("h2",Eu,B(p.$route.meta.title||"Dashboard"),1)]),v("div",Tu,[j(e).isUsingMockData?(b(),R("div",xu,h[6]||(h[6]=[v("div",{class:"w-2 h-2 bg-yellow-400 rounded-full"},null,-1),v("span",{class:"text-xs text-yellow-700 font-medium"},"Demo",-1)]))):fe("",!0),v("div",Pu,[h[7]||(h[7]=v("span",{class:"text-xs text-success-600 font-medium"},"Saldo:",-1)),v("span",Ou,B(c(j(e).currentBalance)),1)])])])]),v("main",Au,[X(g)])])]),v("div",Cu,[v("div",Ru,[v("div",ju,[h[8]||(h[8]=As('<div class="flex items-center px-6 py-6 border-b border-white/20 bg-gradient-to-r from-primary-50 to-indigo-50"><div class="flex items-center"><div class="w-12 h-12 bg-gradient-to-br from-primary-500 to-primary-700 rounded-2xl flex items-center justify-center shadow-lg transform hover:scale-105 transition-transform duration-200"><span class="text-white font-bold text-lg">ðŸ’°</span></div><div class="ml-4"><h1 class="text-xl font-bold bg-gradient-to-r from-primary-600 to-indigo-600 bg-clip-text text-transparent">Kas Kelas 1B</h1><p class="text-sm text-gray-600 font-medium">SD Islam Al Husna</p></div></div></div>',1)),v("nav",Iu,[(b(!0),R(Ye,null,vt(l.value,x=>(b(),Z(m,{key:x.name,to:x.href,class:we(["sidebar-link rounded-lg",p.$route.name===x.name?"active":""])},{default:ve(()=>[(b(),Z(Qe(x.icon),{class:"w-5 h-5 mr-3"})),Pe(" "+B(x.label),1)]),_:2},1032,["to","class"]))),128))]),v("div",$u,[v("div",Lu,[v("div",Du,[v("div",Uu,[v("span",Bu,B((((E=j(s).currentUser)==null?void 0:E.name)||"U").charAt(0).toUpperCase()),1)]),v("div",Nu,[v("p",Mu,B(((A=j(s).currentUser)==null?void 0:A.name)||"User"),1),v("p",Fu,B(j(s).getRoleDisplayInfo(((C=j(s).currentUser)==null?void 0:C.role)||"viewer").name),1)])]),v("button",{onClick:d,class:"p-1 text-gray-400 hover:text-gray-600",title:"Logout"},[X(j(gr),{class:"w-5 h-5"})])])])])]),v("div",qu,[v("header",Hu,[v("div",Vu,[v("div",zu,[v("h2",Wu,B(p.$route.meta.title||"Dashboard"),1)]),v("div",Ku,[j(e).isUsingMockData?(b(),R("div",Ju,h[9]||(h[9]=[v("div",{class:"w-2 h-2 bg-yellow-400 rounded-full"},null,-1),v("span",{class:"text-sm text-yellow-700 font-medium"},"Demo Mode",-1)]))):fe("",!0),v("div",Gu,[h[10]||(h[10]=v("span",{class:"text-sm text-success-600 font-medium"},"Saldo:",-1)),v("span",Xu,B(c(j(e).currentBalance)),1)])])])]),v("main",Zu,[X(g)])])]),j(e).error&&!j(e).isUsingMockData?(b(),R("div",Qu,[v("div",Yu,[v("div",ed,[v("div",td,[X(j(yr),{class:"h-5 w-5 text-red-400"})]),v("div",sd,[h[12]||(h[12]=v("h3",{class:"text-sm font-medium text-red-800"},"Database Error",-1)),v("div",rd,[v("p",null,B(j(e).error),1),v("div",nd,[v("button",{onClick:y,disabled:o.value,class:"text-xs font-medium px-3 py-1 bg-red-600 text-white rounded hover:bg-red-700 disabled:opacity-50"},B(o.value?"Memuat...":"Coba Lagi"),9,id),X(m,{to:"/settings",class:"text-xs font-medium px-3 py-1 bg-gray-600 text-white rounded hover:bg-gray-700"},{default:ve(()=>h[11]||(h[11]=[Pe(" Pengaturan ",-1)])),_:1,__:[11]})])])]),v("div",od,[v("button",{onClick:h[2]||(h[2]=x=>j(e).clearError()),class:"text-red-400 hover:text-red-600"},[h[13]||(h[13]=v("span",{class:"sr-only"},"Dismiss",-1)),X(j(vr),{class:"w-4 h-4"})])])])])])):fe("",!0),j(e).isUsingMockData?(b(),R("div",ad,[v("div",ld,[v("div",cd,[v("div",ud,[X(j(yr),{class:"h-5 w-5 text-yellow-400"})]),v("div",dd,[h[16]||(h[16]=v("h3",{class:"text-sm font-medium text-yellow-800"},"Demo Mode Active",-1)),v("div",hd,[h[15]||(h[15]=v("p",null,"Using sample data. Database not configured yet.",-1)),X(m,{to:"/settings",class:"mt-2 inline-block font-medium underline hover:no-underline"},{default:ve(()=>h[14]||(h[14]=[Pe(" Setup Database ",-1)])),_:1,__:[14]})])]),v("div",fd,[v("button",{onClick:h[3]||(h[3]=x=>j(e).isUsingMockData=!1),class:"text-yellow-400 hover:text-yellow-600"},[h[17]||(h[17]=v("span",{class:"sr-only"},"Dismiss",-1)),X(j(vr),{class:"w-4 h-4"})])])])])])):fe("",!0)])}}},md=[{path:"/login",name:"Login",component:()=>M(()=>import("./Login-DIYFR6uv.js"),__vite__mapDeps([0,1,2,3,4]),import.meta.url),meta:{title:"Login",requiresAuth:!1,guestOnly:!0}},{path:"/",name:"Dashboard",component:()=>M(()=>import("./Dashboard-DokizXmD.js"),__vite__mapDeps([5,1,6,7,8,9,4,10]),import.meta.url),meta:{title:"Dashboard",requiresAuth:!0,permission:"dashboard"}},{path:"/students",name:"Students",component:()=>M(()=>import("./Students-BNZCigc5.js"),__vite__mapDeps([11,1,12,13,4]),import.meta.url),meta:{title:"Data Siswa",requiresAuth:!0,permission:"students"}},{path:"/transactions",name:"Transactions",component:()=>M(()=>import("./Transactions-65cPOpfd.js"),__vite__mapDeps([14,1,12,15,13,9,4]),import.meta.url),meta:{title:"Transaksi Kas",requiresAuth:!0,permission:"transactions"}},{path:"/expenses",name:"Expenses",component:()=>M(()=>import("./Expenses-D5CLBPH8.js"),__vite__mapDeps([16,1,17,4,9,7,12,15,8]),import.meta.url),meta:{title:"Pengeluaran",requiresAuth:!0,permission:"expenses"}},{path:"/payments",name:"Payments",component:()=>M(()=>import("./Payments-CU5aYowg.js"),__vite__mapDeps([18,1,12,7,2,13,19,15,8,9,4]),import.meta.url),meta:{title:"Link Pembayaran",requiresAuth:!0,permission:"payments"}},{path:"/campaigns",name:"Campaigns",component:()=>M(()=>import("./Campaigns-CKuDMiti.js"),__vite__mapDeps([20,1,12,8,15,4]),import.meta.url),meta:{title:"Campaign WhatsApp",requiresAuth:!0,permission:"campaigns"}},{path:"/reports",name:"Reports",component:()=>M(()=>import("./Reports-n8FnoaHR.js"),__vite__mapDeps([21,1,4,17,9,22,7,23]),import.meta.url),meta:{title:"Laporan Keuangan",requiresAuth:!0,permission:"reports"}},{path:"/settings",name:"Settings",component:()=>M(()=>import("./Settings-BYraIPSM.js"),__vite__mapDeps([24,1,25,4]),import.meta.url),meta:{title:"Pengaturan",requiresAuth:!0,permission:"settings"}},{path:"/webhook/payment",name:"PaymentWebhook",component:()=>M(()=>import("./PaymentWebhook-pB1P2fQn.js"),__vite__mapDeps([26,1,25,8,15,9,4]),import.meta.url),meta:{title:"Payment Webhook",hideInNav:!0,requiresAuth:!1}},{path:"/invoice",name:"Invoice",component:()=>M(()=>import("./Invoice-D3zJQBLl.js"),__vite__mapDeps([27,1,6,19,8,3,23,4,28]),import.meta.url),meta:{title:"Invoice Pembayaran",hideInNav:!0,requiresAuth:!1}},{path:"/:pathMatch(.*)*",name:"NotFound",component:{template:`
        <div class="flex items-center justify-center min-h-screen">
          <div class="text-center">
            <h1 class="text-4xl font-bold text-gray-900 mb-4">404</h1>
            <p class="text-gray-600 mb-4">Halaman tidak ditemukan</p>
            <router-link to="/" class="px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700">
              Kembali ke Dashboard
            </router-link>
          </div>
        </div>
      `},meta:{title:"Halaman Tidak Ditemukan",requiresAuth:!1}}],Ps=si({history:ri(),routes:md,scrollBehavior(t,e,s){return s||{top:0}}});Ps.beforeEach(async(t,e,s)=>{try{const r=Fn();await r.initializeAuth();const n=r.isAuthenticated.value,i=t.meta.requiresAuth!==!1,o=t.meta.guestOnly===!0;if(typeof document<"u"&&(document.title=t.meta.title?`${t.meta.title} - Kas Kelas 1B`:"Kas Kelas 1B"),o&&n)return s("/");if(i&&!n)return s("/login");if(t.meta.permission&&n&&!r.canAccessPage(t.meta.permission))return s("/");s()}catch(r){console.error("Navigation guard error:",r),t.path!=="/login"&&t.meta.requiresAuth!==!1?setTimeout(()=>{s("/login")},100):s()}});Ps.onError(t=>{console.error("Router error:",t),t.message&&(t.message.includes("Loading chunk")||t.message.includes("ChunkLoadError")||t.message.includes("Loading CSS chunk"))&&(console.info("Chunk loading error detected - reloading page"),typeof window<"u"&&window.location.reload())});class gd{constructor(){this.interval=null,this.isActive=!1,this.pingUrl=window.location.origin}start(){this.isActive||(this.isActive=!0,console.log("ðŸ”„ Keep-alive service started"),this.interval=setInterval(()=>{this.ping()},4*60*1e3),this.ping())}stop(){this.interval&&(clearInterval(this.interval),this.interval=null),this.isActive=!1,console.log("â¹ï¸ Keep-alive service stopped")}async ping(){try{const e=await fetch(`${this.pingUrl}/ping`,{method:"HEAD",cache:"no-cache"});console.log("ðŸ“¡ Keep-alive ping:",e.status===200?"OK":"Failed")}catch(e){console.warn("âš ï¸ Keep-alive ping failed:",e.message)}}setupActivityListener(){const e=["mousedown","mousemove","keypress","scroll","touchstart"],s=()=>{this.isActive||this.start()};e.forEach(r=>{document.addEventListener(r,s,{passive:!0})})}}const wr=new gd,qn=()=>typeof window<"u"&&typeof document<"u"&&window.fetch&&window.Promise&&window.addEventListener;qn()||console.error("Browser not supported. Please use a modern browser.");if(typeof window<"u"){window.addEventListener("unhandledrejection",r=>{var n,i,o,a,l,c;console.warn("Unhandled promise rejection:",r.reason),((i=(n=r.reason)==null?void 0:n.message)!=null&&i.includes("Failed to fetch")||(a=(o=r.reason)==null?void 0:o.message)!=null&&a.includes("NetworkError")||(c=(l=r.reason)==null?void 0:l.message)!=null&&c.includes("fetch"))&&(r.preventDefault(),console.info("Network error handled gracefully - using mock data fallback"))}),window.addEventListener("error",r=>{var n,i;console.error("Global error:",r.error),((n=r.message)!=null&&n.includes("Loading chunk")||(i=r.message)!=null&&i.includes("ChunkLoadError"))&&(console.info("Chunk loading error detected - refreshing page"),setTimeout(()=>{window.location.reload()},1e3))});let t=0;const e=3;window.addEventListener("beforeunload",()=>{t=0});const s=window.fetch;window.fetch=async function(...r){try{const n=await s.apply(this,r);return n.ok&&(t=0),n.status===404&&t<e?(t++,console.log(`ðŸ”„ Server might be sleeping, recovery attempt ${t}/${e}`),await new Promise(i=>setTimeout(i,2e3*t)),s.apply(this,r)):n}catch(n){if(n.message.includes("Failed to fetch")&&t<e)return t++,console.log(`ðŸ”„ Network error, recovery attempt ${t}/${e}`),await new Promise(i=>setTimeout(i,3e3*t)),s.apply(this,r);throw n}}}const Mt=br(pd),yd=ni();Mt.use(yd);Mt.use(Ps);Mt.use(so,{position:"top-right",timeout:5e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!1,closeButton:"button",icon:!0,rtl:!1});Mt.mount("#app");qn()&&(wr.setupActivityListener(),wr.start());export{Cd as a,Zc as b,gl as c,vr as d,Yc as e,ou as f,su as g,au as h,ru as i,q as j,Yt as p,yr as r,to as u};
